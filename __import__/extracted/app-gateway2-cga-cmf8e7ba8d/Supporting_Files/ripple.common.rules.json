{
  "imports": [
    "/etc/ripple/rules/rule_utils.json"
  ],
  "endpoints": {
    "thunder": {
      "protocol": "thunder",
      "url": "ws://127.0.0.1:9998/jsonrpc"
    },
    "asSocket": {
      "protocol": "websocket",
      "url": "ws://127.0.0.1:9005/as",
      "jsonrpc": false
    },
    "asHttp": {
      "protocol": "http",
      "url": "http://127.0.0.1:9005/as",
      "jsonrpc": true
    },
    "workflow": {
      "protocol": "workflow",
      "url": "http://asdf.com",
      "jsonrpc": false
    },
    "extn": {
      "protocol": "extn",
      "url": "http://localhost",
      "jsonrpc": false
    },
    "service": {
      "protocol": "service",
      "url": "http://localhost",
      "jsonrpc": false
    }
  },
  "rules": {
    "eos.*": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "metrics.*": {
      "endpoint": "service",
      "alias": "ripple:channel:distributor:eos"
    },
    "ripple.reportSessionUpdate": {
      "endpoint": "service",
      "alias": "ripple:channel:distributor:eos"
    },
    "ripple.reportLifecycleStateChange": {
      "endpoint": "service",
      "alias": "ripple:channel:distributor:eos"
    },
    "metricsmanagement.*": {
      "endpoint": "service",
      "alias": "ripple:channel:distributor:eos"
    },
    "internal.initialize": {
      "endpoint": "service",
      "alias": "ripple:channel:distributor:eos"
    },
    "discovery.signIn": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "discovery.signOut": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "discovery.onSignIn": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "discovery.onSignOut": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "discovery.entitlements": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "discovery.contentAccess": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "discovery.clearContentAccess": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "discovery.watched": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "discovery.watchNext": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "advertising.advertisingId": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "advertising.config": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "advertising.deviceAttributes": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "advertising.resetIdentifier": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "advertising.appBundleId": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "linchpin.onConnect": {
      "endpoint": "asSocket",
      "alias": "/system/notifications/status"
    },
    "device.hdr": {
      "endpoint": "asHttp",
      "alias": "/system/hdmi",
      "transform": {
        "response": "if .result.hdmi then {\"hdr10\": (.result.hdmi.sinkHDR10 // false), \"dolbyVision\": (.result.hdmi.sinkDolbyVision // false), \"hlg\": (.result.hdmi.sinkHLG // false), \"hdr10Plus\": (.result.hdmi.sinkHDR10Plus // false)} else { code: -32100, message: \"could not get device hdr\" } end"
      }
    },
    "device.make": {
      "alias": "org.rdk.System.getDeviceInfo",
      "transform": {
        "response": "$function.return_or_else(.result.make, \"unknown\")"
      }
    },
    "device.name": {
      "alias": "org.rdk.System.getFriendlyName",
      "transform": {
        "response": "$function.return_or_else(if .result.friendlyName | length == 0 then \"Living Room\" else .result.friendlyName end, \"Living Room\")"
      }
    },
    "device.setName": {
      "alias": "org.rdk.System.setFriendlyName",
      "transform": {
        "request": "{ friendlyName: .value}",
        "response": "$function.return_or_error(null, \"couldn't set name\")"
      }
    },
    "device.network": {
      "alias": "org.rdk.Network.getInterfaces",
      "transform": {
        "response": "def map_connected($connected): if $connected == true then  \"connected\" else \"disconnected\" end ; .result.interfaces| .[] |  select(.\"connected\"==true) | {type: .interface , state: map_connected(.connected)}| .type |= ascii_downcase|  [., inputs][0] "
      }
    },
    "device.screenResolution": {
      "alias": "org.rdk.DisplaySettings.getCurrentResolution",
      "transform": {
        "response": "$function.return_or_error(([.result.w,.result.h]), (\"error, failed to get screen resolution\"))"
      }
    },
    "device.videoResolution": {
      "endpoint": "asHttp",
      "alias": "/system/hdmi",
      "transform": {
        "response": "if .result.hdmi.uhdConfigured then [3840, 2160] else [1920, 1080] end"
      }
    },
    "device.sku": {
      "alias": "org.rdk.System.getSystemVersions",
      "transform": {
        "response": "$function.return_or_error(.result.stbVersion | split(\"_\")[0], \"Failed to get SKU\")"
      }
    },
    "advertising.skipRestriction": {
      "alias": "org.rdk.PersistentStore.getValue",
      "transform": {
        "request": "{ namespace: \"Advertising\", key: \"skipRestriction\"}",
        "response": "$function.return_or_else(.result.value | fromjson | .value, \"none\")"
      }
    },
    "advertising.setSkipRestriction": {
      "alias": "org.rdk.PersistentStore.setValue",
      "transform": {
        "request": "{ value: {update_time: now | todateiso8601, value: .value}, namespace: \"Advertising\", key: \"skipRestriction\"}",
        "response": "$function.return_or_error(null, \"couldn't set skip restriction\")"
      }
    },
    "advertising.onSkipRestrictionChanged": {
      "alias": "org.rdk.PersistentStore.onValueChanged",
      "transform": {
        "event": "(.value | fromjson | .value)",
        "rpcv2_event": "{ \"skipRestriction\": $event }"
      },
      "filter": "if .namespace == \"Advertising\" and .key == \"skipRestriction\" then true else false end"
    },
    "advertising.onPolicyChanged": {
      "alias": "org.rdk.PersistentStore.onValueChanged",
      "transform": {
        "event": ".value",
        "rpcv2_event": "{ \"policy\": $event }",
        "event_decorator_method": "AdvertisingPolicyEventDecorator"
      },
      "filter": "if ((.namespace == \"Advertising\" and .key == \"skipRestriction\") or (.namespace == \"Privacy\" and .key == \"allowAppContentAdTargetting\")) then true else false end"
    },
    "localization.countryCode": {
      "alias": "org.rdk.System.getTerritory",
      "transform": {
        "response": "$function.return_or_else($function.territory_thunder2firebolt(.result.territory, \"US\"), \"US\")"
      }
    },
    "localization.setCountryCode": {
      "alias": "org.rdk.System.setTerritory",
      "transform": {
        "request": "$function.territory_firebolt2thunder(.value, \"USA\")",
        "response": "$function.return_or_error(null, \"couldn't set countrycode\")"
      }
    },
    "localization.onCountryCodeChanged": {
      "alias": "org.rdk.System.onTerritoryChanged",
      "transform": {
        "event": "if .newTerritory == \"CAN\" then \"CA\" else \"US\" end",
        "rpcv2_event": "{ \"countryCode\": $event }"
      }
    },
    "localization.language": {
      "alias": "org.rdk.UserSettings.getPresentationLanguage",
      "transform": {
        "response": "$function.return_or_error(.result | split(\"-\") | .[0], \"couldn't get language\")"
      }
    },
    "localization.setLanguage": {
      "alias": "static",
      "transform": {
        "response": "{ error: { code: -32600, message: \"set language not supported\" }}"
      }
    },
    "localization.onLanguageChanged": {
      "alias": "org.rdk.UserSettings.onPresentationLanguageChanged",
      "transform": {
        "event": "if .presentationLanguage | length == 0 then null else (.presentationLanguage | split(\"-\") | .[0]) end",
        "rpcv2_event": "{ \"language\": $event }"
      }
    },
    "localization.locale": {
      "alias": "org.rdk.UserSettings.getPresentationLanguage",
      "transform": {
        "response": "$function.return_or_error(.result, \"couldn't get locale\")"
      }
    },
    "localization.setLocale": {
      "alias": "org.rdk.UserSettings.setPresentationLanguage",
      "transform": {
        "request": "{ presentationLanguage: .value }",
        "response": "$function.return_or_error(null, \"couldn't set locale\")"
      }
    },
    "localization.onLocaleChanged": {
      "alias": "org.rdk.UserSettings.onPresentationLanguageChanged",
      "transform": {
        "event": "if .presentationLanguage | length == 0 then null else .presentationLanguage end",
        "rpcv2_event": "{ \"locale\": $event }"
      }
    },
    "localization.timeZone": {
      "alias": "org.rdk.System.getTimeZoneDST",
      "transform": {
        "response": "if .result and .result.success then .result.timeZone else { error: { code: -32100, message: \"couldn't get timezone\" }} end"
      }
    },
    "localization.setTimeZone": {
      "alias": "org.rdk.System.setTimeZoneDST",
      "transform": {
        "request": "{ timeZone: .value }",
        "response": "$function.return_or_error(null, \"couldn't set timezone\")"
      }
    },
    "localization.onTimeZoneChanged": {
      "alias": "org.rdk.System.onTimeZoneDSTChanged",
      "transform": {
        "event": "if .newTimeZone | length == 0 then null else .newTimeZone end"
      }
    },
    "localization.additionalInfo": {
      "alias": "org.rdk.PersistentStore.getValue",
      "transform": {
        "request": "{ namespace: \"Localization\", key: \"additionalInfo\"}",
        "response": "$function.return_or_else((.result.value | fromjson | .value | fromjson), {})"
      }
    },
    "localization.setAdditionalInfo": {
      "alias": "org.rdk.PersistentStore.setValue",
      "transform": {
        "request": "{ value: {update_time: now | todateiso8601, value: .value}, namespace: \"Localization\", key: \"additionalInfo\"}",
        "response": "$function.return_or_error(null, \"couldn't set additionalInfo\")"
      }
    },
    "localization.onAdditionalInfoChanged": {
      "alias": "org.rdk.PersistentStore.onValueChanged",
      "transform": {
        "event": "(.value | fromjson | .value)",
        "rpcv2_event": "{ \"additionalInfo\": $event }"
      },
      "filter": "if .namespace == \"Localization\" and .key == \"additionalInfo\" then true else false end"
    },
    "localization.preferredAudioLanguages": {
      "alias": "org.rdk.UserSettings.getPreferredAudioLanguages",
      "transform": {
        "response": "$function.return_or_else(.result | split(\",\"), [])"
      }
    },
    "localization.setPreferredAudioLanguages": {
      "alias": "org.rdk.UserSettings.setPreferredAudioLanguages",
      "transform": {
        "request": "{ preferredLanguages: (.value | join(\",\"))}",
        "response": "$function.return_or_error(null, \"couldn't set preferred audio languages\")"
      }
    },
    "localization.onPreferredAudioLanguagesChanged": {
      "alias": "org.rdk.UserSettings.onPreferredAudioLanguagesChanged",
      "transform": {
        "event": "(.preferredLanguages | split(\",\"))",
        "rpcv2_event": "{ \"preferredAudioLanguages\": $event }"
      }
    },
    "secondscreen.device": {
      "alias": "org.rdk.AuthService.getXDeviceId",
      "transform": {
        "response": "$function.return_or_error(.result.xDeviceId, \"couldn't get device ID\")"
      }
    },
    "secondscreen.friendlyName": {
      "alias": "org.rdk.System.getFriendlyName",
      "transform": {
        "response": "$function.return_or_else(if .result.friendlyName | length == 0 then \"Living Room\" else .result.friendlyName end, \"Living Room\")"
      }
    },
    "secondscreen.onFriendlyNameChanged": {
      "alias": "org.rdk.System.onFriendlyNameChanged",
      "transform": {
        "event": "if .friendlyName | length == 0 then \"Living Room\" else .friendlyName end",
        "rpcv2_event": "{ \"friendlyName\": $event }"
      }
    },
    "authentication.root": {
      "alias": "org.rdk.AuthService.getAuthToken",
      "transform": {
        "response": "$function.return_or_error(.result.token, \"failed to get authentication root\")"
      }
    },
    "authentication.token": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "authentication.session": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "authentication.device": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "account.id": {
      "alias": "org.rdk.AuthService.getServiceAccountId",
      "transform": {
        "response": "$function.return_or_error(.result.serviceAccountId, \"failed to get account id\")"
      }
    },
    "account.session": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "account.uid": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "device.id": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "device.distributor": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "device.provision": {
      "endpoint": "extn",
      "alias": "ripple:channel:distributor:eos"
    },
    "device.onHdrChanged": {
      "alias": "org.rdk.HdcpProfile.onDisplayConnectionChanged",
      "event_handler": {
        "method": "device.hdr"
      }
    },
    "device.onScreenResolutionChanged": {
      "alias": "org.rdk.DisplaySettings.resolutionChanged",
      "transform": {
        "event": "[.width, .height]",
        "rpcv2_event": "{ \"screenResolution\": $event }"
      }
    },
    "device.onNetworkChanged": {
      "alias": "org.rdk.Network.onConnectionstatusChanged",
      "transform": {
        "event": "(.value | fromjson | .value)",
        "rpcv2_event": "{ \"network\": $event }"
      }
    },
    "device.onNameChanged": {
      "alias": "org.rdk.System.onFriendlyNameChanged",
      "transform": {
        "event": "if .friendlyName | length == 0 then \"Living Room\" else .friendlyName end",
        "rpcv2_event": "{ \"friendlyName\": $event }"
      }
    },
    "device.onVideoResolutionChanged": {
      "alias": "org.rdk.DisplaySettings.resolutionChanged",
      "event_handler": {
        "method": "device.videoResolution"
      },
      "transform": {
        "rpcv2_event": "{ \"videoResolution\": $event_handler_response }"
      }
    },
    "voiceguidance.setEnabled": {
      "alias": "org.rdk.UserSettings.setVoiceGuidance",
      "transform": {
        "request": "{ enabled: .value }",
        "response": "$function.return_or_error(null, \"couldn't set voiceguidance enabled\")"
      }
    },
    "voiceguidance.setSpeed": {
      "alias": "org.rdk.UserSettings.setVoiceGuidanceRate",
      "transform": {
        "request": "{ rate: $function.vg_speed_firebolt2thunder(.value) }",
        "response": "$function.return_or_error(null, \"couldnt set speed\")"
      }
    },
    "accessibility.voiceGuidance": {
      "alias": "workflow",
      "endpoint": "workflow",
      "sources": [
        {
          "method": "voiceguidance.enabled",
          "namespace": "enabled"
        },
        {
          "method": "voiceguidance.rate",
          "namespace": "rate"
        },
        {
          "method": "voiceguidance.navigationHints",
          "namespace": "navigationHints"
        }
      ],
      "transform": {
        "response": "$function.voiceguidance_settings()"
      }
    },
    "accessibility.onAudioDescriptionSettingsChanged": {
      "alias": "org.rdk.UserSettings.onAudioDescriptionChanged",
      "transform": {
        "event": "if .error == null then { enabled: .enabled } end",
        "rpcv2_event": "{ \"audioDescriptionSettings\": $event }"
      }
    },
    "accessibility.audioDescriptionSettings": {
      "alias": "org.rdk.UserSettings.getAudioDescription",
      "transform": {
        "response": "$function.return_or_error({ enabled: .result }, \"couldnt get audio description settings\")"
      }
    },
    "audiodescriptions.enabled": {
      "alias": "org.rdk.UserSettings.getAudioDescription",
      "transform": {
        "response": "$function.return_or_error(.result, \"couldnt get audio descriptions enabled\")"
      }
    },
    "audiodescriptions.setEnabled": {
      "alias": "org.rdk.UserSettings.setAudioDescription",
      "transform": {
        "request": "{ enabled: .value }"
      }
    },
    "audiodescriptions.onEnabledChanged": {
      "alias": "org.rdk.UserSettings.onAudioDescriptionChanged",
      "transform": {
        "event": ".enabled",
        "rpcv2_event": "{ \"enabled\": $event }"
      }
    },
    "accessibility.highContrastUI": {
      "alias": "org.rdk.UserSettings.getHighContrast",
      "transform": {
        "response": "$function.return_or_error(.result, \"couldnt get highContrastUI\")"
      }
    },
    "accessibility.onHighContrastUIChanged": {
      "alias": "org.rdk.UserSettings.onHighContrastChanged",
      "transform": {
        "event": ".enabled",
        "rpcv2_event": "{ \"highContrastUI\": $event }"
      }
    },
    "closedcaptions.enabled": {
      "alias": "org.rdk.UserSettings.getCaptions",
      "transform": {
        "response": "$function.return_or_error(.result, \"couldnt get closedcaptions enabled\")"
      }
    },
    "closedcaptions.setEnabled": {
      "alias": "org.rdk.UserSettings.setCaptions",
      "transform": {
        "request": "{ enabled: .value }"
      }
    },
    "closedcaptions.onEnabledChanged": {
      "alias": "org.rdk.UserSettings.onCaptionsChanged",
      "transform": {
        "event": ".enabled"
      }
    },
    "closedcaptions.preferredLanguages": {
      "alias": "org.rdk.UserSettings.getPreferredCaptionsLanguages",
      "transform": {
        "response": "if .result | length > 0 then .result | split(\",\") else [\"eng\"] end"
      }
    },
    "closedcaptions.setPreferredLanguages": {
      "alias": "org.rdk.UserSettings.setPreferredCaptionsLanguages",
      "transform": {
        "request": "{ preferredLanguages: (.value | join(\",\"))}"
      }
    },
    "closedaptions.onPreferredLanguagesChanged": {
      "alias": "org.rdk.UserSettings.onPreferredCaptionsLanguagesChanged",
      "transform": {
        "event": "(.preferredLanguages | split(\",\"))"
      }
    },
    "closedcaptions.fontFamily": {
      "alias": "org.rdk.PersistentStore.getValue",
      "transform": {
        "request": "{ namespace: \"ClosedCaptions\", key: \"fontFamily\"}",
        "response": "$function.return_or_else(.result.value | fromjson | .value, null)"
      }
    },
    "closedcaptions.fontSize": {
      "alias": "org.rdk.PersistentStore.getValue",
      "transform": {
        "request": "{ namespace: \"ClosedCaptions\", key: \"fontSize\"}",
        "response": "$function.return_or_else(.result.value | fromjson | .value, null)"
      }
    },
    "closedcaptions.fontColor": {
      "alias": "org.rdk.PersistentStore.getValue",
      "transform": {
        "request": "{ namespace: \"ClosedCaptions\", key: \"fontColor\"}",
        "response": "$function.return_or_else(.result.value | fromjson | .value, null)"
      }
    },
    "closedcaptions.fontEdge": {
      "alias": "org.rdk.PersistentStore.getValue",
      "transform": {
        "request": "{ namespace: \"ClosedCaptions\", key: \"fontEdge\"}",
        "response": "$function.return_or_else(.result.value | fromjson | .value, null)"
      }
    },
    "closedcaptions.fontEdgeColor": {
      "alias": "org.rdk.PersistentStore.getValue",
      "transform": {
        "request": "{ namespace: \"ClosedCaptions\", key: \"fontEdgeColor\"}",
        "response": "$function.return_or_else(.result.value | fromjson | .value, null)"
      }
    },
    "closedcaptions.fontOpacity": {
      "alias": "org.rdk.PersistentStore.getValue",
      "transform": {
        "request": "{ namespace: \"ClosedCaptions\", key: \"fontOpacity\"}",
        "response": "$function.return_or_else(.result.value | fromjson | .value, null)"
      }
    },
    "closedcaptions.backgroundColor": {
      "alias": "org.rdk.PersistentStore.getValue",
      "transform": {
        "request": "{ namespace: \"ClosedCaptions\", key: \"backgroundColor\"}",
        "response": "$function.return_or_else(.result.value | fromjson | .value, null)"
      }
    },
    "closedcaptions.backgroundOpacity": {
      "alias": "org.rdk.PersistentStore.getValue",
      "transform": {
        "request": "{ namespace: \"ClosedCaptions\", key: \"backgroundOpacity\"}",
        "response": "$function.return_or_else(.result.value | fromjson | .value, null)"
      }
    },
    "closedcaptions.windowColor": {
      "alias": "org.rdk.PersistentStore.getValue",
      "transform": {
        "request": "{ namespace: \"ClosedCaptions\", key: \"windowColor\"}",
        "response": "$function.return_or_else(.result.value | fromjson | .value, null)"
      }
    },
    "closedcaptions.windowOpacity": {
      "alias": "org.rdk.PersistentStore.getValue",
      "transform": {
        "request": "{ namespace: \"ClosedCaptions\", key: \"windowOpacity\"}",
        "response": "$function.return_or_else(.result.value | fromjson | .value, null)"
      }
    },
    "closedcaptions.textAlign": {
      "alias": "org.rdk.PersistentStore.getValue",
      "transform": {
        "request": "{ namespace: \"ClosedCaptions\", key: \"textAlign\"}",
        "response": "$function.return_or_else(.result.value | fromjson | .value, null)"
      }
    },
    "closedcaptions.textAlignVertical": {
      "alias": "org.rdk.PersistentStore.getValue",
      "transform": {
        "request": "{ namespace: \"ClosedCaptions\", key: \"textAlignVertical\"}",
        "response": "$function.return_or_else(.result.value | fromjson | .value, null)"
      }
    },
    "accessibility.getStyleFromTextTrackAsBatch": {
      "alias": "org.rdk.TextTrack.getClosedCaptionsStyle",
      "transform": {
        "response": "def map_enum(field; value): if field == \"fontFamily\" then {\"MONOSPACED_SERIF\": \"monospaced_serif\", \"PROPORTIONAL_SERIF\": \"proportional_serif\", \"MONOSPACE_SANS_SERIF\": \"monospaced_sanserif\", \"PROPORTIONAL_SANS_SERIF\": \"proportional_sanserif\", \"CASUAL\": \"casual\", \"CURSIVE\": \"cursive\", \"SMALL_CAPITAL\": \"smallcaps\"}[value] // null elif field == \"fontSize\" then {\"SMALL\": 0, \"REGULAR\": 1, \"LARGE\": 2, \"EXTRA_LARGE\": 3}[value] // null elif field == \"fontEdge\" then {\"NONE\": \"none\", \"RAISED\": \"raised\", \"DEPRESSED\": \"depressed\", \"UNIFORM\": \"uniform\", \"LEFT_DROP_SHADOW\": \"drop_shadow_left\", \"RIGHT_DROP_SHADOW\": \"drop_shadow_right\"}[value] // null else value end; (.result| to_entries| map({ key, value: map_enum(.key; .value) }) | map(select(.value != null and .value != \"\" and ((.value | type != \"number\") or .value >= 0))) | from_entries)"
      }
    },
    "accessibility.closedCaptionsSettings": {
      "alias": "workflow",
      "endpoint": "workflow",
      "sources": [
        {
          "method": "closedcaptions.enabled",
          "namespace": "enabled"
        },
        {
          "method": "closedcaptions.preferredLanguages",
          "namespace": "preferredLanguages"
        },
        {
          "method": "closedcaptions.fontFamily",
          "namespace": "fontFamily"
        },
        {
          "method": "closedcaptions.fontSize",
          "namespace": "fontSize"
        },
        {
          "method": "closedcaptions.fontColor",
          "namespace": "fontColor"
        },
        {
          "method": "closedcaptions.fontEdge",
          "namespace": "fontEdge"
        },
        {
          "method": "closedcaptions.fontEdgeColor",
          "namespace": "fontEdgeColor"
        },
        {
          "method": "closedcaptions.fontOpacity",
          "namespace": "fontOpacity"
        },
        {
          "method": "closedcaptions.backgroundColor",
          "namespace": "backgroundColor"
        },
        {
          "method": "closedcaptions.backgroundOpacity",
          "namespace": "backgroundOpacity"
        },
        {
          "method": "closedcaptions.textAlign",
          "namespace": "textAlign"
        },
        {
          "method": "closedcaptions.textAlignVertical",
          "namespace": "textAlignVertical"
        },
        {
          "method": "closedcaptions.windowColor",
          "namespace": "windowColor"
        },
        {
          "method": "closedcaptions.windowOpacity",
          "namespace": "windowOpacity"
        }
      ],
      "transform": {
        "response": "$function.closedcaptions_settings()"
      }
    },
    "accessibility.closedCaptions": {
      "alias": "workflow",
      "endpoint": "workflow",
      "sources": [
        {
          "method": "closedcaptions.enabled",
          "namespace": "enabled"
        },
        {
          "method": "closedcaptions.preferredLanguages",
          "namespace": "preferredLanguages"
        },
        {
          "method": "closedcaptions.fontFamily",
          "namespace": "fontFamily"
        },
        {
          "method": "closedcaptions.fontSize",
          "namespace": "fontSize"
        },
        {
          "method": "closedcaptions.fontColor",
          "namespace": "fontColor"
        },
        {
          "method": "closedcaptions.fontEdge",
          "namespace": "fontEdge"
        },
        {
          "method": "closedcaptions.fontEdgeColor",
          "namespace": "fontEdgeColor"
        },
        {
          "method": "closedcaptions.fontOpacity",
          "namespace": "fontOpacity"
        },
        {
          "method": "closedcaptions.backgroundColor",
          "namespace": "backgroundColor"
        },
        {
          "method": "closedcaptions.backgroundOpacity",
          "namespace": "backgroundOpacity"
        },
        {
          "method": "closedcaptions.textAlign",
          "namespace": "textAlign"
        },
        {
          "method": "closedcaptions.textAlignVertical",
          "namespace": "textAlignVertical"
        },
        {
          "method": "closedcaptions.windowColor",
          "namespace": "windowColor"
        },
        {
          "method": "closedcaptions.windowOpacity",
          "namespace": "windowOpacity"
        }
      ],
      "transform": {
        "response": "$function.closedcaptions_settings()"
      }
    },
    "accessibility.onClosedCaptionsSettingsChanged": {
      "alias": "org.rdk.UserSettings.onCaptionsChanged",
      "transform": {
        "event": "if .error == null then { enabled: .enabled, \"styles\": {} } end"
      }
    },
    "voiceguidance.navigationHints": {
      "alias": "org.rdk.UserSettings.getVoiceGuidanceHints",
      "transform": {
        "response": "$function.return_or_error(.result, \"couldnt get navigationHints\")"
      }
    },
    "voiceguidance.setNavigationHints": {
      "alias": "org.rdk.UserSettings.setVoiceGuidanceHints",
      "transform": {
        "request": "{ hints: .value }",
        "response": "$function.return_or_error(null, \"couldnt set navigationHints\")"
      }
    },
    "voiceguidance.onNavigationHintsChanged": {
      "alias": "org.rdk.UserSettings.onVoiceGuidanceHintsChanged",
      "transform": {
        "event": ".hints",
        "rpcv2_event": "{ \"navigationHints\": $event }"
      }
    },
    "voiceguidance.rate": {
      "alias": "org.rdk.UserSettings.getVoiceGuidanceRate",
      "transform": {
        "response": "$function.return_or_error($function.vg_speed_thunder2firebolt(.result), \"couldnt get rate\")"
      }
    },
    "voiceguidance.setRate": {
      "alias": "org.rdk.UserSettings.setVoiceGuidanceRate",
      "transform": {
        "request": "{ rate: $function.vg_speed_firebolt2thunder(.value) }",
        "response": "$function.return_or_error(null, \"couldnt set rate\")"
      }
    },
    "voiceguidance.onRateChanged": {
      "alias": "org.rdk.UserSettings.onVoiceGuidanceRateChanged",
      "transform": {
        "event": ".rate",
        "rpcv2_event": "{ \"rate\": $event }"
      }
    },
    "voiceguidance.enabled": {
      "alias": "org.rdk.UserSettings.getVoiceGuidance",
      "transform": {
        "response": "$function.return_or_error(.result, \"couldnt get voiceguidance state\")"
      }
    },
    "voiceguidance.onEnabledChanged": {
      "alias": "org.rdk.UserSettings.onVoiceGuidanceChanged",
      "transform": {
        "event": ".enabled",
        "rpcv2_event": "{ \"enabled\": $event }"
      }
    },
    "voiceguidance.speed": {
      "alias": "org.rdk.UserSettings.getVoiceGuidanceRate",
      "transform": {
        "response": "$function.return_or_error($function.vg_speed_thunder2firebolt(.result), \"couldnt get speed\")"
      }
    },
    "voiceguidance.onSpeedChanged": {
      "alias": "org.rdk.UserSettings.onVoiceGuidanceRateChanged",
      "transform": {
        "event": ".rate",
        "rpcv2_event": "{ \"speed\": $event }"
      }
    },
    "accessibility.voiceGuidanceSettings": {
      "alias": "workflow",
      "endpoint": "workflow",
      "sources": [
        {
          "method": "voiceguidance.enabled",
          "namespace": "enabled"
        },
        {
          "method": "voiceguidance.rate",
          "namespace": "rate"
        },
        {
          "method": "voiceguidance.navigationHints",
          "namespace": "navigationHints"
        }
      ],
      "transform": {
        "response": "$function.voiceguidance_settings()"
      }
    },
    "accessibility.onVoiceGuidanceSettingsChanged": {
      "alias": "org.rdk.UserSettings.onVoiceGuidanceChanged",
      "event_handler": {
        "method": "accessibility.voiceGuidanceSettings"
      }
    },
    "device.audio": {
      "endpoint": "asHttp",
      "alias": "/audio/setting/HDMIAudioFormat",
      "transform": {
        "response": "def AudioSupportMap:{\"Dolby Digital\": {\"stereo\": true, \"dolbyAtmos\": false, \"dolbyDigital5.1\": true, \"dolbyDigital5.1+\": false}, \"Dolby Digital Plus\": {\"stereo\": true, \"dolbyAtmos\": true, \"dolbyDigital5.1\": true, \"dolbyDigital5.1+\": true}, \"Dolby Atmos\": {\"stereo\": true, \"dolbyAtmos\": true, \"dolbyDigital5.1\": true, \"dolbyDigital5.1+\": true}, \"Auto\": {\"stereo\": true, \"dolbyAtmos\": true, \"dolbyDigital5.1\": true, \"dolbyDigital5.1+\": true}, \"Passthrough\": {\"stereo\": true, \"dolbyAtmos\": true, \"dolbyDigital5.1\": true, \"dolbyDigital5.1+\": true},}; if .result then .result.HDMIAudioFormat as $format | AudioSupportMap| .[$format] // {\"stereo\": true, \"dolbyAtmos\": false, \"dolbyDigital5.1\": false, \"dolbyDigital5.1+\": false } else { code: -32100, message: \"could not get device audio\" } end"
      }
    },
    "device.onAudioChanged": {
      "alias": "org.rdk.DisplaySettings.audioFormatChanged",
      "event_handler": {
        "method": "device.audio"
      }
    },
    "device.hdcp": {
      "alias": "org.rdk.HdcpProfile.getHDCPStatus",
      "endpoint": "thunder",
      "transform": {
        "response": "if .result.success and .result.HDCPStatus.hdcpReason == 2 then if .result.HDCPStatus.currentHDCPVersion ==\"1.4\" then { \"hdcp1.4\": true, \"hdcp2.2\": false } else { \"hdcp2.2\": true, \"hdcp1.4\": false } end else { \"hdcp1.4\": false, \"hdcp2.2\": false} end"
      }
    },
    "device.onHdcpChanged": {
      "alias": "org.rdk.HdcpProfile.onDisplayConnectionChanged",
      "event_handler": {
        "method": "device.hdcp"
      }
    },
    "securestorage.get": {
      "alias": "org.rdk.SharedStorage.getValue",
      "transform": {
        "request": "{ namespace: \"$context.appId\", scope: .scope, key: .key }",
        "response": "if .result and .result.success then .result.value elif .error.code==22 or .error.code==43 then null else { error: .error } end"
      }
    },
    "securestorage.set": {
      "alias": "org.rdk.SharedStorage.setValue",
      "transform": {
        "request": "if .options and .options.ttl then { namespace: \"$context.appId\", scope: .scope, key: .key, value: .value, ttl: .options.ttl } else { namespace: \"$context.appId\", scope: .scope, key: .key, value: .value } end",
        "response": "if .result and .result.success then null elif .error then {error: .error} else { error: { code: -32100, message: \"couldn't set value\" }} end"
      }
    },
    "securestorage.remove": {
      "alias": "org.rdk.SharedStorage.deleteKey",
      "transform": {
        "request": "{ namespace: \"$context.appId\", scope: .scope, key: .key }",
        "response": "if .result and .result.success then null elif .error then {error: .error} else { error: { code: -32100, message: \"couldn't delete value\" }} end"
      }
    },
    "securestorage.clear": {
      "alias": "org.rdk.SharedStorage.deleteNamespace",
      "transform": {
        "request": "{ namespace: \"$context.appId\", scope: .scope}",
        "response": "if .result and .result.success then null elif .error then {error: .error} else { error: { code: -32100, message: \"couldn't delete name space\" }} end"
      }
    },
    "securestorage.setForApp": {
      "alias": "org.rdk.SharedStorage.setValue",
      "transform": {
        "request": "{ namespace: .appId, scope: .scope, key: .key, value: .value }",
        "response": "if .result and .result.success then null elif .error then {error: .error} else { error: { code: -32100, message: \"couldn't set value\" }} end"
      }
    },
    "securestorage.removeForApp": {
      "alias": "org.rdk.SharedStorage.deleteKey",
      "transform": {
        "request": "{ namespace: .appId, scope: .scope, key: .key }",
        "response": "if .result and .result.success then null elif .error then {error: .error} else { error: { code: -32100, message: \"couldn't delete value\" }} end"
      }
    },
    "securestorage.clearForApp": {
      "alias": "org.rdk.SharedStorage.deleteNamespace",
      "transform": {
        "request": "{ namespace: .appId, scope: .scope}",
        "response": "if .result and .result.success then null elif .error then {error: .error} else { error: { code: -32100, message: \"couldn't delete namespace\" }} end"
      }
    },
    "lifecycle2.onAppLifecycleStateChanged": {
      "alias": "org.rdk.LifecycleManager.onAppLifecycleStateChanged"
    },
    "lifecycle2.ready": {
      "alias": "org.rdk.LifecycleManager.appReady",
      "transform": {
        "request": "{ appId : \"$context.appId\""
      }
    },
    "commerce.checkout": {
      "endpoint": "asHttp",
      "alias": "/apps/action/launch?appId=comcast_unified_checkout_app",
      "transform": {
        "request": ".returnToMe as $returnToMe | { action: \"purchase\", data: { appId: \"$context.appId\", sku: .sku, handleActivation: .activateIfRequired }, context: { source: \"$context.appId\" } } | if $returnToMe == true then .data += { launchAppOnExit: \"$context.appId\" } end",
        "response": "if .result and .result.errorCode then false else true end"
      }
    },
    "discovery.launch.internal": {
      "endpoint": "asHttp",
      "alias": "/apps/subscription/action/launch",
      "transform": {
        "request": "if .intent?.context?.source? then { \"origin\": \"APP\", \"SKU\": (.intent.context.source | split(\":\") | .[1]), \"args\": { \"firebolt\": .intent }, \"originAppId\": (.intent.context.source | split(\":\") | .[1]) } else { \"error\": \"invalid params\" } end",
        "response": "if .result and .result.errorCode then false else true end"
      }
    }
  }
}
