{"is_source_file": true, "format": "Rust", "description": "This file implements a Rust module for a 'badger' extension, which involves initializing and starting a service that interacts with a ripple SDK for device management, event handling, and account session management. It defines functions to initialize the extension, handle service messages, set up token event subscriptions, and manage bootstrap processes for the extension. The code leverages asynchronous programming with Tokio and includes external dependencies related to Ripple SDK and Thunder SDK.", "external_files": ["ripple_sdk::core::server::rpc_module::Methods", "ripple_sdk::api::manifest::device_manifest::DeviceManifest", "ripple_sdk::api::manifest::extn_manifest::{ExtnManifest, ExtnSymbol}", "ripple_sdk::api::manifest::ripple_manifest_loader::RippleManifestLoader", "ripple_sdk::extn::ffi::ffi_channel::ExtnChannel", "ripple_sdk::serde_json", "ripple_sdk::service::service_client::ServiceClient", "ripple_sdk::service::service_message::JsonRpcNotification", "ripple_sdk", "ripple_sdk::export_extn_channel", "ripple_sdk::extn::extn_id::{ExtnClassId, ExtnId}", "ripple_sdk::log::{debug, error, info}", "ripple_sdk::service::service_message::{JsonRpcMessage, ServiceMessage}", "ripple_sdk::tokio", "ripple_sdk::utils::{extn_utils::ExtnUtils, logger::init_and_configure_logger}", "serde_json", "std::collections::HashMap", "std::str", "thunder_ripple_sdk::bootstrap::boot_thunder::boot_thunder", "thunder_ripple_sdk::ripple_sdk::api::context::{ActivationStatus, RippleContextUpdateType}", "tokio::sync::mpsc", "crate::badger_state::BadgerState", "crate::handlers::{badger_device_info::subscribe_to_device_changes, badger_info_rpc::{get_account_session, BadgerServiceImpl, BadgerServiceServer}}", "crate::thunder::thunder_session::ThunderSessionService"], "external_methods": ["RippleManifestLoader::initialize", "ServiceClient::builder", "ServiceClient::with_extension", "ServiceClient::build", "ExtnManifest::get_extn_symbol", "ServiceClient::clone", "ServiceClient::get_extn_client", "ServiceClient::initialize", "ExtnUtils::get_runtime", "boot_thunder", "get_account_session", "subscribe_to_device_changes", "setup_token_event_handler", "handle_service_message", "parse_ripple_context", "handle_ripple_context", "ThunderSessionService::get_account_session"], "published": ["start_service", "init"], "classes": [], "methods": [{"name": "get_rpc_methods_for_service(state: &BadgerState) -> Methods", "description": "Creates and returns the RPC methods for the badger service based on the current state.", "scope": "", "scopeKind": ""}, {"name": "start_service()", "description": "Asynchronously initializes logging, loads manifests, and starts the badger service.", "scope": "", "scopeKind": ""}, {"name": "start()", "description": "Starts the badger extension in a non-async context, setting up the runtime environment.", "scope": "", "scopeKind": ""}, {"name": "get_symbol(extn_manifest: ExtnManifest) -> Option<ExtnSymbol>", "description": "Retrieves the extension symbol from the extn manifest.", "scope": "", "scopeKind": ""}, {"name": "init(client: ServiceClient, device_manifest: DeviceManifest)", "description": "Initializes the badger extension, booting thunder, setting up device event subscriptions, and managing account sessions.", "scope": "", "scopeKind": ""}, {"name": "setup_token_event_handler(state: &BadgerState, service_client: &mut ServiceClient)", "description": "Sets up a handler for token change events over the service client, which triggers session updates.", "scope": "", "scopeKind": ""}, {"name": "handle_service_message(state: &BadgerState, sm: ServiceMessage)", "description": "Processes incoming service messages, particularly notifications containing RippleContext updates.", "scope": "", "scopeKind": ""}, {"name": "parse_ripple_context(notification: &JsonRpcNotification) -> Option<RippleContext>", "description": "Parses a RippleContext object from a JSON RPC notification.", "scope": "", "scopeKind": ""}, {"name": "handle_ripple_context(state: &BadgerState, ripple_context: RippleContext)", "description": "Handles a RippleContext update, especially token changed events, to refresh the account session.", "scope": "", "scopeKind": ""}, {"name": "init_extn_channel() -> ExtnChannel", "description": "Creates and initializes an ExtnChannel with the start method.", "scope": "", "scopeKind": ""}], "calls": ["RippleManifestLoader::initialize", "ServiceClient::builder", "ServiceClient::with_extension", "ServiceClient::build", "ExtnManifest::get_extn_symbol", "ServiceClient::initialize", "ExtnUtils::get_runtime", "boot_thunder", "get_account_session", "subscribe_to_device_changes", "setup_token_event_handler", "handle_service_message", "parse_ripple_context", "handle_ripple_context", "ThunderSessionService::get_account_session"], "search-terms": ["badger extension", "Ripple SDK", "Thunder SDK", "device manifest", "RippleContext", "token change event", "extn channel", "boot thunder", "service client", "RPC methods", "account session"], "state": 2, "file_id": 217, "knowledge_revision": 707, "git_revision": "7541615396d97800a8dedd6a14e20d3bd2197bf0", "ctags": [{"_type": "tag", "name": "get_rpc_methods_for_service", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^fn get_rpc_methods_for_service(state: &BadgerState) -> Methods {$/", "language": "Rust", "kind": "function", "signature": "(state: &BadgerState) -> Methods"}, {"_type": "tag", "name": "get_symbol", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^fn get_symbol(extn_manifest: ExtnManifest) -> Option<ExtnSymbol> {$/", "language": "Rust", "kind": "function", "signature": "(extn_manifest: ExtnManifest) -> Option<ExtnSymbol>"}, {"_type": "tag", "name": "handle_ripple_context", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^async fn handle_ripple_context(state: &BadgerState, ripple_context: RippleContext) {$/", "language": "Rust", "kind": "function", "signature": "(state: &BadgerState, ripple_context: RippleContext)"}, {"_type": "tag", "name": "handle_service_message", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^async fn handle_service_message(state: &BadgerState, sm: ServiceMessage) {$/", "language": "Rust", "kind": "function", "signature": "(state: &BadgerState, sm: ServiceMessage)"}, {"_type": "tag", "name": "init", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^pub async fn init(client: ServiceClient, device_manifest: DeviceManifest) {$/", "language": "Rust", "kind": "function", "signature": "(client: ServiceClient, device_manifest: DeviceManifest)"}, {"_type": "tag", "name": "init_extn_channel", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^fn init_extn_channel() -> ExtnChannel {$/", "language": "Rust", "kind": "function", "signature": "() -> ExtnChannel"}, {"_type": "tag", "name": "parse_ripple_context", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^fn parse_ripple_context(notification: &JsonRpcNotification) -> Option<RippleContext> {$/", "language": "Rust", "kind": "function", "signature": "(notification: &JsonRpcNotification) -> Option<RippleContext>"}, {"_type": "tag", "name": "setup_token_event_handler", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^fn setup_token_event_handler(state: &BadgerState, service_client: &mut ServiceClient) {$/", "language": "Rust", "kind": "function", "signature": "(state: &BadgerState, service_client: &mut ServiceClient)"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^fn start() {$/", "language": "Rust", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "start_service", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^pub async fn start_service() {$/", "language": "Rust", "kind": "function", "signature": "()"}], "hash": "ef3b93be427232a6008ab36360cee3de", "format-version": 4, "code-base-name": "app-gateway2", "filename": "Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "revision_history": [{"707": "7541615396d97800a8dedd6a14e20d3bd2197bf0"}]}