{"is_source_file": true, "format": "Rust", "description": "This file defines the `OttTokenService` struct and its methods for handling gRPC communication to obtain OTT tokens, including network channel management, request decoration, and response handling. It also includes tests with a mock implementation.", "external_files": ["tonic::transport::Channel", "crate::gateway::appsanity_gateway::GrpcClientSession", "crate::message::DpabError", "crate::model::auth::GetOttTokenResponse", "crate::util::service_util::decorate_request_with_account_session", "ottx_protos::ott_token::ott_token_service_client::OttTokenServiceClient", "ottx_protos::ott_token::PlatformTokenRequest", "thunder_ripple_sdk::ripple_sdk::log::error", "thunder_ripple_sdk::ripple_sdk::api::session::AccountSession", "tonic::Request", "uuid::Uuid"], "external_methods": ["GrpcClientSession::get_grpc_channel", "OttTokenServiceClient::with_interceptor", "OttTokenServiceClient::platform_token"], "published": ["OttTokenService"], "classes": [{"name": "OttTokenService", "description": "Service struct managing OTT token retrieval via gRPC, holding a thread-safe gRPC client session."}], "methods": [{"name": "get_channel(&self) -> Result<Channel, DpabError>", "description": "Retrieves a gRPC channel from the client session, handling errors.", "scope": "OttTokenService", "scopeKind": "implementation"}, {"name": "get_ott_token( &self, account_session: &AccountSession, app_id: String, xact: String, ) -> Result<GetOttTokenResponse, DpabError>", "description": "Asynchronously requests an OTT token for a given account session, app ID, and transaction ID, handling network communication and response transformation.", "scope": "OttTokenService", "scopeKind": "implementation"}, {"name": "new_from(grpc_client_session: Arc<Mutex<GrpcClientSession>>) -> OttTokenService", "description": "Constructs a new `OttTokenService` from a given shared gRPC client session.", "scope": "OttTokenService", "scopeKind": "implementation"}, {"name": "mock() -> Self", "scope": "tests::OttTokenService", "scopeKind": "implementation", "description": "unavailable"}], "calls": ["self.get_grpc_channel", "OttTokenServiceClient::with_interceptor", "client.platform_token", "decorate_request_with_account_session", "error!"], "search-terms": ["OttTokenService", "platform_token", "get_ott_token", "gRPC", "auth token", "async Rust", "tonic client"], "state": 2, "file_id": 1820, "knowledge_revision": 4412, "git_revision": "0f87a35b32215bc8547fb583d6c84bd51f603f69", "ctags": [{"_type": "tag", "name": "OttTokenService", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^    impl Mockable for OttTokenService {$/", "language": "Rust", "kind": "implementation", "scope": "tests", "scopeKind": "module"}, {"_type": "tag", "name": "OttTokenService", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^impl OttTokenService {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "OttTokenService", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^pub struct OttTokenService {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "get_channel", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^    fn get_channel(&self) -> Result<Channel, DpabError> {$/", "language": "Rust", "kind": "method", "signature": "(&self) -> Result<Channel, DpabError>", "scope": "OttTokenService", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_ott_token", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^    pub async fn get_ott_token($/", "language": "Rust", "kind": "method", "signature": "( &self, account_session: &AccountSession, app_id: String, xact: String, ) -> Result<GetOttTokenResponse, DpabError>", "scope": "OttTokenService", "scopeKind": "implementation"}, {"_type": "tag", "name": "grpc_client_session", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^    grpc_client_session: Arc<Mutex<GrpcClientSession>>,$/", "language": "Rust", "kind": "field", "scope": "OttTokenService", "scopeKind": "struct"}, {"_type": "tag", "name": "mock", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^        fn mock() -> Self {$/", "language": "Rust", "kind": "method", "signature": "() -> Self", "scope": "tests::OttTokenService", "scopeKind": "implementation"}, {"_type": "tag", "name": "new_from", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^    pub fn new_from(grpc_client_session: Arc<Mutex<GrpcClientSession>>) -> OttTokenService {$/", "language": "Rust", "kind": "method", "signature": "(grpc_client_session: Arc<Mutex<GrpcClientSession>>) -> OttTokenService", "scope": "OttTokenService", "scopeKind": "implementation"}, {"_type": "tag", "name": "tests", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^pub mod tests {$/", "language": "Rust", "kind": "module"}], "hash": "66cd8c0fdc72d57eb27b1ccd68b762de", "format-version": 4, "code-base-name": "app-gateway2", "filename": "__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/ott_token.rs", "fields": [{"name": "grpc_client_session: Arc<Mutex<GrpcClientSession>>,", "scope": "OttTokenService", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"4412": "0f87a35b32215bc8547fb583d6c84bd51f603f69"}]}