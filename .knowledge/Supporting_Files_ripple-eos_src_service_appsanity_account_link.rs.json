{"is_source_file": true, "format": "Rust", "description": "This file implements the AppsanityAccountLinkService in Rust, which manages account linking actions such as entitlements, media events, launchpad linking, and sign-in operations. It includes definitions of data structures, async methods for communicating with gRPC services, and tests for these functionalities.", "external_files": ["crate::client::xvp_playback", "crate::client::xvp_videoservice", "crate::gateway::appsanity_gateway", "ottx_protos::session_service", "tonic", "thunder_ripple_sdk::ripple_sdk::api::firebolt::fb_discovery", "thunder_ripple_sdk::ripple_sdk::api::session", "thunder_ripple_sdk::ripple_sdk", "httpmock"], "external_methods": ["crate::util::service_util::decorate_request_with_account_session", "XvpPlayback::put_resume_point", "XvpVideoService::sign_in", "tokio::spawn"], "published": ["AppsanityAccountLinkService", "XvpServiceUrls", "call_link_account_entitlements", "call_link_account_launchpad"], "classes": [{"name": "AppsanityAccountLinkService", "description": "The main service class that manages account linking, entitlements, media events, launchpad, and sign-in functionalities."}, {"name": "XvpServiceUrls", "description": "Holds configuration URLs for XVP playback and video service endpoints."}], "methods": [{"name": "new( grpc_client_session: Arc<Mutex<GrpcClientSession>>, xvp_service_urls: XvpServiceUrls, xvp_data_scopes: CloudServiceScopes, ) -> Self", "description": "Constructor for AppsanityAccountLinkService, initializes supported link types and actions, as well as session and URL settings.", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"name": "get_link_types(&self, key: &String) -> AccountLinkType", "description": "Retrieves the AccountLinkType based on provided string key.", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"name": "get_link_action(&self, key: &String) -> AccountLinkAction", "description": "Retrieves the AccountLinkAction based on provided string key.", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"name": "get_entitlements(&self, entitlements: &Vec<DiscoveryEntitlement>) -> Vec<Entitlement>", "description": "Converts a vector of DiscoveryEntitlement into a vector of Entitlement structs.", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"name": "get_images( &self, images: &HashMap<String, HashMap<String, String>>, ) -> HashMap<String, ImagesData>", "description": "Maps nested image descriptions into a flat HashMap of ImagesData.", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"name": "entitlements_account_link( self: Box<Self>, params: EntitlementsAccountLinkRequestParams, ) -> Result<EntitlementsAccountLinkResponse, RippleError>", "description": "Handles entitlements linking by making a gRPC call and returning response or error.", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"name": "media_events_account_link( self: Box<Self>, params: MediaEventsAccountLinkRequestParams, ) -> Result<MediaEventsAccountLinkResponse, RippleError>", "description": "Chains media event processing, including resume point update.", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"name": "launch_pad_account_link( self: Box<Self>, params: LaunchPadAccountLinkRequestParams, ) -> Result<LaunchPadAccountLinkResponse, RippleError>", "description": "Handles launchpad account linking via gRPC call.", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"name": "sign_in(self: Box<Self>, params: SignInRequestParams) -> Result<(), RippleError>", "description": "Performs sign-in operation via XvpVideoService.", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"name": "call_link_account_entitlements( _channel: Channel, _perm_req: Request<LinkAccountEntitlementsRequest>, _dist_session: &AccountSession, ) -> Result<tonic::Response<LinkAccountEntitlementsResponse>, tonic::Status>", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "call_link_account_entitlements( channel: Channel, perm_req: Request<LinkAccountEntitlementsRequest>, dist_session: &AccountSession, ) -> Result<tonic::Response<LinkAccountEntitlementsResponse>, tonic::Status>", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "call_link_account_launchpad( _channel: Channel, _perm_req: Request<LinkAccountLaunchpadRequest>, _dist_session: &AccountSession, ) -> Result<tonic::Response<LinkAccountLaunchpadResponse>, tonic::Status>", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "call_link_account_launchpad( channel: Channel, perm_req: Request<LinkAccountLaunchpadRequest>, dist_session: &AccountSession, ) -> Result<tonic::Response<LinkAccountLaunchpadResponse>, tonic::Status>", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_service(url: String) -> Box<AppsanityAccountLinkService>", "scope": "tests", "scopeKind": "module", "description": "unavailable"}, {"name": "get_xvp_playback_url(&self) -> &str", "scope": "XvpServiceUrls", "scopeKind": "implementation", "description": "unavailable"}, {"name": "get_xvp_video_service_url(&self) -> &str", "scope": "XvpServiceUrls", "scopeKind": "implementation", "description": "unavailable"}, {"name": "new(xvp_playback_base_url: String, xvp_video_service_base_url: String) -> Self", "scope": "XvpServiceUrls", "scopeKind": "implementation", "description": "unavailable"}, {"name": "test_entitlements_account_link()", "scope": "tests", "scopeKind": "module", "description": "unavailable"}, {"name": "test_launch_pad_account_link()", "scope": "tests", "scopeKind": "module", "description": "unavailable"}, {"name": "test_media_events_account_link()", "scope": "tests", "scopeKind": "module", "description": "unavailable"}, {"name": "test_sign_in()", "scope": "tests", "scopeKind": "module", "description": "unavailable"}], "calls": ["crate::util::service_util::decorate_request_with_account_session", "ottx_protos::session_service::account_bridge_service_client::AccountBridgeServiceClient::with_interceptor", "client.link_account_entitlements", "XvpPlayback::put_resume_point", "call_link_account_launchpad", "call_link_account_entitlements", "XvpVideoService::sign_in"], "search-terms": ["AppsanityAccountLinkService", "entitlements", "launchpad", "media_events", "sign_in", "GRPC", "Xvp", "link_types", "link_actions"], "state": 2, "file_id": 2593, "knowledge_revision": 5170, "git_revision": "0f87a35b32215bc8547fb583d6c84bd51f603f69", "ctags": [{"_type": "tag", "name": "AppsanityAccountLinkService", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^impl AccountLinkService for AppsanityAccountLinkService {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "AppsanityAccountLinkService", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^impl AppsanityAccountLinkService {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "AppsanityAccountLinkService", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^pub struct AppsanityAccountLinkService {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "XvpServiceUrls", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^impl XvpServiceUrls {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "XvpServiceUrls", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^pub struct XvpServiceUrls {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "call_link_account_entitlements", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^async fn call_link_account_entitlements($/", "language": "Rust", "kind": "function", "signature": "( _channel: Channel, _perm_req: Request<LinkAccountEntitlementsRequest>, _dist_session: &AccountSession, ) -> Result<tonic::Response<LinkAccountEntitlementsResponse>, tonic::Status>"}, {"_type": "tag", "name": "call_link_account_entitlements", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^async fn call_link_account_entitlements($/", "language": "Rust", "kind": "function", "signature": "( channel: Channel, perm_req: Request<LinkAccountEntitlementsRequest>, dist_session: &AccountSession, ) -> Result<tonic::Response<LinkAccountEntitlementsResponse>, tonic::Status>"}, {"_type": "tag", "name": "call_link_account_launchpad", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^async fn call_link_account_launchpad($/", "language": "Rust", "kind": "function", "signature": "( _channel: Channel, _perm_req: Request<LinkAccountLaunchpadRequest>, _dist_session: &AccountSession, ) -> Result<tonic::Response<LinkAccountLaunchpadResponse>, tonic::Status>"}, {"_type": "tag", "name": "call_link_account_launchpad", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^async fn call_link_account_launchpad($/", "language": "Rust", "kind": "function", "signature": "( channel: Channel, perm_req: Request<LinkAccountLaunchpadRequest>, dist_session: &AccountSession, ) -> Result<tonic::Response<LinkAccountLaunchpadResponse>, tonic::Status>"}, {"_type": "tag", "name": "entitlements_account_link", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    async fn entitlements_account_link($/", "language": "Rust", "kind": "method", "signature": "( self: Box<Self>, params: EntitlementsAccountLinkRequestParams, ) -> Result<EntitlementsAccountLinkResponse, RippleError>", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_entitlements", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    pub fn get_entitlements(&self, entitlements: &Vec<DiscoveryEntitlement>) -> Vec<Entitlement>/", "language": "Rust", "kind": "method", "signature": "(&self, entitlements: &Vec<DiscoveryEntitlement>) -> Vec<Entitlement>", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_images", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    fn get_images($/", "language": "Rust", "kind": "method", "signature": "( &self, images: &HashMap<String, HashMap<String, String>>, ) -> HashMap<String, ImagesData>", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_link_action", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    pub fn get_link_action(&self, key: &String) -> AccountLinkAction {$/", "language": "Rust", "kind": "method", "signature": "(&self, key: &String) -> AccountLinkAction", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_link_types", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    pub fn get_link_types(&self, key: &String) -> AccountLinkType {$/", "language": "Rust", "kind": "method", "signature": "(&self, key: &String) -> AccountLinkType", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_service", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    fn get_service(url: String) -> Box<AppsanityAccountLinkService> {$/", "language": "Rust", "kind": "function", "signature": "(url: String) -> Box<AppsanityAccountLinkService>", "scope": "tests", "scopeKind": "module"}, {"_type": "tag", "name": "get_xvp_playback_url", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    pub fn get_xvp_playback_url(&self) -> &str {$/", "language": "Rust", "kind": "method", "signature": "(&self) -> &str", "scope": "XvpServiceUrls", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_xvp_video_service_url", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    pub fn get_xvp_video_service_url(&self) -> &str {$/", "language": "Rust", "kind": "method", "signature": "(&self) -> &str", "scope": "XvpServiceUrls", "scopeKind": "implementation"}, {"_type": "tag", "name": "grpc_client_session", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    grpc_client_session: Arc<Mutex<GrpcClientSession>>,$/", "language": "Rust", "kind": "field", "scope": "AppsanityAccountLinkService", "scopeKind": "struct"}, {"_type": "tag", "name": "launch_pad_account_link", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    async fn launch_pad_account_link($/", "language": "Rust", "kind": "method", "signature": "( self: Box<Self>, params: LaunchPadAccountLinkRequestParams, ) -> Result<LaunchPadAccountLinkResponse, RippleError>", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"_type": "tag", "name": "media_events_account_link", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    async fn media_events_account_link($/", "language": "Rust", "kind": "method", "signature": "( self: Box<Self>, params: MediaEventsAccountLinkRequestParams, ) -> Result<MediaEventsAccountLinkResponse, RippleError>", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"_type": "tag", "name": "new", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    pub fn new($/", "language": "Rust", "kind": "method", "signature": "( grpc_client_session: Arc<Mutex<GrpcClientSession>>, xvp_service_urls: XvpServiceUrls, xvp_data_scopes: CloudServiceScopes, ) -> Self", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"_type": "tag", "name": "new", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    pub fn new(xvp_playback_base_url: String, xvp_video_service_base_url: String) -> Self {$/", "language": "Rust", "kind": "method", "signature": "(xvp_playback_base_url: String, xvp_video_service_base_url: String) -> Self", "scope": "XvpServiceUrls", "scopeKind": "implementation"}, {"_type": "tag", "name": "sign_in", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    async fn sign_in(self: Box<Self>, params: SignInRequestParams) -> Result<(), RippleError> {$/", "language": "Rust", "kind": "method", "signature": "(self: Box<Self>, params: SignInRequestParams) -> Result<(), RippleError>", "scope": "AppsanityAccountLinkService", "scopeKind": "implementation"}, {"_type": "tag", "name": "supported_link_action", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    supported_link_action: HashMap<String, AccountLinkAction>,$/", "language": "Rust", "kind": "field", "scope": "AppsanityAccountLinkService", "scopeKind": "struct"}, {"_type": "tag", "name": "supported_link_types", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    supported_link_types: HashMap<String, AccountLinkType>,$/", "language": "Rust", "kind": "field", "scope": "AppsanityAccountLinkService", "scopeKind": "struct"}, {"_type": "tag", "name": "test_entitlements_account_link", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    pub async fn test_entitlements_account_link() {$/", "language": "Rust", "kind": "function", "signature": "()", "scope": "tests", "scopeKind": "module"}, {"_type": "tag", "name": "test_launch_pad_account_link", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    pub async fn test_launch_pad_account_link() {$/", "language": "Rust", "kind": "function", "signature": "()", "scope": "tests", "scopeKind": "module"}, {"_type": "tag", "name": "test_media_events_account_link", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    pub async fn test_media_events_account_link() {$/", "language": "Rust", "kind": "function", "signature": "()", "scope": "tests", "scopeKind": "module"}, {"_type": "tag", "name": "test_sign_in", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    pub async fn test_sign_in() {$/", "language": "Rust", "kind": "function", "signature": "()", "scope": "tests", "scopeKind": "module"}, {"_type": "tag", "name": "tests", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^pub mod tests {$/", "language": "Rust", "kind": "module"}, {"_type": "tag", "name": "xvp_data_scopes", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    xvp_data_scopes: CloudServiceScopes,$/", "language": "Rust", "kind": "field", "scope": "AppsanityAccountLinkService", "scopeKind": "struct"}, {"_type": "tag", "name": "xvp_playback_base_url", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    xvp_playback_base_url: String,$/", "language": "Rust", "kind": "field", "scope": "XvpServiceUrls", "scopeKind": "struct"}, {"_type": "tag", "name": "xvp_service_urls", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    xvp_service_urls: XvpServiceUrls,$/", "language": "Rust", "kind": "field", "scope": "AppsanityAccountLinkService", "scopeKind": "struct"}, {"_type": "tag", "name": "xvp_video_service_base_url", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "pattern": "/^    xvp_video_service_base_url: String,$/", "language": "Rust", "kind": "field", "scope": "XvpServiceUrls", "scopeKind": "struct"}], "hash": "ab18d3f4c7ba1e9d3366577aa39bbba8", "format-version": 4, "code-base-name": "app-gateway2", "filename": "Supporting_Files/ripple-eos/src/service/appsanity_account_link.rs", "fields": [{"name": "grpc_client_session: Arc<Mutex<GrpcClientSession>>,", "scope": "AppsanityAccountLinkService", "scopeKind": "struct", "description": "unavailable"}, {"name": "supported_link_action: HashMap<String, AccountLinkAction>,", "scope": "AppsanityAccountLinkService", "scopeKind": "struct", "description": "unavailable"}, {"name": "supported_link_types: HashMap<String, AccountLinkType>,", "scope": "AppsanityAccountLinkService", "scopeKind": "struct", "description": "unavailable"}, {"name": "xvp_data_scopes: CloudServiceScopes,", "scope": "AppsanityAccountLinkService", "scopeKind": "struct", "description": "unavailable"}, {"name": "xvp_playback_base_url: String,", "scope": "XvpServiceUrls", "scopeKind": "struct", "description": "unavailable"}, {"name": "xvp_service_urls: XvpServiceUrls,", "scope": "AppsanityAccountLinkService", "scopeKind": "struct", "description": "unavailable"}, {"name": "xvp_video_service_base_url: String,", "scope": "XvpServiceUrls", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"5170": "0f87a35b32215bc8547fb583d6c84bd51f603f69"}]}