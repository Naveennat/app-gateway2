{"is_source_file": true, "format": "JavaScript", "description": "This file contains client-side JavaScript code implementing a WebSocket-based JSON-RPC client, service registration, and service management logic for a web application. It defines classes for JSON-RPC communication, service registration, and a service manager that handles WebSocket connections, message dispatch, and RPC requests.", "external_files": ["websocket", "JavaScript WebSocket API", "Built-in WebSocket browser API"], "external_methods": ["WebSocket", "JSON.stringify", "JSON.parse"], "published": ["JsonRpcClient", "Service", "ServiceManager"], "classes": [{"name": "JsonRpcClient", "description": "Handles JSON-RPC communication over WebSocket, including request sending, response handling, and message reception."}, {"name": "Service", "description": "Represents a service that can register methods and be invoked via JSON-RPC; supports method registration and invocation."}, {"name": "ServiceManager", "description": "Manages multiple services, their WebSocket connections, and RPC calls, including service registration, connection setup, and message routing."}], "methods": [{"name": "open()", "description": "Establishes the WebSocket connection for the JSON-RPC client.", "scope": "JsonRpcClient", "scopeKind": "class"}, {"name": "sendRequest(method_name, method_params, user_data)", "description": "Sends a JSON-RPC request with method name, parameters, and user data, returning a promise that resolves with the response.", "scope": "JsonRpcClient", "scopeKind": "class"}, {"name": "notify(event_data)", "description": "Sends a notification message over WebSocket.", "scope": "Service", "scopeKind": "class"}, {"name": "send(obj)", "description": "Serializes and transmits a message over WebSocket.", "scope": "service", "scopeKind": "function"}, {"name": "_onIncomingMessage(e)", "description": "Internal handler for processing incoming WebSocket messages, resolving promises for matching requests.", "scope": "JsonRpcClient", "scopeKind": "class"}, {"name": "registerMethod(method_name, method_version, method)", "description": "Registers a method with a specific version and name in the service.", "scope": "Service", "scopeKind": "class"}, {"name": "_callMethodByName(method_name, json_rpc_params)", "description": "Invokes a registered method by name with provided JSON-RPC parameters, returning a promise.", "scope": "Service", "scopeKind": "class"}, {"name": "open(conf)", "description": "Initializes a WebSocket connection for the service manager, given configuration.", "scope": "ServiceManager", "scopeKind": "class"}, {"name": "registerService(service)", "description": "Registers a new service and initiates connection and registration procedures.", "scope": "ServiceManager", "scopeKind": "class"}, {"name": "_connectService(service_name)", "description": "Establishes a WebSocket connection for the specified service.", "scope": "ServiceManager", "scopeKind": "class"}, {"name": "_controllerActivateService(service_name)", "description": "Asks the JSON-RPC client to activate a specific service.", "scope": "ServiceManager", "scopeKind": "class"}, {"name": "_sendResponse(soc, res)", "description": "Sends a JSON-RPC response back through WebSocket.", "scope": "ServiceManager", "scopeKind": "class"}, {"name": "_controllerCloneService(service_name)", "description": "Requests cloning of a service via JSON-RPC.", "scope": "ServiceManager", "scopeKind": "class"}, {"name": "AnonymousFunctionf60fc9d40100(e)", "scope": "JsonRpcClient.open", "scopeKind": "function", "description": "unavailable"}, {"name": "AnonymousFunctionf60fc9d40200(e)", "scope": "JsonRpcClient.open", "scopeKind": "function", "description": "unavailable"}, {"name": "AnonymousFunctionf60fc9d40300(e)", "scope": "JsonRpcClient.open", "scopeKind": "function", "description": "unavailable"}, {"name": "_send_event_function()", "scope": "Service.constructor", "scopeKind": "class", "description": "unavailable"}, {"name": "constructor(conf)", "scope": "ServiceManager", "scopeKind": "class", "description": "unavailable"}, {"name": "constructor(name)", "scope": "Service", "scopeKind": "class", "description": "unavailable"}, {"name": "constructor(uri, protocols)", "scope": "JsonRpcClient", "scopeKind": "class", "description": "unavailable"}, {"name": "onmessage(e)", "scope": "service.websocket", "scopeKind": "function", "description": "unavailable"}, {"name": "onopen(e)", "scope": "service.websocket", "scopeKind": "function", "description": "unavailable"}, {"name": "send(message)", "scope": "JsonRpcClient", "scopeKind": "class", "description": "unavailable"}], "calls": ["new WebSocket", "self.send", "self._websocket.send", "self._websocket.onopen", "self._websocket.onerror", "self._websocket.onmessage", "self._json_rpc_client.open", "self._json_rpc_client.sendRequest", "service.service._callMethodByName", "self._sendResponse", "self._controllerActivateService", "self._controllerCloneService"], "search-terms": ["WebBridgeSDK", "JsonRpcClient", "ServiceManager", "WebSocket", "JSON-RPC", "service registration", "WebSocket JSON-RPC client"], "state": 2, "file_id": 6952, "knowledge_revision": 13992, "git_revision": "", "ctags": [{"_type": "tag", "name": "AnonymousFunctionf60fc9d40100", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^      self._websocket.onopen = function(e) {$/", "language": "JavaScript", "kind": "function", "signature": "(e)", "scope": "JsonRpcClient.open", "scopeKind": "function"}, {"_type": "tag", "name": "AnonymousFunctionf60fc9d40200", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^      self._websocket.onerror = function(e) {$/", "language": "JavaScript", "kind": "function", "signature": "(e)", "scope": "JsonRpcClient.open", "scopeKind": "function"}, {"_type": "tag", "name": "AnonymousFunctionf60fc9d40300", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^      self._websocket.onmessage = function(e) {$/", "language": "JavaScript", "kind": "function", "signature": "(e)", "scope": "JsonRpcClient.open", "scopeKind": "function"}, {"_type": "tag", "name": "JsonRpcClient", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^class JsonRpcClient$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "PENDING", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  PENDING: 'pending'$/", "language": "JavaScript", "kind": "property", "scope": "request_state", "scopeKind": "class"}, {"_type": "tag", "name": "Service", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^class Service {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "ServiceManager", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^class ServiceManager {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "_callMethodByName", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  _callMethodByName(method_name, json_rpc_params) {$/", "language": "JavaScript", "kind": "method", "signature": "(method_name, json_rpc_params)", "scope": "Service", "scopeKind": "class"}, {"_type": "tag", "name": "_connectService", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  _connectService(service_name) {$/", "language": "JavaScript", "kind": "method", "signature": "(service_name)", "scope": "ServiceManager", "scopeKind": "class"}, {"_type": "tag", "name": "_controllerActivateService", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  _controllerActivateService(service_name) {$/", "language": "JavaScript", "kind": "method", "signature": "(service_name)", "scope": "ServiceManager", "scopeKind": "class"}, {"_type": "tag", "name": "_controllerCloneService", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  _controllerCloneService(service_name) {$/", "language": "JavaScript", "kind": "method", "signature": "(service_name)", "scope": "ServiceManager", "scopeKind": "class"}, {"_type": "tag", "name": "_onIncomingMessage", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  _onIncomingMessage(e) {$/", "language": "JavaScript", "kind": "method", "signature": "(e)", "scope": "JsonRpcClient", "scopeKind": "class"}, {"_type": "tag", "name": "_sendResponse", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  _sendResponse(soc, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(soc, res)", "scope": "ServiceManager", "scopeKind": "class"}, {"_type": "tag", "name": "_send_event_function", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^    this._send_event_function = function() {};$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "Service.constructor", "scopeKind": "class"}, {"_type": "tag", "name": "_services", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^    self._services[service.service_name] = {$/", "language": "JavaScript", "kind": "class", "scope": "self", "scopeKind": "class"}, {"_type": "tag", "name": "callsign", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^      callsign: \"org.rdk.WebBridge\",$/", "language": "JavaScript", "kind": "property", "scope": "ServiceManager._controllerCloneService.params", "scopeKind": "class"}, {"_type": "tag", "name": "callsign", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^      callsign: service_name$/", "language": "JavaScript", "kind": "property", "scope": "ServiceManager._controllerActivateService.params", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  constructor(conf) {$/", "language": "JavaScript", "kind": "method", "signature": "(conf)", "scope": "ServiceManager", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  constructor(name) {$/", "language": "JavaScript", "kind": "method", "signature": "(name)", "scope": "Service", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  constructor(uri, protocols) {$/", "language": "JavaScript", "kind": "method", "signature": "(uri, protocols)", "scope": "JsonRpcClient", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^      id: request_id,$/", "language": "JavaScript", "kind": "property", "scope": "JsonRpcClient.sendRequest.request_message", "scopeKind": "class"}, {"_type": "tag", "name": "jsonrpc", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^        jsonrpc: \"2.0\",$/", "language": "JavaScript", "kind": "property", "scope": "service.websocket.onopen.params", "scopeKind": "class"}, {"_type": "tag", "name": "jsonrpc", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^      jsonrpc: self._json_rpc_version,$/", "language": "JavaScript", "kind": "property", "scope": "JsonRpcClient.sendRequest.request_message", "scopeKind": "class"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^        method: \"1.registerjsonrpcmethods\",$/", "language": "JavaScript", "kind": "property", "scope": "service.websocket.onopen.params", "scopeKind": "class"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^      method: method_name,$/", "language": "JavaScript", "kind": "property", "scope": "JsonRpcClient.sendRequest.request_message", "scopeKind": "class"}, {"_type": "tag", "name": "newcallsign", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^      newcallsign: service_name$/", "language": "JavaScript", "kind": "property", "scope": "ServiceManager._controllerCloneService.params", "scopeKind": "class"}, {"_type": "tag", "name": "notify", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  notify(event_data) {$/", "language": "JavaScript", "kind": "method", "signature": "(event_data)", "scope": "JsonRpcClient", "scopeKind": "class"}, {"_type": "tag", "name": "notify", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  notify(event_data) {$/", "language": "JavaScript", "kind": "method", "signature": "(event_data)", "scope": "Service", "scopeKind": "class"}, {"_type": "tag", "name": "onmessage", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^    service.websocket.onmessage = function(e) {$/", "language": "JavaScript", "kind": "function", "signature": "(e)", "scope": "service.websocket", "scopeKind": "function"}, {"_type": "tag", "name": "onopen", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^    service.websocket.onopen = function(e) {$/", "language": "JavaScript", "kind": "function", "signature": "(e)", "scope": "service.websocket", "scopeKind": "function"}, {"_type": "tag", "name": "open", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  open() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "JsonRpcClient", "scopeKind": "class"}, {"_type": "tag", "name": "open", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  open(conf) {$/", "language": "JavaScript", "kind": "method", "signature": "(conf)", "scope": "ServiceManager", "scopeKind": "class"}, {"_type": "tag", "name": "params", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^        params: method_list$/", "language": "JavaScript", "kind": "property", "scope": "service.websocket.onopen.params", "scopeKind": "class"}, {"_type": "tag", "name": "params", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^      const params = {$/", "language": "JavaScript", "kind": "class", "scope": "service.websocket.onopen", "scopeKind": "class"}, {"_type": "tag", "name": "params", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^      params: method_params$/", "language": "JavaScript", "kind": "property", "scope": "JsonRpcClient.sendRequest.request_message", "scopeKind": "class"}, {"_type": "tag", "name": "params", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^    const params = {$/", "language": "JavaScript", "kind": "class", "scope": "ServiceManager._controllerActivateService", "scopeKind": "class"}, {"_type": "tag", "name": "params", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^    const params = {$/", "language": "JavaScript", "kind": "class", "scope": "ServiceManager._controllerCloneService", "scopeKind": "class"}, {"_type": "tag", "name": "registerMethod", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  registerMethod(method_name, method_version, method) {$/", "language": "JavaScript", "kind": "method", "signature": "(method_name, method_version, method)", "scope": "Service", "scopeKind": "class"}, {"_type": "tag", "name": "registerService", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  registerService(service) {$/", "language": "JavaScript", "kind": "method", "signature": "(service)", "scope": "ServiceManager", "scopeKind": "class"}, {"_type": "tag", "name": "request_message", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^    const request_message = {$/", "language": "JavaScript", "kind": "class", "scope": "JsonRpcClient.sendRequest", "scopeKind": "class"}, {"_type": "tag", "name": "request_state", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^const request_state = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "send", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^      send: null$/", "language": "JavaScript", "kind": "property", "scope": "self._services", "scopeKind": "class"}, {"_type": "tag", "name": "send", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^    service.send = function(obj) {$/", "language": "JavaScript", "kind": "function", "signature": "(obj)", "scope": "service", "scopeKind": "function"}, {"_type": "tag", "name": "send", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  send(message) {$/", "language": "JavaScript", "kind": "method", "signature": "(message)", "scope": "JsonRpcClient", "scopeKind": "class"}, {"_type": "tag", "name": "sendRequest", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^  sendRequest(method_name, method_params, user_data) {$/", "language": "JavaScript", "kind": "method", "signature": "(method_name, method_params, user_data)", "scope": "JsonRpcClient", "scopeKind": "class"}, {"_type": "tag", "name": "service", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^      service: service,$/", "language": "JavaScript", "kind": "property", "scope": "self._services", "scopeKind": "class"}, {"_type": "tag", "name": "websocket", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "pattern": "/^      websocket: null,$/", "language": "JavaScript", "kind": "property", "scope": "self._services", "scopeKind": "class"}], "hash": "fdd8c4581fbdb9e39204e7a7e88dbcf2", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/WebBridge/js/WebBridgeSDK.js", "fields": [{"name": "PENDING: 'pending'", "scope": "request_state", "scopeKind": "class", "description": "unavailable"}, {"name": "callsign: \"org.rdk.WebBridge\",", "scope": "ServiceManager._controllerCloneService.params", "scopeKind": "class", "description": "unavailable"}, {"name": "callsign: service_name", "scope": "ServiceManager._controllerActivateService.params", "scopeKind": "class", "description": "unavailable"}, {"name": "id: request_id,", "scope": "JsonRpcClient.sendRequest.request_message", "scopeKind": "class", "description": "unavailable"}, {"name": "jsonrpc: \"2.0\",", "scope": "service.websocket.onopen.params", "scopeKind": "class", "description": "unavailable"}, {"name": "jsonrpc: self._json_rpc_version,", "scope": "JsonRpcClient.sendRequest.request_message", "scopeKind": "class", "description": "unavailable"}, {"name": "method: \"1.registerjsonrpcmethods\",", "scope": "service.websocket.onopen.params", "scopeKind": "class", "description": "unavailable"}, {"name": "method: method_name,", "scope": "JsonRpcClient.sendRequest.request_message", "scopeKind": "class", "description": "unavailable"}, {"name": "newcallsign: service_name", "scope": "ServiceManager._controllerCloneService.params", "scopeKind": "class", "description": "unavailable"}, {"name": "params: method_list", "scope": "service.websocket.onopen.params", "scopeKind": "class", "description": "unavailable"}, {"name": "params: method_params", "scope": "JsonRpcClient.sendRequest.request_message", "scopeKind": "class", "description": "unavailable"}, {"name": "send: null", "scope": "self._services", "scopeKind": "class", "description": "unavailable"}, {"name": "service: service,", "scope": "self._services", "scopeKind": "class", "description": "unavailable"}, {"name": "websocket: null,", "scope": "self._services", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"13992": ""}]}