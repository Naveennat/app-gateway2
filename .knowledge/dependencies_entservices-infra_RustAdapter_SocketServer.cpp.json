{"is_source_file": true, "format": "C++", "description": "This file implements a socket server class with methods for setting up a TCP socket, accepting clients, reading responses, and sending commands related to invoke, attach, and exit operations. It includes socket configuration, thread management, and data handling for socket communication, specific to a 'SocketServer' class used likely in IPC or network communication within a larger project.", "external_files": ["SocketServer.h", "Logger.h"], "external_methods": ["LOGERR", "LOGDBG"], "published": ["SocketServer::Open", "SocketServer::RunThread", "SocketServer::Close", "SocketServer::GetAddress", "SocketServer::GetPort", "SocketServer::SendInvoke", "SocketServer::SendAttach", "SocketServer::SendExit", "SocketServer::ReadResponse"], "classes": [{"name": "Response", "description": "A class representing a response with a channel ID and JSON payload."}, {"name": "SocketServer", "description": "A class implementing a TCP socket server with capabilities to accept connections, read responses, and send specific commands."}], "methods": [{"name": "SocketServer::Open", "description": "Initializes and starts listening on a specified IP address and port, setting up a callback for handling responses."}, {"name": "SocketServer::RunThread", "description": "Creates and runs the server's main loop in a separate thread."}, {"name": "SocketServer::Close", "description": "Closes the server and client sockets, stopping the server loop."}, {"name": "SocketServer::GetAddress", "description": "Returns the IP address the server is listening on."}, {"name": "SocketServer::GetPort", "description": "Returns the port number on which the server is listening."}, {"name": "SocketServer::SendInvoke", "description": "Sends an invoke command with a channel ID, token, and JSON payload to the client."}, {"name": "SocketServer::SendAttach", "description": "Sends an attach command with channel ID and attach flag."}, {"name": "SocketServer::SendExit", "description": "Sends an exit command to terminate the client connection."}, {"name": "SocketServer::ReadResponse", "description": "Reads a response from the client, extracting channel ID and JSON payload."}, {"name": "void Close()", "scope": "SocketServer", "scopeKind": "class", "description": "unavailable"}, {"name": "string GetAddress() const", "scope": "SocketServer", "scopeKind": "class", "description": "unavailable"}, {"name": "int GetPort() const", "scope": "SocketServer", "scopeKind": "class", "description": "unavailable"}, {"name": "int Open(const string & address,int port,const function<void (const Response &)> & reader)", "scope": "SocketServer", "scopeKind": "class", "description": "unavailable"}, {"name": "int ReadExact(uint8_t * p,int len)", "scope": "SocketServer", "scopeKind": "class", "description": "unavailable"}, {"name": "int ReadResponse(Response & rsp)", "scope": "SocketServer", "scopeKind": "class", "description": "unavailable"}, {"name": "Response()", "scope": "Response", "scopeKind": "class", "description": "unavailable"}, {"name": "Response(uint32_t channel,const string & json_str)", "scope": "Response", "scopeKind": "class", "description": "unavailable"}, {"name": "int Run()", "scope": "SocketServer", "scopeKind": "class", "description": "unavailable"}, {"name": "int RunThread()", "scope": "SocketServer", "scopeKind": "class", "description": "unavailable"}, {"name": "void * RunThreadFunc(void * arg)", "scope": "SocketServer", "scopeKind": "class", "description": "unavailable"}, {"name": "int SendAttach(uint32_t channel_id,bool attach)", "scope": "SocketServer", "scopeKind": "class", "description": "unavailable"}, {"name": "int SendExit()", "scope": "SocketServer", "scopeKind": "class", "description": "unavailable"}, {"name": "int SendInvoke(uint32_t channel_id,const string & token,const string & json)", "scope": "SocketServer", "scopeKind": "class", "description": "unavailable"}, {"name": "SocketServer()", "scope": "SocketServer", "scopeKind": "class", "description": "unavailable"}, {"name": "~SocketServer()", "scope": "SocketServer", "scopeKind": "class", "description": "unavailable"}], "calls": ["socket", "bind", "listen", "accept", "read", "send", "close", "fcntl", "inet_pton", "getsockname", "select", "pthread_create", "malloc", "free", "ntohl", "htonl"], "search-terms": ["SocketServer", "SendInvoke", "SendAttach", "SendExit", "ReadResponse", "ResponseHeader", "CommandID", "socket", "network"], "state": 2, "file_id": 881, "knowledge_revision": 1999, "git_revision": "", "ctags": [{"_type": "tag", "name": "AttachHeader", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^struct AttachHeader$/", "file": true, "language": "C++", "kind": "struct"}, {"_type": "tag", "name": "CLIENT_DISCONNECT", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^#define CLIENT_DISCONNECT /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "Close", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^void SocketServer::Close()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "SocketServer", "scopeKind": "class"}, {"_type": "tag", "name": "CommandID", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^enum CommandID$/", "file": true, "language": "C++", "kind": "enum"}, {"_type": "tag", "name": "GetAddress", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^string SocketServer::GetAddress() const$/", "language": "C++", "typeref": "typename:string", "kind": "function", "signature": "() const", "scope": "SocketServer", "scopeKind": "class"}, {"_type": "tag", "name": "GetPort", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^int SocketServer::GetPort() const$/", "language": "C++", "typeref": "typename:int", "kind": "function", "signature": "() const", "scope": "SocketServer", "scopeKind": "class"}, {"_type": "tag", "name": "ID_ATTACH", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^  ID_ATTACH,$/", "file": true, "language": "C++", "kind": "enumerator", "scope": "CommandID", "scopeKind": "enum"}, {"_type": "tag", "name": "ID_EXIT", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^  ID_EXIT$/", "file": true, "language": "C++", "kind": "enumerator", "scope": "CommandID", "scopeKind": "enum"}, {"_type": "tag", "name": "ID_INVOKE", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^  ID_INVOKE = 1,$/", "file": true, "language": "C++", "kind": "enumerator", "scope": "CommandID", "scopeKind": "enum"}, {"_type": "tag", "name": "InvoketHeader", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^struct InvoketHeader$/", "file": true, "language": "C++", "kind": "struct"}, {"_type": "tag", "name": "Open", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^int SocketServer::Open(const string& address, int port, const function<void (const Response&)>& /", "language": "C++", "typeref": "typename:int", "kind": "function", "signature": "(const string & address,int port,const function<void (const Response &)> & reader)", "scope": "SocketServer", "scopeKind": "class"}, {"_type": "tag", "name": "ReadExact", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^int SocketServer::ReadExact(uint8_t* p, int len)$/", "language": "C++", "typeref": "typename:int", "kind": "function", "signature": "(uint8_t * p,int len)", "scope": "SocketServer", "scopeKind": "class"}, {"_type": "tag", "name": "ReadResponse", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^int SocketServer::ReadResponse(Response& rsp)$/", "language": "C++", "typeref": "typename:int", "kind": "function", "signature": "(Response & rsp)", "scope": "SocketServer", "scopeKind": "class"}, {"_type": "tag", "name": "Response", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^Response::Response()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "Response", "scopeKind": "class"}, {"_type": "tag", "name": "Response", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^Response::Response(uint32_t channel, const string& json_str)$/", "language": "C++", "kind": "function", "signature": "(uint32_t channel,const string & json_str)", "scope": "Response", "scopeKind": "class"}, {"_type": "tag", "name": "ResponseHeader", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^struct ResponseHeader$/", "file": true, "language": "C++", "kind": "struct"}, {"_type": "tag", "name": "Run", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^int SocketServer::Run()$/", "language": "C++", "typeref": "typename:int", "kind": "function", "signature": "()", "scope": "SocketServer", "scopeKind": "class"}, {"_type": "tag", "name": "RunThread", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^int SocketServer::RunThread()$/", "language": "C++", "typeref": "typename:int", "kind": "function", "signature": "()", "scope": "SocketServer", "scopeKind": "class"}, {"_type": "tag", "name": "RunThreadFunc", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^void* SocketServer::RunThreadFunc(void* arg)$/", "language": "C++", "typeref": "typename:void *", "kind": "function", "signature": "(void * arg)", "scope": "SocketServer", "scopeKind": "class"}, {"_type": "tag", "name": "SendAttach", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^int SocketServer::SendAttach(uint32_t channel_id, bool attach)$/", "language": "C++", "typeref": "typename:int", "kind": "function", "signature": "(uint32_t channel_id,bool attach)", "scope": "SocketServer", "scopeKind": "class"}, {"_type": "tag", "name": "SendExit", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^int SocketServer::SendExit()$/", "language": "C++", "typeref": "typename:int", "kind": "function", "signature": "()", "scope": "SocketServer", "scopeKind": "class"}, {"_type": "tag", "name": "SendInvoke", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^int SocketServer::SendInvoke(uint32_t channel_id, const string& token, const string& json)$/", "language": "C++", "typeref": "typename:int", "kind": "function", "signature": "(uint32_t channel_id,const string & token,const string & json)", "scope": "SocketServer", "scopeKind": "class"}, {"_type": "tag", "name": "SocketServer", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^SocketServer::SocketServer()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "SocketServer", "scopeKind": "class"}, {"_type": "tag", "name": "attach", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^  uint8_t attach;$/", "file": true, "language": "C++", "typeref": "typename:uint8_t", "kind": "member", "scope": "AttachHeader", "scopeKind": "struct"}, {"_type": "tag", "name": "channel_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^  uint32_t channel_id;$/", "file": true, "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "AttachHeader", "scopeKind": "struct"}, {"_type": "tag", "name": "channel_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^  uint32_t channel_id;$/", "file": true, "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "InvoketHeader", "scopeKind": "struct"}, {"_type": "tag", "name": "channel_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^  uint32_t channel_id;$/", "file": true, "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "ResponseHeader", "scopeKind": "struct"}, {"_type": "tag", "name": "command_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^  uint32_t command_id;$/", "file": true, "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "AttachHeader", "scopeKind": "struct"}, {"_type": "tag", "name": "command_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^  uint32_t command_id;$/", "file": true, "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "InvoketHeader", "scopeKind": "struct"}, {"_type": "tag", "name": "json_len", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^  uint32_t json_len;$/", "file": true, "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "InvoketHeader", "scopeKind": "struct"}, {"_type": "tag", "name": "json_len", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^  uint32_t json_len;$/", "file": true, "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "ResponseHeader", "scopeKind": "struct"}, {"_type": "tag", "name": "token_len", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^  uint32_t token_len;$/", "file": true, "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "InvoketHeader", "scopeKind": "struct"}, {"_type": "tag", "name": "~SocketServer", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "pattern": "/^SocketServer::~SocketServer()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "SocketServer", "scopeKind": "class"}], "hash": "28000ea232639c13c36001317fbde1dd", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/RustAdapter/SocketServer.cpp", "fields": [{"name": "uint8_t attach", "scope": "AttachHeader", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint32_t channel_id", "scope": "AttachHeader", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint32_t command_id", "scope": "AttachHeader", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint32_t json_len", "scope": "InvoketHeader", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint32_t token_len", "scope": "InvoketHeader", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"1999": ""}]}