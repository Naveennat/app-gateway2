{"is_source_file": true, "format": "C++ header", "description": "This file defines the MetricsDelegate class responsible for sending metrics and analytics events via an external Analytics interface. It includes methods for various event types such as user actions, app actions, page views, and errors, and constructs JSON payloads accordingly. It interacts with the WPEFramework::Exchange::IAnalytics interface to dispatch events.", "external_files": ["<core/JSON.h>", "<plugins/plugins.h>", "<interfaces/IAnalytics.h>", "UtilsCallsign.h", "UtilsLogging.h", "StringUtils.h"], "external_methods": ["WPEFramework::Exchange::IAnalytics::SendEvent"], "published": ["MetricsDelegate"], "classes": [{"name": "MetricsDelegate", "description": "Delegate class that handles sending metrics and analytics events through the Analytics bridge, including various specific metrics events such as user actions, errors, and page views."}], "methods": [{"name": "Core::hresult MetricsHandler(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args) const", "description": "Handles generic in-app metrics/events with optional segment and appId.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult LaunchCompleted(const std::vector<ParamKV> & args) const", "description": "Reports a launch completed event.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult UserAction(const std::string & action,const std::vector<ParamKV> & args) const", "description": "Reports a user action event with specified action string.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult AppAction(const std::string & action,const std::vector<ParamKV> & args) const", "description": "Reports an application-specific action event.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult PageView(const std::string & page,const std::vector<ParamKV> & args) const", "description": "Reports a page view event.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult UserError(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "description": "Reports a user error event with message, code, and visibility.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult Error(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "description": "Reports an application error event.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult SendViaAnalytics(const std::string & eventName,const JsonObject & eventPayload) const", "description": "Constructs and sends the event payload via the IAnalytics interface.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult AppAction(const std::string & action,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "void ArgsToParametersObject(const std::vector<ParamKV> & src,JsonObject & out)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult Error(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult LaunchCompleted(const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "MetricsDelegate(PluginHost::IShell * shell)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult MetricsHandler(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult PageView(const std::string & page,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "ParamKV(const std::string & n,const Core::JSON::Variant & v)", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::hresult SendViaAnalytics(const std::string & eventName,const JsonObject & eventPayload,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult UserAction(const std::string & action,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult UserError(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "bool ValidateActionType(const std::string & s)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "JsonValue VariantToJsonValue(const Core::JSON::Variant & v)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}], "calls": ["WPEFramework::Exchange::IAnalytics::SendEvent", "Core::JSON::JsonObject::ToString", "JsonObject::Set", "VariantToJsonValue"], "search-terms": ["MetricsDelegate", "SendEvent", "Analytics", "MetricsHandler", "UserAction", "AppAction", "PageView", "UserError", "Error", "InAppMetrics"], "state": 2, "file_id": 5742, "knowledge_revision": 16311, "git_revision": "85d1005aa39b7b006ea9a297dcd838ca4b000cf1", "revision_history": [{"11375": ""}, {"11398": "367ec437074d4af87cc310d5f9ac2f9eb265a7f2"}, {"12167": "f28018468ba067a40f416649bf901f0bc860aa4c"}, {"16303": "9da80fcdb400764b793a89f634d8795ccc815d0d"}, {"16311": "85d1005aa39b7b006ea9a297dcd838ca4b000cf1"}], "ctags": [{"_type": "tag", "name": "AppAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult AppAction(const std::string& action, const std::vector<ParamKV>& args) con/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "AppAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult AppAction(const std::string& action, const std::vector<ParamKV>& args, con/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "ArgsToParametersObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        static inline void ArgsToParametersObject(const std::vector<ParamKV>& src, JsonObject& o/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const std::vector<ParamKV> & src,JsonObject & out)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult Error(const std::string& message, bool visible, const std::string& code,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult Error(const std::string& message, bool visible, const std::string& code,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "LaunchCompleted", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult LaunchCompleted(const std::vector<ParamKV>& args) const {$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "LaunchCompleted", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult LaunchCompleted(const std::vector<ParamKV>& args, const std::string& appId/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "MetricsDelegate", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        explicit MetricsDelegate(PluginHost::IShell* shell)$/", "language": "C++", "kind": "function", "signature": "(PluginHost::IShell * shell)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "MetricsDelegate", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    class MetricsDelegate {$/", "language": "C++", "kind": "class", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "MetricsHandler", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult MetricsHandler(const Core::OptionalType<std::string>& segment,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "MetricsHandler", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult MetricsHandler(const Core::OptionalType<std::string>& segment,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "PageView", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult PageView(const std::string& page, const std::vector<ParamKV>& args) const /", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & page,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "PageView", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult PageView(const std::string& page, const std::vector<ParamKV>& args, const /", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & page,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "ParamKV", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^            ParamKV(const std::string& n, const Core::JSON::Variant& v) : name(n), value(v) {}$/", "language": "C++", "kind": "function", "signature": "(const std::string & n,const Core::JSON::Variant & v)", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct"}, {"_type": "tag", "name": "ParamKV", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        struct ParamKV {$/", "language": "C++", "kind": "struct", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "SendViaAnalytics", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult SendViaAnalytics(const std::string& eventName, const JsonObject& eventPayl/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & eventName,const JsonObject & eventPayload) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "SendViaAnalytics", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult SendViaAnalytics(const std::string& eventName, const JsonObject& eventPayl/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & eventName,const JsonObject & eventPayload,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult UserAction(const std::string& action, const std::vector<ParamKV>& args) co/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult UserAction(const std::string& action, const std::vector<ParamKV>& args, co/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserError", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult UserError(const std::string& message, bool visible, const std::string& cod/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserError", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult UserError(const std::string& message, bool visible, const std::string& cod/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "ValidateActionType", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        static inline bool ValidateActionType(const std::string& s) {$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & s)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "VariantToJsonValue", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        static inline JsonValue VariantToJsonValue(const Core::JSON::Variant& v) {$/", "language": "C++", "typeref": "typename:JsonValue", "kind": "function", "signature": "(const Core::JSON::Variant & v)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^namespace WPEFramework {$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "_shell", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        PluginHost::IShell* _shell;$/", "language": "C++", "typeref": "typename:PluginHost::IShell *", "kind": "member", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "mAdminLock", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        mutable Core::CriticalSection mAdminLock;$/", "language": "C++", "typeref": "typename:Core::CriticalSection", "kind": "member", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^            std::string name;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^            Core::JSON::Variant value;$/", "language": "C++", "typeref": "typename:Core::JSON::Variant", "kind": "member", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct"}], "hash": "7c912239a3f6ad90961b56919ff2a2ae", "format-version": 4, "code-base-name": "app-gateway2", "filename": "app-gateway/Badger/Delegate/MetricsDelegate.h", "fields": [{"name": "PluginHost::IShell * _shell", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::CriticalSection mAdminLock", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string name", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::JSON::Variant value", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct", "description": "unavailable"}]}