{"is_source_file": true, "format": "C++ header file", "description": "This file defines the MetricsDelegate class that provides a set of methods to send various types of metrics and events (such as user actions, app actions, page views, errors, and launch completion) through an analytics bridge in a software project. It is a header-only implementation with dependencies on core/JSON, plugin interfaces, and utility headers, and is designed to be used within the WPEFramework namespace. The class encapsulates payload creation, validation, and dispatch logic for metrics reporting.", "external_files": ["<core/JSON.h>", "<plugins/plugins.h>", "<interfaces/IAnalytics.h>", "UtilsCallsign.h", "UtilsLogging.h", "StringUtils.h"], "external_methods": ["Core::JSON::Variant::IsString", "Core::JSON::Variant::IsNumber", "Core::JSON::Variant::IsBoolean", "Core::JSON::Variant::IsNull", "Core::JSON::Variant::Object", "Core::JSON::Variant::Array", "Core::JSON::Object::FromString", "Core::JSON::Object::ToString", "Core::CriticalSection::Lock", "Core::CriticalSection::Unlock", "WPEFramework::Exchange::IAnalytics::SendEvent", "WPEFramework::RPC::StringIterator"], "published": ["WPEFramework::MetricsDelegate"], "classes": [{"name": "MetricsDelegate", "description": "A class responsible for constructing and sending metric events to an analytics backend, supporting various event types such as user actions, app actions, page views, errors, and launch completion."}], "methods": [{"name": "Core::hresult MetricsHandler(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args) const", "description": "Handles generic in-app metrics events with optional segment and app ID.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult LaunchCompleted(const std::vector<ParamKV> & args) const", "description": "Sends a launch completed event, optionally with extra arguments and app ID.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult UserAction(const std::string & action,const std::vector<ParamKV> & args) const", "description": "Sends a user action event, with optional app ID.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult AppAction(const std::string & action,const std::vector<ParamKV> & args) const", "description": "Sends an app action event, with optional app ID.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult PageView(const std::string & page,const std::vector<ParamKV> & args) const", "description": "Sends a page view event with a page ID and optional arguments and app ID.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult UserError(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "description": "Reports a user error with details, visibility, code, message, and optional app ID.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult Error(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "description": "Reports an application error with details, visibility, code, message, and optional app ID.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult SendViaAnalytics(const std::string & eventName,const JsonObject & eventPayload) const", "description": "Constructs and sends a metric event to the analytics interface using the provided payload and app ID.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult AppAction(const std::string & action,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "void ArgsToParametersObject(const std::vector<ParamKV> & src,JsonObject & out)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult Error(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult LaunchCompleted(const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "MetricsDelegate(PluginHost::IShell * shell)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult MetricsHandler(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult PageView(const std::string & page,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "ParamKV(const std::string & n,const Core::JSON::Variant & v)", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::hresult SendViaAnalytics(const std::string & eventName,const JsonObject & eventPayload,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult UserAction(const std::string & action,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult UserError(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "bool ValidateActionType(const std::string & s)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "JsonValue VariantToJsonValue(const Core::JSON::Variant & v)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}], "calls": ["SendViaAnalytics", "ArgsToParametersObject", "VariantToJsonValue", "ValidateActionType", "analyticsInterface->SendEvent"], "search-terms": ["MetricsDelegate", "sendEvent", "analytics", "app metrics", "user actions", "page view", "error reporting", "launch completed"], "state": 2, "file_id": 5742, "knowledge_revision": 12167, "git_revision": "f28018468ba067a40f416649bf901f0bc860aa4c", "revision_history": [{"11375": ""}, {"11398": "367ec437074d4af87cc310d5f9ac2f9eb265a7f2"}, {"12167": "f28018468ba067a40f416649bf901f0bc860aa4c"}], "ctags": [{"_type": "tag", "name": "AppAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult AppAction(const std::string& action, const std::vector<ParamKV>& args) con/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "AppAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult AppAction(const std::string& action, const std::vector<ParamKV>& args, con/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "ArgsToParametersObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        static inline void ArgsToParametersObject(const std::vector<ParamKV>& src, JsonObject& o/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const std::vector<ParamKV> & src,JsonObject & out)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult Error(const std::string& message, bool visible, const std::string& code,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult Error(const std::string& message, bool visible, const std::string& code,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "LaunchCompleted", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult LaunchCompleted(const std::vector<ParamKV>& args) const {$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "LaunchCompleted", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult LaunchCompleted(const std::vector<ParamKV>& args, const std::string& appId/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "MetricsDelegate", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        explicit MetricsDelegate(PluginHost::IShell* shell)$/", "language": "C++", "kind": "function", "signature": "(PluginHost::IShell * shell)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "MetricsDelegate", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    class MetricsDelegate {$/", "language": "C++", "kind": "class", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "MetricsHandler", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult MetricsHandler(const Core::OptionalType<std::string>& segment,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "MetricsHandler", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult MetricsHandler(const Core::OptionalType<std::string>& segment,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "PageView", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult PageView(const std::string& page, const std::vector<ParamKV>& args) const /", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & page,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "PageView", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult PageView(const std::string& page, const std::vector<ParamKV>& args, const /", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & page,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "ParamKV", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^            ParamKV(const std::string& n, const Core::JSON::Variant& v) : name(n), value(v) {}$/", "language": "C++", "kind": "function", "signature": "(const std::string & n,const Core::JSON::Variant & v)", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct"}, {"_type": "tag", "name": "ParamKV", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        struct ParamKV {$/", "language": "C++", "kind": "struct", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "SendViaAnalytics", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult SendViaAnalytics(const std::string& eventName, const JsonObject& eventPayl/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & eventName,const JsonObject & eventPayload) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "SendViaAnalytics", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult SendViaAnalytics(const std::string& eventName, const JsonObject& eventPayl/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & eventName,const JsonObject & eventPayload,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult UserAction(const std::string& action, const std::vector<ParamKV>& args) co/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult UserAction(const std::string& action, const std::vector<ParamKV>& args, co/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserError", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult UserError(const std::string& message, bool visible, const std::string& cod/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserError", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult UserError(const std::string& message, bool visible, const std::string& cod/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "ValidateActionType", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        static inline bool ValidateActionType(const std::string& s) {$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & s)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "VariantToJsonValue", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        static inline JsonValue VariantToJsonValue(const Core::JSON::Variant& v) {$/", "language": "C++", "typeref": "typename:JsonValue", "kind": "function", "signature": "(const Core::JSON::Variant & v)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^namespace WPEFramework {$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "_shell", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        PluginHost::IShell* _shell;$/", "language": "C++", "typeref": "typename:PluginHost::IShell *", "kind": "member", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "mAdminLock", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        mutable Core::CriticalSection mAdminLock;$/", "language": "C++", "typeref": "typename:Core::CriticalSection", "kind": "member", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^            std::string name;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^            Core::JSON::Variant value;$/", "language": "C++", "typeref": "typename:Core::JSON::Variant", "kind": "member", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct"}], "hash": "16122d761ffb5b73244e1d7e20f6338e", "format-version": 4, "code-base-name": "app-gateway2", "filename": "app-gateway/Badger/Delegate/MetricsDelegate.h", "fields": [{"name": "PluginHost::IShell * _shell", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::CriticalSection mAdminLock", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string name", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::JSON::Variant value", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct", "description": "unavailable"}]}