{"is_source_file": true, "format": "C++ header", "description": "This file defines the MetricsDelegate class, which provides an interface for sending various types of metrics and events to an analytics system within a larger software project. The class includes methods for user actions, app actions, page views, errors, and custom metrics, packaging data into JSON payloads and dispatching them via an analytics interface. It is header-only and relies on external interfaces like IAnalytics and JSON utilities.", "external_files": ["<core/JSON.h>", "<plugins/plugins.h>", "<interfaces/IAnalytics.h>", "UtilsCallsign.h", "UtilsLogging.h", "StringUtils.h"], "external_methods": ["Core::JSON::Variant::Content()", "Core::JSON::Variant::String()", "Core::JSON::Variant::Boolean()", "Core::JSON::Variant::Number()", "Core::JSON::Variant::Float()", "Core::JSON::Variant::Double()", "Core::JSON::Variant::Object()", "Core::JSON::Variant::Array()", "Core::JSON::Variant::operator=(", "Core::JSON::Object::Clear()", "Core::JSON::Object::operator[]", "Core::JSON::Object::ToString()", "Core::CriticalSection::CriticalSection()", "Core::CriticalSection::Lock()", "Core::CriticalSection::Unlock()", "WPEFramework::Exchange::IAnalytics::SendEvent()", "WPEFramework::Exchange::IAnalytics::Release()", "WPEFramework::RPC::StringIterator::Create()", "WPEFramework::Core::Service::Create()", "Core::hresult"], "published": ["WPEFramework::MetricsDelegate"], "classes": [{"name": "MetricsDelegate", "description": "A class that handles sending metrics and event data to an analytics system, providing methods for different event types such as user actions, app actions, page views, and errors. It constructs JSON payloads, validates input, and communicates with the IAnalytics interface through a provided shell dependency."}], "methods": [{"name": "Core::hresult MetricsHandler(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args) const", "description": "Sends a generic in-app action event with optional segment and application ID, assembling a payload with category, type, and parameters.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult LaunchCompleted(const std::vector<ParamKV> & args) const", "description": "Reports a launch completed event with optional parameters and application ID.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult UserAction(const std::string & action,const std::vector<ParamKV> & args) const", "description": "Logs a user action event with action type, optional parameters, and application ID.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult AppAction(const std::string & action,const std::vector<ParamKV> & args) const", "description": "Logs an app-specific action with action name, parameters, and optional application ID.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult PageView(const std::string & page,const std::vector<ParamKV> & args) const", "description": "Reports a page view event with page ID, optional parameters, and optional application ID.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult UserError(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "description": "Logs a user-related error with description, visibility, code, parameters, and optional application ID.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult Error(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "description": "Logs a generic application error with description, visibility, code, parameters, and optional application ID.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "bool ValidateActionType(const std::string & s)", "description": "Checks if an action string's length is within the acceptable range (1-256).", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "void ArgsToParametersObject(const std::vector<ParamKV> & src,JsonObject & out)", "description": "Converts a vector of key-value pairs into a JSON object suitable for payload inclusion.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "JsonValue VariantToJsonValue(const Core::JSON::Variant & v)", "description": "Converts a Core::JSON::Variant into a JSON value compatible with the payload.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult SendViaAnalytics(const std::string & eventName,const JsonObject & eventPayload) const", "description": "Dispatches the constructed event payload via the IAnalytics interface, using the shell dependency. Also includes an overload for default appId.", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult AppAction(const std::string & action,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult Error(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult LaunchCompleted(const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "MetricsDelegate(PluginHost::IShell * shell)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult MetricsHandler(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult PageView(const std::string & page,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "ParamKV(const std::string & n,const Core::JSON::Variant & v)", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::hresult SendViaAnalytics(const std::string & eventName,const JsonObject & eventPayload,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult UserAction(const std::string & action,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult UserError(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}], "calls": ["analyticsInterface->SendEvent()", "payloadStr.ToString()", "cetList->Release()", "WPEFramework::Exchange::IAnalytics::SendEvent()", "Core::JSON::Object::ToString()", "Core::CriticalSection::Lock()", "Core::CriticalSection::Unlock()"], "search-terms": ["MetricsDelegate", "Analytics", "SendEvent", "AppAction", "UserAction", "PageView", "Errors", "LaunchCompleted", "Parameters", "Payload"], "state": 2, "file_id": 5742, "knowledge_revision": 16303, "git_revision": "9da80fcdb400764b793a89f634d8795ccc815d0d", "revision_history": [{"11375": ""}, {"11398": "367ec437074d4af87cc310d5f9ac2f9eb265a7f2"}, {"12167": "f28018468ba067a40f416649bf901f0bc860aa4c"}, {"16303": "9da80fcdb400764b793a89f634d8795ccc815d0d"}], "ctags": [{"_type": "tag", "name": "AppAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult AppAction(const std::string& action, const std::vector<ParamKV>& args) con/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "AppAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult AppAction(const std::string& action, const std::vector<ParamKV>& args, con/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "ArgsToParametersObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        static inline void ArgsToParametersObject(const std::vector<ParamKV>& src, JsonObject& o/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const std::vector<ParamKV> & src,JsonObject & out)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult Error(const std::string& message, bool visible, const std::string& code,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult Error(const std::string& message, bool visible, const std::string& code,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "LaunchCompleted", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult LaunchCompleted(const std::vector<ParamKV>& args) const {$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "LaunchCompleted", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult LaunchCompleted(const std::vector<ParamKV>& args, const std::string& appId/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "MetricsDelegate", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        explicit MetricsDelegate(PluginHost::IShell* shell)$/", "language": "C++", "kind": "function", "signature": "(PluginHost::IShell * shell)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "MetricsDelegate", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    class MetricsDelegate {$/", "language": "C++", "kind": "class", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "MetricsHandler", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult MetricsHandler(const Core::OptionalType<std::string>& segment,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "MetricsHandler", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult MetricsHandler(const Core::OptionalType<std::string>& segment,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "PageView", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult PageView(const std::string& page, const std::vector<ParamKV>& args) const /", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & page,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "PageView", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult PageView(const std::string& page, const std::vector<ParamKV>& args, const /", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & page,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "ParamKV", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^            ParamKV(const std::string& n, const Core::JSON::Variant& v) : name(n), value(v) {}$/", "language": "C++", "kind": "function", "signature": "(const std::string & n,const Core::JSON::Variant & v)", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct"}, {"_type": "tag", "name": "ParamKV", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        struct ParamKV {$/", "language": "C++", "kind": "struct", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "SendViaAnalytics", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult SendViaAnalytics(const std::string& eventName, const JsonObject& eventPayl/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & eventName,const JsonObject & eventPayload) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "SendViaAnalytics", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult SendViaAnalytics(const std::string& eventName, const JsonObject& eventPayl/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & eventName,const JsonObject & eventPayload,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult UserAction(const std::string& action, const std::vector<ParamKV>& args) co/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult UserAction(const std::string& action, const std::vector<ParamKV>& args, co/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserError", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult UserError(const std::string& message, bool visible, const std::string& cod/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserError", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        Core::hresult UserError(const std::string& message, bool visible, const std::string& cod/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "ValidateActionType", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        static inline bool ValidateActionType(const std::string& s) {$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & s)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "VariantToJsonValue", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        static inline JsonValue VariantToJsonValue(const Core::JSON::Variant& v) {$/", "language": "C++", "typeref": "typename:JsonValue", "kind": "function", "signature": "(const Core::JSON::Variant & v)", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^namespace WPEFramework {$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "_shell", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        PluginHost::IShell* _shell;$/", "language": "C++", "typeref": "typename:PluginHost::IShell *", "kind": "member", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "mAdminLock", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        mutable Core::CriticalSection mAdminLock;$/", "language": "C++", "typeref": "typename:Core::CriticalSection", "kind": "member", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^            std::string name;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^            Core::JSON::Variant value;$/", "language": "C++", "typeref": "typename:Core::JSON::Variant", "kind": "member", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct"}], "hash": "190f7723a9a7f56647fcc99d37d6e7bc", "format-version": 4, "code-base-name": "app-gateway2", "filename": "app-gateway/Badger/Delegate/MetricsDelegate.h", "fields": [{"name": "PluginHost::IShell * _shell", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::CriticalSection mAdminLock", "scope": "WPEFramework::MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string name", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::JSON::Variant value", "scope": "WPEFramework::MetricsDelegate::ParamKV", "scopeKind": "struct", "description": "unavailable"}]}