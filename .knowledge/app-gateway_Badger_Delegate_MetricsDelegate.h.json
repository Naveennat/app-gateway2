{"is_source_file": true, "format": "C++ header file", "description": "This file defines the MetricsDelegate class, which acts as a delegate for sending different types of metrics and events to an analytics system via the IAnalytics interface. It includes methods for handling various event types such as user actions, app actions, page views, and errors, constructing appropriate payloads, and dispatching them through the analytics bridge. The class is header-only and designed to interact with a Shell interface for obtaining the analytics interface and sending events.", "external_files": ["<core/JSON.h>", "<plugins/plugins.h>", "<interfaces/IAnalytics.h>", "UtilsCallsign.h", "UtilsLogging.h", "StringUtils.h"], "external_methods": ["WPEFramework::Exchange::IAnalytics::SendEvent", "WPEFramework::Core::JSON::JsonObject::ToString"], "published": ["MetricsDelegate"], "classes": [{"name": "MetricsDelegate", "description": "Delegate class responsible for sending metrics and events to the analytics system, handling event payload creation and communication."}, {"name": "MetricsDelegate::ParamKV", "description": "A simple key-value pair structure used for passing additional parameters with events."}], "methods": [{"name": "MetricsDelegate::MetricsHandler", "description": "Handles generic metrics events, optionally with a segment and appId."}, {"name": "MetricsDelegate::LaunchCompleted", "description": "Represents a launch completed event."}, {"name": "MetricsDelegate::UserAction", "description": "Handles a user action event, with optional appId."}, {"name": "MetricsDelegate::AppAction", "description": "Handles an app action event, with optional appId."}, {"name": "MetricsDelegate::PageView", "description": "Handles a page view event for a specific page, with optional appId."}, {"name": "MetricsDelegate::UserError", "description": "Reports a user error, with optional appId."}, {"name": "MetricsDelegate::Error", "description": "Reports an application error, with optional appId."}, {"name": "MetricsDelegate::SendViaAnalytics", "description": "Internal method to send events via the analytics interface."}, {"name": "Core::hresult AppAction(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult AppAction(const std::string & action,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "void ArgsToParametersObject(const std::vector<ParamKV> & src,JsonObject & out)", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult Error(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult Error(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult LaunchCompleted(const std::vector<ParamKV> & args) const", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult LaunchCompleted(const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "MetricsDelegate(PluginHost::IShell * shell)", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult MetricsHandler(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args) const", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult MetricsHandler(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult PageView(const std::string & page,const std::vector<ParamKV> & args) const", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult PageView(const std::string & page,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "ParamKV(const std::string & n,const WPEFramework::Core::JSON::Variant & v)", "scope": "MetricsDelegate::ParamKV", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::hresult SendViaAnalytics(const std::string & eventName,const JsonObject & eventPayload) const", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult SendViaAnalytics(const std::string & eventName,const JsonObject & eventPayload,const std::string & appId) const", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult UserAction(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult UserAction(const std::string & action,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult UserError(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult UserError(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "bool ValidateActionType(const std::string & s)", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "JsonValue VariantToJsonValue(const WPEFramework::Core::JSON::Variant & v)", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}], "calls": ["analyticsInterface->SendEvent", "payload.ToString"], "search-terms": ["MetricsDelegate", "SendViaAnalytics", "Analytics bridge", "event payload", "AppAction", "UserAction", "PageView", "Error handling", "LaunchCompleted", "MetricsHandler"], "state": 2, "file_id": 5742, "knowledge_revision": 11398, "git_revision": "367ec437074d4af87cc310d5f9ac2f9eb265a7f2", "revision_history": [{"11375": ""}, {"11398": "367ec437074d4af87cc310d5f9ac2f9eb265a7f2"}], "ctags": [{"_type": "tag", "name": "AppAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    Core::hresult AppAction(const std::string& action, const std::vector<ParamKV>& args) const {$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "AppAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    Core::hresult AppAction(const std::string& action, const std::vector<ParamKV>& args, const s/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "ArgsToParametersObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    static inline void ArgsToParametersObject(const std::vector<ParamKV>& src, JsonObject& out) /", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const std::vector<ParamKV> & src,JsonObject & out)", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    Core::hresult Error(const std::string& message, bool visible, const std::string& code,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    Core::hresult Error(const std::string& message, bool visible, const std::string& code,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "LaunchCompleted", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    Core::hresult LaunchCompleted(const std::vector<ParamKV>& args) const {$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::vector<ParamKV> & args) const", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "LaunchCompleted", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    Core::hresult LaunchCompleted(const std::vector<ParamKV>& args, const std::string& appId) co/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "MetricsDelegate", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    explicit MetricsDelegate(PluginHost::IShell* shell)$/", "language": "C++", "kind": "function", "signature": "(PluginHost::IShell * shell)", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "MetricsDelegate", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^class MetricsDelegate {$/", "language": "C++", "kind": "class"}, {"_type": "tag", "name": "MetricsHandler", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    Core::hresult MetricsHandler(const Core::OptionalType<std::string>& segment,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args) const", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "MetricsHandler", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    Core::hresult MetricsHandler(const Core::OptionalType<std::string>& segment,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "PageView", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    Core::hresult PageView(const std::string& page, const std::vector<ParamKV>& args) const {$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & page,const std::vector<ParamKV> & args) const", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "PageView", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    Core::hresult PageView(const std::string& page, const std::vector<ParamKV>& args, const std:/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & page,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "ParamKV", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        ParamKV(const std::string& n, const WPEFramework::Core::JSON::Variant& v) : name(n), val/", "language": "C++", "kind": "function", "signature": "(const std::string & n,const WPEFramework::Core::JSON::Variant & v)", "scope": "MetricsDelegate::ParamKV", "scopeKind": "struct"}, {"_type": "tag", "name": "ParamKV", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    struct ParamKV {$/", "language": "C++", "kind": "struct", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "SendViaAnalytics", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    Core::hresult SendViaAnalytics(const std::string& eventName, const JsonObject& eventPayload)/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & eventName,const JsonObject & eventPayload) const", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "SendViaAnalytics", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    Core::hresult SendViaAnalytics(const std::string& eventName, const JsonObject& eventPayload,/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & eventName,const JsonObject & eventPayload,const std::string & appId) const", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    Core::hresult UserAction(const std::string& action, const std::vector<ParamKV>& args) const /", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    Core::hresult UserAction(const std::string& action, const std::vector<ParamKV>& args, const /", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserError", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    Core::hresult UserError(const std::string& message, bool visible, const std::string& code,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserError", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    Core::hresult UserError(const std::string& message, bool visible, const std::string& code,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args,const std::string & appId) const", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "ValidateActionType", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    static inline bool ValidateActionType(const std::string& s) {$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & s)", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "VariantToJsonValue", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    static inline JsonValue VariantToJsonValue(const WPEFramework::Core::JSON::Variant& v) {$/", "language": "C++", "typeref": "typename:JsonValue", "kind": "function", "signature": "(const WPEFramework::Core::JSON::Variant & v)", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "_shell", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    PluginHost::IShell* _shell;$/", "language": "C++", "typeref": "typename:PluginHost::IShell *", "kind": "member", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "mAdminLock", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^    mutable Core::CriticalSection mAdminLock;$/", "language": "C++", "typeref": "typename:Core::CriticalSection", "kind": "member", "scope": "MetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        std::string name;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "MetricsDelegate::ParamKV", "scopeKind": "struct"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsDelegate.h", "pattern": "/^        WPEFramework::Core::JSON::Variant value;$/", "language": "C++", "typeref": "typename:WPEFramework::Core::JSON::Variant", "kind": "member", "scope": "MetricsDelegate::ParamKV", "scopeKind": "struct"}], "hash": "d34125aed115ee17dd5008e71c8236c2", "format-version": 4, "code-base-name": "app-gateway2", "filename": "app-gateway/Badger/Delegate/MetricsDelegate.h", "fields": [{"name": "PluginHost::IShell * _shell", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::CriticalSection mAdminLock", "scope": "MetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string name", "scope": "MetricsDelegate::ParamKV", "scopeKind": "struct", "description": "unavailable"}, {"name": "WPEFramework::Core::JSON::Variant value", "scope": "MetricsDelegate::ParamKV", "scopeKind": "struct", "description": "unavailable"}]}