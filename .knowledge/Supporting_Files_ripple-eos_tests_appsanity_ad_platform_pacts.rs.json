{"is_source_file": true, "format": "Rust", "description": "This file contains Rust test code that sets up a mock server using Pact to test the gRPC client 'AdPlatformServiceClient' for 'ad_platform' service. It defines functions to generate proto file paths, create mock interactions, and verify the client receives expected responses.", "external_files": ["pact_consumer::mock_server::StartMockServerAsync", "pact_consumer::prelude::*", "serde_json::json", "std::path::Path", "crate::tests::contracts::utils::get_crate_source_path", "ottx_protos::ad_platform::ad_platform_service_client::AdPlatformServiceClient", "ottx_protos::ad_platform::AdRouterRequest"], "external_methods": ["get_crate_source_path", "AdPlatformServiceClient::connect", "pact_builder.using_plugin", "pact_builder.synchronous_message_interaction", "Path::new", "Path::canonicalize", "Path::to_string_lossy", "json! (macro)"], "published": [], "classes": [], "methods": [{"name": "get_proto_file_path() -> String", "description": "Generates the absolute path to the 'ad_platform.proto' file based on the crate source path.", "scope": "", "scopeKind": ""}, {"name": "test_ad_platform()", "description": "Main async test function that calls 'test_get_ad_config'.", "scope": "", "scopeKind": ""}, {"name": "test_get_ad_config()", "description": "Sets up a Pact mock server with protobuf plugin, defines expected request and response payloads, connects to the mock server, sends a gRPC request, and asserts the received response matches expectations.", "scope": "", "scopeKind": ""}], "calls": ["get_crate_source_path", "PactBuilderAsync::new_v4", "pact_builder.using_plugin", "i.contents_from", "Path::canonicalize", "AdPlatformServiceClient::connect", "client.get_ad_router", "assert_eq!"], "search-terms": ["ad_platform", "pact_consumer", "protobuf", "mock server", "gRPC client", "test_ad_platform"], "state": 2, "file_id": 299, "knowledge_revision": 1025, "git_revision": "046761b9656aa3448e0e16f1a3a9c084965a6b28", "ctags": [{"_type": "tag", "name": "get_proto_file_path", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/tests/appsanity_ad_platform_pacts.rs", "pattern": "/^fn get_proto_file_path() -> String {$/", "language": "Rust", "kind": "function", "signature": "() -> String"}, {"_type": "tag", "name": "test_ad_platform", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/tests/appsanity_ad_platform_pacts.rs", "pattern": "/^pub async fn test_ad_platform() {$/", "language": "Rust", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "test_get_ad_config", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/tests/appsanity_ad_platform_pacts.rs", "pattern": "/^async fn test_get_ad_config() {$/", "language": "Rust", "kind": "function", "signature": "()"}], "hash": "f892686e9e65a9c957848b9b65c769b0", "format-version": 4, "code-base-name": "app-gateway2", "filename": "Supporting_Files/ripple-eos/tests/appsanity_ad_platform_pacts.rs", "revision_history": [{"1025": "046761b9656aa3448e0e16f1a3a9c084965a6b28"}]}