{"is_source_file": true, "format": "Rust", "description": "This is a Rust source file for a badger extension service. It initializes and starts the service, manages extension channel setup, handles ripple context change notifications, and manages internal state related to the 'badger' extension. It contains functions for starting the service, handling messages, and setting up token event subscriptions.", "external_files": ["ripple_sdk::api::manifest::device_manifest", "ripple_sdk::api::manifest::extn_manifest", "ripple_sdk::api::manifest::ripple_manifest_loader", "ripple_sdk::extn::ffi::ffi_channel", "ripple_sdk::service::service_client", "ripple_sdk::service::service_message", "ripple_sdk::log", "ripple_sdk::{export_extn_channel, extn::extn_id::{ExtnClassId, ExtnId}, tokio, utils::{extn_utils::ExtnUtils, logger::init_and_configure_logger}}", "serde_json", "std::collections::HashMap", "std::str", "thunder_ripple_sdk::bootstrap::boot_thunder", "thunder_ripple_sdk::ripple_sdk::api::context::{ActivationStatus, RippleContextUpdateType}", "tokio::sync::mpsc", "crate::badger_state::BadgerState", "crate::handlers::{badger_device_info::subscribe_to_device_changes, badger_info_rpc::{get_account_session, BadgerServiceImpl, BadgerServiceServer}}", "crate::thunder::thunder_session::ThunderSessionService"], "external_methods": ["RippleManifestLoader::initialize", "ServiceClient::builder", "ExtnId::new_channel", "ExtnManifest::get_extn_symbol", "ServiceClient::get_extn_client", "ServiceClient::initialize", "boot_thunder", "get_account_session", "ThunderSessionService::get_account_session", "setup_token_event_handler", "handle_service_message", "parse_ripple_context", "handle_ripple_context", "init_and_configure_logger"], "published": ["ExtnChannel", "init_extn_channel"], "classes": [{"name": "ExtnChannel", "description": "Struct representing the extension channel setup with a start method to initialize the service."}], "methods": [{"name": "get_rpc_methods_for_service(state: &BadgerState) -> Methods", "description": "Creates and returns RPC methods for the Badger service.", "scope": "", "scopeKind": ""}, {"name": "start_service()", "description": "Asynchronously initializes logging, loads manifests, and starts the badger service.", "scope": "", "scopeKind": ""}, {"name": "start()", "description": "Starts the badger service using a runtime, initializing manifests and calling init asynchronously.", "scope": "", "scopeKind": ""}, {"name": "get_symbol(extn_manifest: ExtnManifest) -> Option<ExtnSymbol>", "description": "Retrieves the extension symbol from the manifest.", "scope": "", "scopeKind": ""}, {"name": "init(client: ServiceClient, device_manifest: DeviceManifest)", "description": "Initializes the badger extension, performs thunder booting, and sets up device subscriptions.", "scope": "", "scopeKind": ""}, {"name": "setup_token_event_handler(state: &BadgerState, service_client: &mut ServiceClient)", "description": "Sets up a handler to listen for token change events and handles messages accordingly.", "scope": "", "scopeKind": ""}, {"name": "handle_service_message(state: &BadgerState, sm: ServiceMessage)", "description": "Processes incoming service messages, parsing RippleContext from notifications.", "scope": "", "scopeKind": ""}, {"name": "parse_ripple_context(notification: &JsonRpcNotification) -> Option<RippleContext>", "description": "Extracts and parses RippleContext from a notification's parameters.", "scope": "", "scopeKind": ""}, {"name": "handle_ripple_context(state: &BadgerState, ripple_context: RippleContext)", "description": "Handles RippleContext updates, such as token changes, by updating the session state.", "scope": "", "scopeKind": ""}, {"name": "init_extn_channel() -> ExtnChannel", "description": "Initializes and returns an ExtnChannel with the start method.", "scope": "", "scopeKind": ""}], "calls": ["RippleManifestLoader::initialize", "ServiceClient::builder", "ExtnId::new_channel", "ExtnManifest::get_extn_symbol", "ServiceClient::get_extn_client", "ServiceClient::initialize", "boot_thunder", "get_account_session", "ThunderSessionService::get_account_session", "setup_token_event_handler", "handle_service_message", "parse_ripple_context", "handle_ripple_context", "init_and_configure_logger"], "search-terms": ["badger", "RippleContext", "token change", "extn channel", "thunder boot", "device change subscription", "RippleManifestLoader", "extn_manifest", "badger_state", "badgerService"], "state": 2, "file_id": 1870, "knowledge_revision": 4467, "git_revision": "0f87a35b32215bc8547fb583d6c84bd51f603f69", "ctags": [{"_type": "tag", "name": "get_rpc_methods_for_service", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^fn get_rpc_methods_for_service(state: &BadgerState) -> Methods {$/", "language": "Rust", "kind": "function", "signature": "(state: &BadgerState) -> Methods"}, {"_type": "tag", "name": "get_symbol", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^fn get_symbol(extn_manifest: ExtnManifest) -> Option<ExtnSymbol> {$/", "language": "Rust", "kind": "function", "signature": "(extn_manifest: ExtnManifest) -> Option<ExtnSymbol>"}, {"_type": "tag", "name": "handle_ripple_context", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^async fn handle_ripple_context(state: &BadgerState, ripple_context: RippleContext) {$/", "language": "Rust", "kind": "function", "signature": "(state: &BadgerState, ripple_context: RippleContext)"}, {"_type": "tag", "name": "handle_service_message", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^async fn handle_service_message(state: &BadgerState, sm: ServiceMessage) {$/", "language": "Rust", "kind": "function", "signature": "(state: &BadgerState, sm: ServiceMessage)"}, {"_type": "tag", "name": "init", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^pub async fn init(client: ServiceClient, device_manifest: DeviceManifest) {$/", "language": "Rust", "kind": "function", "signature": "(client: ServiceClient, device_manifest: DeviceManifest)"}, {"_type": "tag", "name": "init_extn_channel", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^fn init_extn_channel() -> ExtnChannel {$/", "language": "Rust", "kind": "function", "signature": "() -> ExtnChannel"}, {"_type": "tag", "name": "parse_ripple_context", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^fn parse_ripple_context(notification: &JsonRpcNotification) -> Option<RippleContext> {$/", "language": "Rust", "kind": "function", "signature": "(notification: &JsonRpcNotification) -> Option<RippleContext>"}, {"_type": "tag", "name": "setup_token_event_handler", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^fn setup_token_event_handler(state: &BadgerState, service_client: &mut ServiceClient) {$/", "language": "Rust", "kind": "function", "signature": "(state: &BadgerState, service_client: &mut ServiceClient)"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^fn start() {$/", "language": "Rust", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "start_service", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "pattern": "/^pub async fn start_service() {$/", "language": "Rust", "kind": "function", "signature": "()"}], "hash": "ef3b93be427232a6008ab36360cee3de", "format-version": 4, "code-base-name": "app-gateway2", "filename": "__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/Ripple_Badger_Extn/src/badger_ffi.rs", "revision_history": [{"4467": "0f87a35b32215bc8547fb583d6c84bd51f603f69"}]}