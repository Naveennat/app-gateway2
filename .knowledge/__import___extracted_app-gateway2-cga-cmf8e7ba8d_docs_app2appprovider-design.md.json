{"is_source_file": true, "format": "Markdown", "description": "This file is a design specification document in Markdown format for the App2AppProvider Thunder plugin. It describes the architecture, interfaces, classes, and interaction models for a JSON-RPC based plugin designed to facilitate provider/consumer capabilities between applications, leveraging Thunder/WPEFramework patterns. The document does not contain executable code but outlines detailed implementation guidance, data models, and interface definitions.", "external_files": ["thunder-plugins-architecture.md", "appgateway-design.md"], "external_methods": [], "published": [], "classes": [{"name": "App2AppProvider", "description": "Main plugin class implementing JSON-RPC endpoints, coordinating registration, invocation, and response handling between provider applications and consumers within the Thunder framework."}, {"name": "ProviderRegistry", "description": "Manages the mapping of capability strings to registered provider app contexts, supporting registration, unregistration, and resolution."}, {"name": "CorrelationMap", "description": "Tracks ongoing invocation correlation IDs and maps them back to the consumer context for response routing."}, {"name": "GatewayClient", "description": "Facilitates local JSON-RPC calls to AppGateway.respond, including security token management and response dispatching."}, {"name": "PermissionManager", "description": "Handles permission enforcement for registration and invocation, with potential JWT scope validation in future phases."}], "methods": [{"name": "Initialize", "description": "Initializes the plugin, sets up JSON-RPC method registration, retrieves security tokens, and prepares internal registries."}, {"name": "Deinitialize", "description": "Cleans up resources, unregisters methods, and clears internal state."}, {"name": "RegisterProviderWrapper", "description": "Handles JSON-RPC invocation to register or unregister a provider for a capability."}, {"name": "InvokeProviderWrapper", "description": "Handles JSON-RPC invocation to request a capability from a registered provider, returning a correlation ID."}, {"name": "HandleProviderResponseWrapper", "description": "Processes responses from providers, routing success results back to consumers."}, {"name": "HandleProviderErrorWrapper", "description": "Processes error responses from providers, routing error information back to consumers."}], "calls": ["PluginHost::JSONRPC::Register", "PluginHost::JSONRPC::Unregister", "GatewayClient::Respond", "CorrelationMap::Create", "CorrelationMap::Take", "CorrelationMap::Peek"], "search-terms": ["App2AppProvider", "Thunder JSON-RPC capabilities", "provider registration capability", "correlation ID routing", "AppGateway.respond", "JSON-RPC invokeProvider", "provider/consumer interaction", "Capability registration", "Async response correlation", "Thunder plugin design"], "state": 2, "file_id": 1272, "knowledge_revision": 3894, "git_revision": "0f87a35b32215bc8547fb583d6c84bd51f603f69", "hash": "bc5c4458da02aa3734474449a58d7bde", "format-version": 4, "code-base-name": "app-gateway2", "filename": "__import__/extracted/app-gateway2-cga-cmf8e7ba8d/docs/app2appprovider-design.md", "revision_history": [{"3894": "0f87a35b32215bc8547fb583d6c84bd51f603f69"}]}