{"is_source_file": true, "format": "Rust", "description": "This is a Rust source file defining the AppsanityAdvertisingService, including methods for obtaining ad identifiers, resetting ad identifiers, and fetching ad configurations via gRPC and HTTP interactions. It includes serialization utilities and test modules.", "external_files": ["crate::client::xvp_xifaservice", "crate::gateway::appsanity_gateway", "crate::message::DpabError", "crate::util::service_util", "base64", "ottx_protos::ad_platform", "thunder_ripple_sdk::ripple_sdk::api::firebolt::fb_advertising", "thunder_ripple_sdk::ripple_sdk::api::session::AccountSession", "thunder_ripple_sdk::ripple_sdk::log", "serde", "serde_json", "std::collections::HashMap", "std::sync::{Arc, Mutex}", "tonic::Request"], "external_methods": ["XvpXifaService::get_ad_identifier", "XvpXifaService::reset_ad_identifier", "decorate_request_with_account_session"], "published": ["serialize_object"], "classes": [{"name": "AppsanityAdvertisingService", "description": "Main service class providing methods to interact with ad identification and configuration management using gRPC and HTTP."}, {"name": "XvpServiceUrl", "description": "A simple data structure holding the URL for the external Xvp Xifa service."}], "methods": [{"name": "XvpServiceUrl::new", "description": "Constructor to create a new XvpServiceUrl with the specified URL."}, {"name": "XvpServiceUrl::get_xvp_xifa_url", "description": "Returns the stored URL string."}, {"name": "AppsanityAdvertisingService::new", "description": "Constructor for creating a new instance of the advertising service with provided gRPC session and service URL."}, {"name": "AppsanityAdvertisingService::get_ad_identifier", "description": "Asynchronously retrieves an ad identifier, contacting the external service and returning an AdIdResponse."}, {"name": "AppsanityAdvertisingService::reset_ad_identifier", "description": "Asynchronously resets the ad identifier for a given session."}, {"name": "AppsanityAdvertisingService::get_ad_config", "description": "Asynchronously fetches ad configuration, including identity and server details, combining multiple gRPC and HTTP calls."}, {"name": "serialize_object<T: Serialize>(obj: T) -> Result<String, Error>", "description": "Serializes a given object to a JSON string, then encodes it in base64.", "scope": "", "scopeKind": ""}, {"name": "get_ad_config( self: Self, params: AdConfigRequestParams, ) -> Result<AdConfigResponse, DpabError>", "scope": "AppsanityAdvertisingService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "get_ad_identifier( self: Self, params: AdIdRequestParams, ) -> Result<AdIdResponse, DpabError>", "scope": "AppsanityAdvertisingService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "get_service(url: String) -> Box<AppsanityAdvertisingService>", "scope": "tests", "scopeKind": "module", "description": "unavailable"}, {"name": "get_session() -> AccountSession", "scope": "tests", "scopeKind": "module", "description": "unavailable"}, {"name": "get_xifa_response() -> XvpXifaServiceResponse", "scope": "tests", "scopeKind": "module", "description": "unavailable"}, {"name": "get_xvp_xifa_url(&self) -> &str", "scope": "XvpServiceUrl", "scopeKind": "implementation", "description": "unavailable"}, {"name": "mock_xifa_response(server: &MockServer) -> httpmock::Mock<'_>", "scope": "tests", "scopeKind": "module", "description": "unavailable"}, {"name": "new( grpc_client_session: Arc<Mutex<GrpcClientSession>>, xvp_service_url: XvpServiceUrl, ) -> Self", "scope": "AppsanityAdvertisingService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "new(xvp_xifa_url: String) -> Self", "scope": "XvpServiceUrl", "scopeKind": "implementation", "description": "unavailable"}, {"name": "reset_ad_identifier(self: Self, params: AccountSession) -> Result<(), DpabError>", "scope": "AppsanityAdvertisingService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "test_get_ad_config()", "scope": "tests", "scopeKind": "module", "description": "unavailable"}, {"name": "test_get_ad_id_object()", "scope": "tests", "scopeKind": "module", "description": "unavailable"}, {"name": "test_reset_ad_id()", "scope": "tests", "scopeKind": "module", "description": "unavailable"}], "calls": ["XvpXifaService::get_ad_identifier", "XvpXifaService::reset_ad_identifier", "AdPlatformServiceClient::with_interceptor", "client.get_ad_router", "decorate_request_with_account_session"], "search-terms": ["AppsanityAdvertisingService", "get_ad_identifier", "reset_ad_identifier", "get_ad_config", "XvpServiceUrl", "ad_server_url_template", "serialize_object", "thunder_ripple_sdk::ripple_sdk"], "state": 2, "file_id": 1819, "knowledge_revision": 16270, "git_revision": "0f87a35b32215bc8547fb583d6c84bd51f603f69", "ctags": [{"_type": "tag", "name": "AppsanityAdvertisingService", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^impl AppsanityAdvertisingService {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "AppsanityAdvertisingService", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^pub struct AppsanityAdvertisingService {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "XvpServiceUrl", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^impl XvpServiceUrl {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "XvpServiceUrl", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^pub struct XvpServiceUrl {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "get_ad_config", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^    pub async fn get_ad_config($/", "language": "Rust", "kind": "method", "signature": "( self: Self, params: AdConfigRequestParams, ) -> Result<AdConfigResponse, DpabError>", "scope": "AppsanityAdvertisingService", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_ad_identifier", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^    pub async fn get_ad_identifier($/", "language": "Rust", "kind": "method", "signature": "( self: Self, params: AdIdRequestParams, ) -> Result<AdIdResponse, DpabError>", "scope": "AppsanityAdvertisingService", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_service", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^    fn get_service(url: String) -> Box<AppsanityAdvertisingService> {$/", "language": "Rust", "kind": "function", "signature": "(url: String) -> Box<AppsanityAdvertisingService>", "scope": "tests", "scopeKind": "module"}, {"_type": "tag", "name": "get_session", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^    fn get_session() -> AccountSession {$/", "language": "Rust", "kind": "function", "signature": "() -> AccountSession", "scope": "tests", "scopeKind": "module"}, {"_type": "tag", "name": "get_xifa_response", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^    fn get_xifa_response() -> XvpXifaServiceResponse {$/", "language": "Rust", "kind": "function", "signature": "() -> XvpXifaServiceResponse", "scope": "tests", "scopeKind": "module"}, {"_type": "tag", "name": "get_xvp_xifa_url", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^    pub fn get_xvp_xifa_url(&self) -> &str {$/", "language": "Rust", "kind": "method", "signature": "(&self) -> &str", "scope": "XvpServiceUrl", "scopeKind": "implementation"}, {"_type": "tag", "name": "grpc_client_session", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^    pub grpc_client_session: Arc<Mutex<GrpcClientSession>>,$/", "language": "Rust", "kind": "field", "scope": "AppsanityAdvertisingService", "scopeKind": "struct"}, {"_type": "tag", "name": "mock_xifa_response", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^    pub fn mock_xifa_response(server: &MockServer) -> httpmock::Mock<'_> {$/", "language": "Rust", "kind": "function", "signature": "(server: &MockServer) -> httpmock::Mock<'_>", "scope": "tests", "scopeKind": "module"}, {"_type": "tag", "name": "new", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^    pub fn new($/", "language": "Rust", "kind": "method", "signature": "( grpc_client_session: Arc<Mutex<GrpcClientSession>>, xvp_service_url: XvpServiceUrl, ) -> Self", "scope": "AppsanityAdvertisingService", "scopeKind": "implementation"}, {"_type": "tag", "name": "new", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^    pub fn new(xvp_xifa_url: String) -> Self {$/", "language": "Rust", "kind": "method", "signature": "(xvp_xifa_url: String) -> Self", "scope": "XvpServiceUrl", "scopeKind": "implementation"}, {"_type": "tag", "name": "reset_ad_identifier", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^    pub async fn reset_ad_identifier(self: Self, params: AccountSession) -> Result<(), DpabError/", "language": "Rust", "kind": "method", "signature": "(self: Self, params: AccountSession) -> Result<(), DpabError>", "scope": "AppsanityAdvertisingService", "scopeKind": "implementation"}, {"_type": "tag", "name": "serialize_object", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^pub fn serialize_object<T: Serialize>(obj: T) -> Result<String, Error> {$/", "language": "Rust", "kind": "function", "signature": "<T: Serialize>(obj: T) -> Result<String, Error>"}, {"_type": "tag", "name": "test_get_ad_config", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^    pub async fn test_get_ad_config() {$/", "language": "Rust", "kind": "function", "signature": "()", "scope": "tests", "scopeKind": "module"}, {"_type": "tag", "name": "test_get_ad_id_object", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^    pub async fn test_get_ad_id_object() {$/", "language": "Rust", "kind": "function", "signature": "()", "scope": "tests", "scopeKind": "module"}, {"_type": "tag", "name": "test_reset_ad_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^    pub async fn test_reset_ad_id() {$/", "language": "Rust", "kind": "function", "signature": "()", "scope": "tests", "scopeKind": "module"}, {"_type": "tag", "name": "tests", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^pub mod tests {$/", "language": "Rust", "kind": "module"}, {"_type": "tag", "name": "xvp_service_url", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^    pub xvp_service_url: XvpServiceUrl,$/", "language": "Rust", "kind": "field", "scope": "AppsanityAdvertisingService", "scopeKind": "struct"}, {"_type": "tag", "name": "xvp_xifa_url", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "pattern": "/^    pub xvp_xifa_url: String,$/", "language": "Rust", "kind": "field", "scope": "XvpServiceUrl", "scopeKind": "struct"}], "hash": "9fed017e20cfe4428387b259dd900dce", "format-version": 4, "code-base-name": "app-gateway2", "filename": "__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/service/appsanity_advertising.rs", "fields": [{"name": "pub grpc_client_session: Arc<Mutex<GrpcClientSession>>,", "scope": "AppsanityAdvertisingService", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub xvp_service_url: XvpServiceUrl,", "scope": "AppsanityAdvertisingService", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub xvp_xifa_url: String,", "scope": "XvpServiceUrl", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"16270": "0f87a35b32215bc8547fb583d6c84bd51f603f69"}]}