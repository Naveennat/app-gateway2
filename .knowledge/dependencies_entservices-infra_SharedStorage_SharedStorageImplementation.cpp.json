{"is_source_file": true, "format": "C++", "description": "This source file contains the implementation of the SharedStorageImplementation class, which manages shared storage operations within the WPEFramework Plugin namespace. It includes methods for registering notifications, configuring storage backends, setting and getting storage values, and handling events related to shared storage scopes. The code interacts with external interfaces such as IStore2, IStoreInspector, IStoreLimit, IStoreCache, and manages internal state and notifications.", "external_files": ["SharedStorageImplementation.h", "UtilsLogging.h"], "external_methods": ["Core::ERROR_NONE", "Core::ERROR_GENERAL", "Core::ERROR_NOT_SUPPORTED", "Core::Error", "Core::hresult", "Core::IWorkerPool::Instance", "Job::Create", "LOGINFO", "LOGERR", "TRACE", "ASSERT", "std::find", "service->QueryInterfaceByCallsign"], "published": ["SharedStorageImplementation::instance", "SharedStorageImplementation::Register", "SharedStorageImplementation::Unregister", "SharedStorageImplementation::Configure", "SharedStorageImplementation::getRemoteStoreObject", "SharedStorageImplementation::ValueChanged", "SharedStorageImplementation::dispatchEvent", "SharedStorageImplementation::Dispatch", "SharedStorageImplementation::SetValue", "SharedStorageImplementation::GetValue", "SharedStorageImplementation::DeleteKey", "SharedStorageImplementation::DeleteNamespace", "SharedStorageImplementation::GetKeys", "SharedStorageImplementation::GetNamespaces", "SharedStorageImplementation::GetStorageSizes", "SharedStorageImplementation::SetNamespaceStorageLimit", "SharedStorageImplementation::GetNamespaceStorageLimit", "SharedStorageImplementation::FlushCache"], "classes": [{"name": "SharedStorageImplementation", "description": "Implements shared storage management including configuration, CRUD operations, event dispatching, and notification handling within the WPEFramework Plugin namespace."}], "methods": [{"name": "SharedStorageImplementation()", "description": "Constructor initializing internal members and logging initialization.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "~SharedStorageImplementation()", "description": "Destructor releasing interfaces and cleaning up resources.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "SharedStorageImplementation * instance(SharedStorageImplementation * SharedStorageImpl)", "description": "Provides singleton-like access to the SharedStorageImplementation instance.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "uint32_t Register(ISharedStorage::INotification * notification)", "description": "Registers a notification callback for storage events.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "uint32_t Unregister(ISharedStorage::INotification * notification)", "description": "Unregisters a notification callback for storage events.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "uint32_t Configure(PluginHost::IShell * service)", "description": "Configures storage interfaces using a provided service, establishing connections to persistent store, inspector, limit, cache, and cloud store.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "Exchange::IStore2 * getRemoteStoreObject(const Exchange::ISharedStorageLimit::ScopeType eScope)", "description": "Returns the appropriate storage interface based on the scope type.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "void ValueChanged(const Exchange::ISharedStorage::ScopeType eScope,const string & ns,const string & key,const string & value)", "description": "Handles value change events by dispatching notifications.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "void dispatchEvent(Event event,const JsonObject & params)", "description": "Schedules an event dispatch for storage notifications.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "void Dispatch(Event event,const JsonObject & params)", "description": "Invokes registered notifications about storage value changes.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "uint32_t SetValue(const ISharedStorage::ScopeType eScope,const string & ns,const string & key,const string & value,const uint32_t ttl,Success & success)", "description": "Sets a value in shared storage within a given scope.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "uint32_t GetValue(const ISharedStorage::ScopeType eScope,const string & ns,const string & key,string & value,uint32_t & ttl,bool & success)", "description": "Retrieves a value from shared storage within a given scope.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "uint32_t DeleteKey(const ISharedStorage::ScopeType eScope,const string & ns,const string & key,Success & success)", "description": "Deletes a specific key in shared storage within a given scope.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "uint32_t DeleteNamespace(const ISharedStorage::ScopeType eScope,const string & ns,Success & success)", "description": "Deletes an entire namespace in shared storage within a given scope.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "uint32_t GetKeys(const ISharedStorageInspector::ScopeType eScope,const string & ns,RPC::IStringIterator * & keys,bool & success)", "description": "Retrieves keys within a namespace for device scope.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "uint32_t GetNamespaces(const ISharedStorageInspector::ScopeType eScope,RPC::IStringIterator * & namespaces,bool & success)", "description": "Lists all namespaces for device scope.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "Core::hresult GetStorageSizes(const ISharedStorageInspector::ScopeType eScope,INamespaceSizeIterator * & storageList,bool & success)", "description": "Gets storage size information for device scope.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "Core::hresult SetNamespaceStorageLimit(const ISharedStorageLimit::ScopeType eScope,const string & ns,const uint32_t storageLimit,bool & success)", "description": "Sets storage size limit for a namespace within a scope.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "Core::hresult GetNamespaceStorageLimit(const ISharedStorageLimit::ScopeType eScope,const string & ns,StorageLimit & storageLimit)", "description": "Retrieves storage size limit for a namespace.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"name": "Core::hresult FlushCache()", "description": "Flushes the storage cache.", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}], "calls": ["LOGINFO", "LOGERR", "TRACE", "Core::ERROR_NONE", "Core::ERROR_GENERAL", "Core::ERROR_NOT_SUPPORTED", "service->QueryInterfaceByCallsign", "_psObject->Register", "_psInspector->GetKeys", "_psLimit->SetNamespaceStorageLimit", "_psLimit->GetNamespaceStorageLimit", "_psCache->FlushCache", "_service->AddRef", "_service->Release", "_sharedStorageNotification.push_back", "_sharedStorageNotification.erase", "Core::IWorkerPool::Instance", "Job::Create", "ASSERT"], "search-terms": ["SharedStorageImplementation", "PersistentStore", "ISharedStorage", "IStore2", "configure", "notification", "valueChanged", "storage", "namespace", "key", "scope", "cache", "limits"], "state": 2, "file_id": 972, "knowledge_revision": 2099, "git_revision": "", "ctags": [{"_type": "tag", "name": "Configure", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    uint32_t SharedStorageImplementation::Configure(PluginHost::IShell* service)$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(PluginHost::IShell * service)", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "DeleteKey", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    uint32_t SharedStorageImplementation::DeleteKey(const ISharedStorage::ScopeType eScope, cons/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const ISharedStorage::ScopeType eScope,const string & ns,const string & key,Success & success)", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "DeleteNamespace", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    uint32_t SharedStorageImplementation::DeleteNamespace(const ISharedStorage::ScopeType eScope/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const ISharedStorage::ScopeType eScope,const string & ns,Success & success)", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Dispatch", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    void SharedStorageImplementation::Dispatch(Event event, const JsonObject &params)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(Event event,const JsonObject & params)", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "FlushCache", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    Core::hresult SharedStorageImplementation::FlushCache()$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "GetKeys", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    uint32_t SharedStorageImplementation::GetKeys(const ISharedStorageInspector::ScopeType eScop/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const ISharedStorageInspector::ScopeType eScope,const string & ns,RPC::IStringIterator * & keys,bool & success)", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "GetNamespaceStorageLimit", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    Core::hresult SharedStorageImplementation::GetNamespaceStorageLimit(const ISharedStorageLimi/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const ISharedStorageLimit::ScopeType eScope,const string & ns,StorageLimit & storageLimit)", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "GetNamespaces", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    uint32_t SharedStorageImplementation::GetNamespaces(const ISharedStorageInspector::ScopeType/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const ISharedStorageInspector::ScopeType eScope,RPC::IStringIterator * & namespaces,bool & success)", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "GetStorageSizes", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    Core::hresult SharedStorageImplementation::GetStorageSizes(const ISharedStorageInspector::Sc/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const ISharedStorageInspector::ScopeType eScope,INamespaceSizeIterator * & storageList,bool & success)", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "GetValue", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    uint32_t SharedStorageImplementation::GetValue(const ISharedStorage::ScopeType eScope, const/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const ISharedStorage::ScopeType eScope,const string & ns,const string & key,string & value,uint32_t & ttl,bool & success)", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^namespace Plugin {$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "Register", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    uint32_t SharedStorageImplementation::Register(ISharedStorage::INotification* notification)$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(ISharedStorage::INotification * notification)", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "SetNamespaceStorageLimit", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    Core::hresult SharedStorageImplementation::SetNamespaceStorageLimit(const ISharedStorageLimi/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const ISharedStorageLimit::ScopeType eScope,const string & ns,const uint32_t storageLimit,bool & success)", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "SetValue", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    uint32_t SharedStorageImplementation::SetValue(const ISharedStorage::ScopeType eScope, const/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const ISharedStorage::ScopeType eScope,const string & ns,const string & key,const string & value,const uint32_t ttl,Success & success)", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "SharedStorageImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    SharedStorageImplementation::SharedStorageImplementation() : $/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Unregister", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    uint32_t SharedStorageImplementation::Unregister(ISharedStorage::INotification* notification/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(ISharedStorage::INotification * notification)", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "ValueChanged", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    void SharedStorageImplementation::ValueChanged(const Exchange::ISharedStorage::ScopeType eSc/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const Exchange::ISharedStorage::ScopeType eScope,const string & ns,const string & key,const string & value)", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^namespace WPEFramework {$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "dispatchEvent", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    void SharedStorageImplementation::dispatchEvent(Event event, const JsonObject &params)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(Event event,const JsonObject & params)", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "getRemoteStoreObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    Exchange::IStore2* SharedStorageImplementation::getRemoteStoreObject(const Exchange::IShared/", "language": "C++", "typeref": "typename:Exchange::IStore2 *", "kind": "function", "signature": "(const Exchange::ISharedStorageLimit::ScopeType eScope)", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "instance", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    SharedStorageImplementation* SharedStorageImplementation::instance(SharedStorageImplementati/", "language": "C++", "typeref": "typename:SharedStorageImplementation *", "kind": "function", "signature": "(SharedStorageImplementation * SharedStorageImpl)", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "~SharedStorageImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "pattern": "/^    SharedStorageImplementation::~SharedStorageImplementation()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::SharedStorageImplementation", "scopeKind": "class"}], "hash": "f79aa9f1ac486cf334ddcb05b6bdacc3", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/SharedStorage/SharedStorageImplementation.cpp", "revision_history": [{"2099": ""}]}