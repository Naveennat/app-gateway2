{"is_source_file": true, "format": "C++", "description": "This file contains unit tests for the Analytics component within a larger software project. It includes setup of mock objects, testing event sending, event mapping, and interactions with external systems such as sockets and services. The tests verify behavior of event queuing, event mapping, and communication with a mock server.", "external_files": ["L2Tests.h", "L2TestsMock.h", "<condition_variable>", "<fstream>", "<gmock/gmock.h>", "<gtest/gtest.h>", "<interfaces/IAnalytics.h>", "<mutex>", "<string>", "<sys/socket.h>", "<sys/types.h>", "<unistd.h>", "deepSleepMgr.h", "PowerManagerMock.h", "PowerManagerHalMock.h", "MfrMock.h"], "external_methods": ["gettid()", "getpid()", "inet_addr()", "socket()", "setsockopt()", "bind()", "listen()", "accept()", "recv()", "send()", "close()", "remove()", "sleep()", "EXPECT_CALL()", "WillOnce()", "WillRepeatedly()", "Invoke()", "ActivateService()", "DeactivateService()", "InvokeServiceMethod()"], "published": ["AnalyticsTest"], "classes": [{"name": "ServerMock", "description": "A mock TCP server that listens for incoming connections, receives data, and responds with HTTP status codes. Used in tests to simulate server interactions for the Analytics component."}, {"name": "AnalyticsTest", "description": "A test fixture class inheriting from L2TestMocks, setting up the environment and mock expectations for testing the Analytics functionality."}], "methods": [{"name": "ServerMock::Start", "description": "Initializes the server socket, binds to the specified IP and port, and begins listening for incoming connections."}, {"name": "ServerMock::AwaitData", "description": "Waits for data from a client connection within a timeout period. Receives data, logs it, sends an HTTP response, and extracts the actual message content."}, {"name": "AnalyticsTest::AnalyticsTest", "description": "Constructor that sets up mock expectations, activates services, mocks file system states, and initializes the Analytics testing environment."}, {"name": "AnalyticsTest::~AnalyticsTest", "description": "Destructor that deactivates services, resets mock expectations, cleans up files, and finalizes the test environment."}, {"name": "AnalyticsTest()", "scope": "AnalyticsTest", "scopeKind": "class", "description": "unavailable"}, {"name": "string AwaitData(uint32_t timeoutSec,string errCodeResp=\"200 OK\")", "scope": "ServerMock", "scopeKind": "class", "description": "unavailable"}, {"name": "ServerMock()", "scope": "ServerMock", "scopeKind": "class", "description": "unavailable"}, {"name": "bool Start()", "scope": "ServerMock", "scopeKind": "class", "description": "unavailable"}, {"name": "TEST_F(AnalyticsTest,EventsMapping)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TEST_F(AnalyticsTest,SendAndReceiveSignleEventQueued)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "__anondaf063500102(char* pcCallerID, const char* pcParameterName, RFC_ParamData_t* pstParamData)", "scope": "AnalyticsTest::AnalyticsTest", "scopeKind": "function", "description": "unavailable"}, {"name": "__anondaf063500202(int high, int critical)", "scope": "AnalyticsTest::AnalyticsTest", "scopeKind": "function", "description": "unavailable"}, {"name": "__anondaf063500302(PWRMgr_PowerState_t* powerState)", "scope": "AnalyticsTest::AnalyticsTest", "scopeKind": "function", "description": "unavailable"}, {"name": "__anondaf063500402(PWRMgr_PowerState_t powerState)", "scope": "AnalyticsTest::AnalyticsTest", "scopeKind": "function", "description": "unavailable"}, {"name": "__anondaf063500502(mfrTemperatureState_t* curState, int* curTemperature, int* wifiTemperature)", "scope": "AnalyticsTest::AnalyticsTest", "scopeKind": "function", "description": "unavailable"}, {"name": "~AnalyticsTest()", "scope": "AnalyticsTest", "scopeKind": "class", "description": "unavailable"}, {"name": "~ServerMock()", "scope": "ServerMock", "scopeKind": "class", "description": "unavailable"}], "calls": ["EXPECT_CALL(*p_powerManagerHalMock, PLAT_DS_INIT())", "EXPECT_CALL(*p_powerManagerHalMock, PLAT_INIT())", "EXPECT_CALL(*p_powerManagerHalMock, PLAT_API_SetWakeupSrc())", "ON_CALL(*p_rfcApiImplMock, getRFCParameter())", "EXPECT_CALL(*p_mfrMock, mfrSetTempThresholds())", "EXPECT_CALL(*p_powerManagerHalMock, PLAT_API_GetPowerState())", "EXPECT_CALL(*p_powerManagerHalMock, PLAT_API_SetPowerState())", "EXPECT_CALL(*p_mfrMock, mfrGetTemperature())", "ActivateService()", "DeactivateService()", "InvokeServiceMethod()"], "search-terms": ["Analytics", "sendEvent", "eventMapping", "mock server", "test fixture", "L2Tests", "event queuing", "event mapping", "system interaction", "socket communication"], "state": 2, "file_id": 7201, "knowledge_revision": 14586, "git_revision": "", "ctags": [{"_type": "tag", "name": "ANALYTICSL2TEST_CALLSIGN", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^#define ANALYTICSL2TEST_CALLSIGN /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "ANALYTICS_CALLSIGN", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^#define ANALYTICS_CALLSIGN /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "AnalyticsTest", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^AnalyticsTest::AnalyticsTest()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "AnalyticsTest", "scopeKind": "class"}, {"_type": "tag", "name": "AnalyticsTest", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^class AnalyticsTest : public L2TestMocks {$/", "file": true, "language": "C++", "kind": "class"}, {"_type": "tag", "name": "AwaitData", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^    string AwaitData(uint32_t timeoutSec, string errCodeResp = \"200 OK\")$/", "file": true, "language": "C++", "typeref": "typename:string", "kind": "function", "signature": "(uint32_t timeoutSec,string errCodeResp=\"200 OK\")", "scope": "ServerMock", "scopeKind": "class"}, {"_type": "tag", "name": "EVENTS_MAP", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^#define EVENTS_MAP /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "JSON_TIMEOUT", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^#define JSON_TIMEOUT /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "SERVER_IP", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^#define SERVER_IP /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "SERVER_PORT", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^#define SERVER_PORT /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "SERVER_TIMEOUT_SEC", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^#define SERVER_TIMEOUT_SEC /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "ServerMock", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^    ServerMock()$/", "file": true, "language": "C++", "kind": "function", "signature": "()", "scope": "ServerMock", "scopeKind": "class"}, {"_type": "tag", "name": "ServerMock", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^class ServerMock {$/", "file": true, "language": "C++", "kind": "class"}, {"_type": "tag", "name": "Start", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^    bool Start()$/", "file": true, "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "()", "scope": "ServerMock", "scopeKind": "class"}, {"_type": "tag", "name": "TEST_F", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^TEST_F(AnalyticsTest, EventsMapping)$/", "language": "C++", "kind": "function", "signature": "(AnalyticsTest,EventsMapping)"}, {"_type": "tag", "name": "TEST_F", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^TEST_F(AnalyticsTest, SendAndReceiveSignleEventQueued)$/", "language": "C++", "kind": "function", "signature": "(AnalyticsTest,SendAndReceiveSignleEventQueued)"}, {"_type": "tag", "name": "TEST_LOG", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^#define TEST_LOG(/", "file": true, "language": "C++", "kind": "macro", "signature": "(x,...)"}, {"_type": "tag", "name": "__anondaf063500102", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^      [](char* pcCallerID, const char* pcParameterName, RFC_ParamData_t* pstParamData) {$/", "file": true, "language": "C++", "kind": "function", "signature": "(char* pcCallerID, const char* pcParameterName, RFC_ParamData_t* pstParamData) ", "scope": "AnalyticsTest::AnalyticsTest", "scopeKind": "function"}, {"_type": "tag", "name": "__anondaf063500202", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^      [](int high, int critical) {$/", "file": true, "language": "C++", "kind": "function", "signature": "(int high, int critical) ", "scope": "AnalyticsTest::AnalyticsTest", "scopeKind": "function"}, {"_type": "tag", "name": "__anondaf063500302", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^      [](PWRMgr_PowerState_t* powerState) {$/", "file": true, "language": "C++", "kind": "function", "signature": "(PWRMgr_PowerState_t* powerState) ", "scope": "AnalyticsTest::AnalyticsTest", "scopeKind": "function"}, {"_type": "tag", "name": "__anondaf063500402", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^      [](PWRMgr_PowerState_t powerState) {$/", "file": true, "language": "C++", "kind": "function", "signature": "(PWRMgr_PowerState_t powerState) ", "scope": "AnalyticsTest::AnalyticsTest", "scopeKind": "function"}, {"_type": "tag", "name": "__anondaf063500502", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^           [&](mfrTemperatureState_t* curState, int* curTemperature, int* wifiTemperature) {$/", "file": true, "language": "C++", "kind": "function", "signature": "(mfrTemperatureState_t* curState, int* curTemperature, int* wifiTemperature) ", "scope": "AnalyticsTest::AnalyticsTest", "scopeKind": "function"}, {"_type": "tag", "name": "gPipeBuffer", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^char gPipeBuffer[4 * 1024];$/", "language": "C++", "typeref": "typename:char[]", "kind": "variable"}, {"_type": "tag", "name": "mAddress", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^    struct sockaddr_in mAddress;$/", "file": true, "language": "C++", "typeref": "struct:sockaddr_in", "kind": "member", "scope": "ServerMock", "scopeKind": "class"}, {"_type": "tag", "name": "mSocket", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^    int mSocket;$/", "file": true, "language": "C++", "typeref": "typename:int", "kind": "member", "scope": "ServerMock", "scopeKind": "class"}, {"_type": "tag", "name": "~AnalyticsTest", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^AnalyticsTest::~AnalyticsTest()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "AnalyticsTest", "scopeKind": "class"}, {"_type": "tag", "name": "~ServerMock", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "pattern": "/^    ~ServerMock()$/", "file": true, "language": "C++", "kind": "function", "signature": "()", "scope": "ServerMock", "scopeKind": "class"}], "hash": "ba765394f9ac05126d571a7a3e35e7de", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/Tests/L2Tests/tests/Analytics_L2Test.cpp", "fields": [{"name": "char[] gPipeBuffer", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "struct:sockaddr_in mAddress", "scope": "ServerMock", "scopeKind": "class", "description": "unavailable"}, {"name": "int mSocket", "scope": "ServerMock", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"14586": ""}]}