{"is_source_file": true, "format": "C++", "description": "This source file implements the client for interacting with the Permissions gRPC service, including methods for enumerating, getting, granting, setting, revoking, deleting, authorizing, and managing permissions, as well as fetching tokens and registered permissions.", "external_files": ["PermissionsClient.h", "<algorithm>", "<utility>", "<grpcpp/security/credentials.h>", "UtilsLogging.h"], "external_methods": ["grpc::CreateChannel", "grpc::InsecureChannelCredentials", "grpc::SslCredentials", "MapGrpcStatusToCore::ErrorCode", "LOGINFO", "LOGERR", "LOGWARN"], "published": ["PermissionsClient"], "classes": [{"name": "PermissionsClient", "description": "Client class for communicating with the Permissions gRPC service, providing methods to manage permissions and tokens."}], "methods": [{"name": "PermissionsClient::PermissionsClient", "description": "Constructor initializing the client with endpoint and TLS option."}, {"name": "PermissionsClient::~PermissionsClient", "description": "Destructor for cleanup."}, {"name": "PermissionsClient::Endpoint", "description": "Returns the server endpoint string."}, {"name": "PermissionsClient::CreateChannel", "description": "Two overloads creating a gRPC channel with either TLS or credentials."}, {"name": "PermissionsClient::EnumeratePermissions", "description": "Requests the list of permissions for an app with filters."}, {"name": "PermissionsClient::Get", "description": "Retrieves the application's permissions."}, {"name": "PermissionsClient::Grant", "description": "Grants permissions to an app."}, {"name": "PermissionsClient::Set", "description": "Overrides permissions for an app."}, {"name": "PermissionsClient::Revoke", "description": "Revokes permissions from an app."}, {"name": "PermissionsClient::Delete", "description": "Deletes an app's permissions."}, {"name": "PermissionsClient::Authorize", "description": "Authorizes and retrieves permissions for a session token."}, {"name": "PermissionsClient::GetAllForApp", "description": "Retrieves all permissions for a specific app."}, {"name": "PermissionsClient::GetAllAppKeys", "description": "Retrieves all application keys."}, {"name": "PermissionsClient::GetThorToken", "description": "Fetches a Thor token for content access."}, {"name": "PermissionsClient::GetRegisteredPermissions", "description": "Gets registered permissions."}, {"name": "PermissionsClient::RegisterPermissions", "description": "Registers a list of permissions."}, {"name": "PermissionsClient::DeleteRegisteredPermission", "description": "Deletes a registered permission."}, {"name": "uint32_t Authorize(const std::string & sessionToken,const std::vector<std::string> & filters,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::string & partnerId,std::vector<std::string> & outPermissions) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "std::shared_ptr<grpc::Channel> CreateChannel(const std::string & endpoint,const std::shared_ptr<grpc::ChannelCredentials> & creds)", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "std::shared_ptr<grpc::Channel> CreateChannel(const std::string & endpoint,bool useTls)", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "uint32_t Delete(const std::string & appId,const std::string & partnerId,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "uint32_t DeleteRegisteredPermission(const ottx::permission::Permission & permission,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::string & partnerId) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string Endpoint() const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "uint32_t EnumeratePermissions(const std::string & appId,const std::string & partnerId,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::vector<std::string> & filters,std::vector<std::string> & outPermissions) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "uint32_t Get(const std::string & appId,const std::string & partnerId,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,ottx::permission::ApplicationPermissions & outAppPermissions) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "uint32_t GetAllAppKeys(const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::string & partnerId,std::vector<ottx::permission::AppKeys> & outKeys) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "uint32_t GetAllForApp(const std::string & app,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::string & partnerId,std::vector<ottx::permission::ApplicationPermissions> & outList) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "uint32_t GetRegisteredPermissions(const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::string & partnerId,std::vector<ottx::permission::Permission> & outPermissions) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "uint32_t GetThorToken(const std::string & app,const std::string & contentProvider,const std::string & deviceSessionId,const std::string & appSessionId,const std::string & tokenMode,int32_t ttl,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::string & partnerId,std::string & outToken) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "uint32_t Grant(const std::string & appId,const std::string & partnerId,const std::vector<std::string> & bundles,const std::vector<std::string> & permissions,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,ottx::permission::ApplicationPermissions & outAppPermissions) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "uint32_t MapGrpcStatusToCore(const grpc::Status & status)", "scope": "WPEFramework::Plugin::__anonc7a8cc920111", "scopeKind": "namespace", "description": "unavailable"}, {"name": "PermissionsClient(const std::string & endpoint,bool useTls)", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "PermissionsClient(const std::string & endpoint,std::shared_ptr<grpc::ChannelCredentials> creds)", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "uint32_t RegisterPermissions(const std::vector<ottx::permission::Permission> & permissions,bool replaceAll,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::string & partnerId) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "uint32_t Revoke(const std::string & appId,const std::string & partnerId,const std::vector<std::string> & bundles,const std::vector<std::string> & permissions,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,ottx::permission::ApplicationPermissions & outAppPermissions) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "uint32_t Set(const std::string & appId,const std::string & partnerId,const std::vector<std::string> & bundles,const std::vector<std::string> & includes,const std::vector<std::string> & excludes,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,ottx::permission::ApplicationPermissions & outAppPermissions) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class", "description": "unavailable"}, {"name": "void SetCommonMetadata(grpc::ClientContext & ctx,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::string & partnerId)", "scope": "WPEFramework::Plugin::__anonc7a8cc920111", "scopeKind": "namespace", "description": "unavailable"}], "calls": ["CreateChannel", "SetCommonMetadata", "MapGrpcStatusToCore", "LOGINFO", "LOGERR", "grpc::Stub::EnumeratePermissions", "grpc::Stub::Get", "grpc::Stub::Grant", "grpc::Stub::Set", "grpc::Stub::Revoke", "grpc::Stub::Delete", "grpc::Stub::Authorize", "grpc::Stub::GetAllForApp", "grpc::Stub::GetAllAppKeys", "grpc::Stub::GetThorToken", "grpc::Stub::GetRegisteredPermissions", "grpc::Stub::RegisterPermissions", "grpc::Stub::DeleteRegisteredPermission"], "search-terms": ["PermissionsClient", "gRPC Permission Service", "Application Permissions", "ThorToken", "GetRegisteredPermissions", "RegisterPermissions", "PermissionsClient.cpp"], "state": 2, "file_id": 8211, "knowledge_revision": 16408, "git_revision": "2bb90ce849df604d6efd3e7b423ec8982aaac343", "revision_history": [{"16406": "2bb90ce849df604d6efd3e7b423ec8982aaac343"}, {"16407": "2bb90ce849df604d6efd3e7b423ec8982aaac343"}, {"16408": "2bb90ce849df604d6efd3e7b423ec8982aaac343"}], "ctags": [{"_type": "tag", "name": "Authorize", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    uint32_t PermissionsClient::Authorize(const std::string& sessionToken,$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & sessionToken,const std::vector<std::string> & filters,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::string & partnerId,std::vector<std::string> & outPermissions) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "CreateChannel", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    std::shared_ptr<grpc::Channel> PermissionsClient::CreateChannel($/", "language": "C++", "typeref": "typename:std::shared_ptr<grpc::Channel>", "kind": "function", "signature": "(const std::string & endpoint,const std::shared_ptr<grpc::ChannelCredentials> & creds)", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "CreateChannel", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    std::shared_ptr<grpc::Channel> PermissionsClient::CreateChannel(const std::string& endpoint,/", "language": "C++", "typeref": "typename:std::shared_ptr<grpc::Channel>", "kind": "function", "signature": "(const std::string & endpoint,bool useTls)", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "Delete", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    uint32_t PermissionsClient::Delete(const std::string& appId,$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & appId,const std::string & partnerId,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "DeleteRegisteredPermission", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    uint32_t PermissionsClient::DeleteRegisteredPermission(const ottx::permission::Permission& p/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const ottx::permission::Permission & permission,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::string & partnerId) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "Endpoint", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    std::string PermissionsClient::Endpoint() const {$/", "language": "C++", "typeref": "typename:std::string", "kind": "function", "signature": "() const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "EnumeratePermissions", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    uint32_t PermissionsClient::EnumeratePermissions(const std::string& appId,$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & appId,const std::string & partnerId,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::vector<std::string> & filters,std::vector<std::string> & outPermissions) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "Get", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    uint32_t PermissionsClient::Get(const std::string& appId,$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & appId,const std::string & partnerId,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,ottx::permission::ApplicationPermissions & outAppPermissions) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "GetAllAppKeys", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    uint32_t PermissionsClient::GetAllAppKeys(const std::string& bearerToken,$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::string & partnerId,std::vector<ottx::permission::AppKeys> & outKeys) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "GetAllForApp", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    uint32_t PermissionsClient::GetAllForApp(const std::string& app,$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & app,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::string & partnerId,std::vector<ottx::permission::ApplicationPermissions> & outList) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "GetRegisteredPermissions", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    uint32_t PermissionsClient::GetRegisteredPermissions(const std::string& bearerToken,$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::string & partnerId,std::vector<ottx::permission::Permission> & outPermissions) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "GetThorToken", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    uint32_t PermissionsClient::GetThorToken(const std::string& app,$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & app,const std::string & contentProvider,const std::string & deviceSessionId,const std::string & appSessionId,const std::string & tokenMode,int32_t ttl,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::string & partnerId,std::string & outToken) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "Grant", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    uint32_t PermissionsClient::Grant(const std::string& appId,$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & appId,const std::string & partnerId,const std::vector<std::string> & bundles,const std::vector<std::string> & permissions,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,ottx::permission::ApplicationPermissions & outAppPermissions) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "MapGrpcStatusToCore", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^        inline uint32_t MapGrpcStatusToCore(const grpc::Status& status) {$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const grpc::Status & status)", "scope": "WPEFramework::Plugin::__anonc7a8cc920111", "scopeKind": "namespace"}, {"_type": "tag", "name": "PermissionsClient", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    PermissionsClient::PermissionsClient(const std::string& endpoint, bool useTls)$/", "language": "C++", "kind": "function", "signature": "(const std::string & endpoint,bool useTls)", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "PermissionsClient", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    PermissionsClient::PermissionsClient(const std::string& endpoint, std::shared_ptr<grpc::Chan/", "language": "C++", "kind": "function", "signature": "(const std::string & endpoint,std::shared_ptr<grpc::ChannelCredentials> creds)", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^namespace Plugin {$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "RegisterPermissions", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    uint32_t PermissionsClient::RegisterPermissions(const std::vector<ottx::permission::Permissi/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::vector<ottx::permission::Permission> & permissions,bool replaceAll,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::string & partnerId) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "Revoke", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    uint32_t PermissionsClient::Revoke(const std::string& appId,$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & appId,const std::string & partnerId,const std::vector<std::string> & bundles,const std::vector<std::string> & permissions,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,ottx::permission::ApplicationPermissions & outAppPermissions) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "Set", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    uint32_t PermissionsClient::Set(const std::string& appId,$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & appId,const std::string & partnerId,const std::vector<std::string> & bundles,const std::vector<std::string> & includes,const std::vector<std::string> & excludes,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,ottx::permission::ApplicationPermissions & outAppPermissions) const", "scope": "WPEFramework::Plugin::PermissionsClient", "scopeKind": "class"}, {"_type": "tag", "name": "SetCommonMetadata", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^        inline void SetCommonMetadata(grpc::ClientContext& ctx,$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(grpc::ClientContext & ctx,const std::string & bearerToken,const std::string & deviceId,const std::string & accountId,const std::string & partnerId)", "scope": "WPEFramework::Plugin::__anonc7a8cc920111", "scopeKind": "namespace"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^namespace WPEFramework {$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "__anonc7a8cc920111", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp", "pattern": "/^    namespace {$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework::Plugin", "scopeKind": "namespace"}], "hash": "a7d406d274cf5fb044164ca5651e557e", "format-version": 4, "code-base-name": "app-gateway2", "filename": "app-gateway/OttServices/ProtoImplementations/ThorPermissions/PermissionsClient.cpp"}