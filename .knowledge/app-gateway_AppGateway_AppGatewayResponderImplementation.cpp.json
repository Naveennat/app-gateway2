{"is_source_file": true, "format": "C++", "description": "This file contains the implementation of the AppGatewayResponderImplementation class, which manages WebSocket connections, handles authentication, message dispatching, and notification handling for an app gateway component within the WPEFramework. It includes methods for configuring, initializing WebSocket server, handling messages, and managing connection states.", "external_files": ["<string>", "<plugins/JSONRPC.h>", "<plugins/IShell.h>", "AppGatewayResponderImplementation.h", "<interfaces/IAppGateway.h>", "UtilsLogging.h", "UtilsConnections.h", "UtilsCallsign.h", "<interfaces/IAppNotifications.h>"], "external_methods": ["Core::JSON::Error::Message", "Core::NodeId::NodeId", "Core::WorkerPool::Instance", "Core::WorkerPool::Submit", "Core::ERROR_NONE", "Core::hresult", "WebSocketConnectionManager::Config::FromString", "WebSocketConnectionManager::Start", "mService->ConfigLine", "mService->QueryInterfaceByCallsign", "mService->Release", "mWsManager.SetMessageHandler", "mWsManager.SetAuthHandler", "mWsManager.SetDisconnectHandler", "mWsManager.Start", "mWsManager.Close", "mResolver->Resolve", "mAppIdRegistry.Get", "mAppIdRegistry.Add", "mAppIdRegistry.Remove", "mService->QueryInterfaceByCallsign<Exchange::IAppNotifications>", "appNotifications->Cleanup", "appNotifications->Release", "Core::SafeSyncType<Core::CriticalSection>", "Core::CriticalSection", "LOGINFO", "LOGERR", "LOGTRACE", "Core::IWorkerPool::Instance", "WsMsgJob::Create", "ConnectionStatusNotificationJob::Create", "RespondJob::Create", "EmitJob::Create", "RequestJob::Create"], "published": ["Configure", "Respond", "Emit", "Request", "GetGatewayConnectionContext", "Register", "Unregister"], "classes": [{"name": "AppGatewayResponderImplementation", "description": "Implements the WebSocket server for app gateway, manages connections, authentication, message dispatch, and notifications."}], "methods": [{"name": "uint32_t Configure(PluginHost::IShell * shell)", "description": "Sets up the responder with the shell, initializes WebSocket server.", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"name": "uint32_t InitializeWebsocket()", "description": "Configures and starts the WebSocket server, sets up message, auth, and disconnect handlers.", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"name": "Core::hresult Respond(const Context & context,const string & payload)", "description": "Handles incoming responses by submitting a respond job.", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"name": "Core::hresult Emit(const Context & context,const string & method,const string & payload)", "description": "Sends messages to clients by submitting an emit job.", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"name": "Core::hresult Request(const uint32_t connectionId,const uint32_t id,const string & method,const string & params)", "description": "Handles requests from clients, submits a request job.", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"name": "Core::hresult GetGatewayConnectionContext(const uint32_t connectionId,const string & contextKey,string & contextValue)", "description": "Retrieves context information for a connection (currently a stub).", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"name": "void DispatchWsMsg(const std::string & method,const std::string & params,const uint32_t requestId,const uint32_t connectionId)", "description": "Dispatches incoming WebSocket messages based on app ID and resolves the calls.", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"name": "Core::hresult Register(Exchange::IAppGatewayResponder::INotification * notification)", "description": "Registers a notification callback for connection status changes.", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"name": "Core::hresult Unregister(Exchange::IAppGatewayResponder::INotification * notification)", "description": "Unregisters a notification callback.", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"name": "void OnConnectionStatusChanged(const string & appId,const uint32_t connectionId,const bool connected)", "description": "Notifies registered observers about app connection state changes.", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"name": "AppGatewayResponderImplementation()", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "__anon414b7c560102(const std::string &method, const std::string &params, const int requestId, const uint32_t connectionId)", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation::InitializeWebsocket", "scopeKind": "function", "description": "unavailable"}, {"name": "bool __anon414b7c560202(const uint32_t connectionId, const std::string &token)", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation::InitializeWebsocket", "scopeKind": "function", "description": "unavailable"}, {"name": "__anon414b7c560302(const uint32_t connectionId)", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation::InitializeWebsocket", "scopeKind": "function", "description": "unavailable"}, {"name": "~AppGatewayResponderImplementation()", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class", "description": "unavailable"}], "calls": ["Core::WorkerPool::Instance", "Core::WorkerPool::Submit", "mResolver->Resolve", "mAppIdRegistry.Get", "mAppIdRegistry.Add", "mAppIdRegistry.Remove", "mService->QueryInterfaceByCallsign", "mService->Release", "mWsManager.SetMessageHandler", "mWsManager.SetAuthHandler", "mWsManager.SetDisconnectHandler", "mWsManager.Start", "mWsManager.Close", "mResolver->Resolve", "mService->QueryInterfaceByCallsign<Exchange::IAppNotifications>", "appNotifications->Cleanup", "appNotifications->Release", "LOGINFO", "LOGERR", "LOGTRACE"], "search-terms": ["AppGatewayResponderImplementation", "WebSocket", "Authentication", "Connection Management", "Message Dispatch", "Notifications", "Registry", "Connect", "Disconnect", "Resolve"], "state": 2, "file_id": 9286, "knowledge_revision": 18133, "git_revision": "7f2d1094fc5c8c9d73593056f6b93be995051df2", "revision_history": [{"18109": "7f2d1094fc5c8c9d73593056f6b93be995051df2"}, {"18133": "7f2d1094fc5c8c9d73593056f6b93be995051df2"}], "ctags": [{"_type": "tag", "name": "APPGATEWAY_SOCKET_ADDRESS", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^#define APPGATEWAY_SOCKET_ADDRESS /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "AppGatewayResponderImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^        AppGatewayResponderImplementation::AppGatewayResponderImplementation()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Configure", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^        uint32_t AppGatewayResponderImplementation::Configure(PluginHost::IShell *shell)$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(PluginHost::IShell * shell)", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "DEFAULT_CONFIG_PATH", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^#define DEFAULT_CONFIG_PATH /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "DispatchWsMsg", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^        void AppGatewayResponderImplementation::DispatchWsMsg(const std::string &method,$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const std::string & method,const std::string & params,const uint32_t requestId,const uint32_t connectionId)", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Emit", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^        Core::hresult AppGatewayResponderImplementation::Emit(const Context& context \\/* @in *\\//", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const Context & context,const string & method,const string & payload)", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "GetGatewayConnectionContext", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^        Core::hresult AppGatewayResponderImplementation::GetGatewayConnectionContext(const uint3/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const uint32_t connectionId,const string & contextKey,string & contextValue)", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "InitializeWebsocket", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^        uint32_t AppGatewayResponderImplementation::InitializeWebsocket(){$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "OnConnectionStatusChanged", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^        void AppGatewayResponderImplementation::OnConnectionStatusChanged(const string& appId, c/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const string & appId,const uint32_t connectionId,const bool connected)", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^    namespace Plugin$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "Register", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^        Core::hresult AppGatewayResponderImplementation::Register(Exchange::IAppGatewayResponder/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(Exchange::IAppGatewayResponder::INotification * notification)", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Request", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^        Core::hresult AppGatewayResponderImplementation::Request(const uint32_t connectionId \\/*/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const uint32_t connectionId,const uint32_t id,const string & method,const string & params)", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Respond", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^        Core::hresult AppGatewayResponderImplementation::Respond(const Context& context, const s/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const Context & context,const string & payload)", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Unregister", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^        Core::hresult AppGatewayResponderImplementation::Unregister(Exchange::IAppGatewayRespond/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(Exchange::IAppGatewayResponder::INotification * notification)", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^namespace WPEFramework$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "__anon414b7c560102", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^                {$/", "file": true, "language": "C++", "kind": "function", "signature": "(const std::string &method, const std::string &params, const int requestId, const uint32_t connectionId) ", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation::InitializeWebsocket", "scopeKind": "function"}, {"_type": "tag", "name": "__anon414b7c560202", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^                {$/", "file": true, "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const uint32_t connectionId, const std::string &token) ", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation::InitializeWebsocket", "scopeKind": "function"}, {"_type": "tag", "name": "__anon414b7c560302", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^                {$/", "file": true, "language": "C++", "kind": "function", "signature": "(const uint32_t connectionId) ", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation::InitializeWebsocket", "scopeKind": "function"}, {"_type": "tag", "name": "~AppGatewayResponderImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGatewayResponderImplementation.cpp", "pattern": "/^        AppGatewayResponderImplementation::~AppGatewayResponderImplementation()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::AppGatewayResponderImplementation", "scopeKind": "class"}], "hash": "a00a6fed4cd48bd2e709c67786517b0e", "format-version": 4, "code-base-name": "app-gateway2", "filename": "app-gateway/AppGateway/AppGatewayResponderImplementation.cpp"}