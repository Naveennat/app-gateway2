{"is_source_file": true, "format": "C++", "description": "This file implements the SystemTime class, providing functionality to retrieve and monitor system time, time zones, and related transitions via JSON RPC calls, environment variables, and system commands. It handles event-driven updates and maintains internal state related to time quality and timezone transitions.", "external_files": ["SystemTime.h", "UtilsLogging.h", "secure_wrapper.h"], "external_methods": ["LOGINFO", "LOGERR", "popen", "pclose", "strptime", "timegm", "getenv", "Core::ERROR_NONE", "Core::SystemInfo::SetEnvironment"], "published": ["GetTimeZoneOffset", "IsSystemTimeAvailable"], "classes": [{"name": "SystemTime", "description": "Implements system time retrieval, timezone transition handling, and event monitoring within the WPEFramework plugin architecture."}], "methods": [{"name": "bool IsSystemTimeAvailable()", "description": "Returns whether the system time is available, based on internal state updated via events and system calls.", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"name": "ISystemTime::TimeZoneAccuracy GetTimeZoneOffset(int32_t & offsetSec)", "description": "Retrieves the current timezone offset in seconds and accuracy level.", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"name": "void CreateSystemLink()", "description": "Initializes the JSON RPC link for interacting with the system service.", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"name": "void SubscribeForEvents()", "description": "Subscribes to system time and timezone change events over JSON RPC.", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"name": "void UpdateTimeStatus()", "description": "Fetches and updates internal system time quality status.", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"name": "void UpdateTimeZone()", "description": "Retrieves and parses the current timezone and accuracy information from the system.", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"name": "std::pair<ISystemTime::TimeZoneAccuracy,int32_t> ParseTimeZone()", "description": "Analyzes the stored timezone and transition map to determine current timezone offset and accuracy.", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"name": "void PopulateTimeZoneTransitionMap()", "description": "Uses 'zdump' to gather timezone transition data and populate the transition map.", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"name": "void EventLoop()", "description": "Main loop processing queued events for system time and timezone updates, and handling shutdown.", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"name": "SystemTime(PluginHost::IShell * shell)", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class", "description": "unavailable"}, {"name": "{ return !mQueue.empty(); }); __anon8cfe746a0102", "scope": "WPEFramework::Plugin::SystemTime::EventLoop", "scopeKind": "function", "description": "unavailable"}, {"name": "void onTimeStatusChanged(const JsonObject & parameters)", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class", "description": "unavailable"}, {"name": "void onTimeZoneDSTChanged(const JsonObject & parameters)", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class", "description": "unavailable"}, {"name": "~SystemTime()", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class", "description": "unavailable"}], "calls": ["mSystemLink->Invoke<JsonObject, JsonObject>", "mSystemLink->Subscribe<JsonObject>", "mSystemLink->Unsubscribe", "QueryInterfaceByCallsign<PluginHost::IAuthenticate>", "popen", "fgets", "pclose", "sscanf", "strptime", "timegm", "time", "LOGINFO", "LOGERR"], "search-terms": ["SystemTime", "timezone transition", "zdump parsing", "JSONRPC link", "TimeZoneAccuracy", "system time status", "calculate timezone offset"], "state": 2, "file_id": 337, "knowledge_revision": 699, "git_revision": "", "ctags": [{"_type": "tag", "name": "CreateSystemLink", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^        void SystemTime::CreateSystemLink()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"_type": "tag", "name": "EventLoop", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^        void SystemTime::EventLoop()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"_type": "tag", "name": "GetTimeZoneOffset", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^        ISystemTime::TimeZoneAccuracy SystemTime::GetTimeZoneOffset(int32_t &offsetSec)$/", "language": "C++", "typeref": "typename:ISystemTime::TimeZoneAccuracy", "kind": "function", "signature": "(int32_t & offsetSec)", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"_type": "tag", "name": "IsSystemTimeAvailable", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^        bool SystemTime::IsSystemTimeAvailable()$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"_type": "tag", "name": "JSONRPC_THUNDER_TIMEOUT", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^#define JSONRPC_THUNDER_TIMEOUT /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "ParseTimeZone", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^        std::pair<ISystemTime::TimeZoneAccuracy, int32_t> SystemTime::ParseTimeZone()$/", "language": "C++", "typeref": "typename:std::pair<ISystemTime::TimeZoneAccuracy,int32_t>", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^    namespace Plugin$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "PopulateTimeZoneTransitionMap", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^        void SystemTime::PopulateTimeZoneTransitionMap()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"_type": "tag", "name": "SYSTEM_CALLSIGN", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^#define SYSTEM_CALLSIGN /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "SubscribeForEvents", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^        void SystemTime::SubscribeForEvents()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"_type": "tag", "name": "SystemTime", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^        SystemTime::SystemTime(PluginHost::IShell *shell) : mQueueLock(),$/", "language": "C++", "kind": "function", "signature": "(PluginHost::IShell * shell)", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"_type": "tag", "name": "THUNDER_ACCESS_DEFAULT_VALUE", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^#define THUNDER_ACCESS_DEFAULT_VALUE /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "TIME_QUALITY_GOOD", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^        const std::string TIME_QUALITY_GOOD{\"Good\"};$/", "language": "C++", "typeref": "typename:const std::string", "kind": "variable", "scope": "WPEFramework::Plugin", "scopeKind": "namespace"}, {"_type": "tag", "name": "TIME_QUALITY_SECURE", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^        const std::string TIME_QUALITY_SECURE{\"Secure\"};$/", "language": "C++", "typeref": "typename:const std::string", "kind": "variable", "scope": "WPEFramework::Plugin", "scopeKind": "namespace"}, {"_type": "tag", "name": "TIME_QUALITY_STALE", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^        const std::string TIME_QUALITY_STALE{\"Stale\"};$/", "language": "C++", "typeref": "typename:const std::string", "kind": "variable", "scope": "WPEFramework::Plugin", "scopeKind": "namespace"}, {"_type": "tag", "name": "UpdateTimeStatus", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^        void SystemTime::UpdateTimeStatus()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"_type": "tag", "name": "UpdateTimeZone", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^        void SystemTime::UpdateTimeZone()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^namespace WPEFramework$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "__anon8cfe746a0102", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^                                         { return !mQueue.empty(); });$/", "file": true, "language": "C++", "kind": "function", "scope": "WPEFramework::Plugin::SystemTime::EventLoop", "scopeKind": "function"}, {"_type": "tag", "name": "onTimeStatusChanged", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^        void SystemTime::onTimeStatusChanged(const JsonObject& parameters)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const JsonObject & parameters)", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"_type": "tag", "name": "onTimeZoneDSTChanged", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^        void SystemTime::onTimeZoneDSTChanged(const JsonObject& parameters)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const JsonObject & parameters)", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}, {"_type": "tag", "name": "~SystemTime", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "pattern": "/^        SystemTime::~SystemTime()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::SystemTime", "scopeKind": "class"}], "hash": "a429ff217336d533def3ad31542c03c0", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/Analytics/Implementation/SystemTime/SystemTime.cpp", "fields": [{"name": "const std::string TIME_QUALITY_GOOD", "scope": "WPEFramework::Plugin", "scopeKind": "namespace", "description": "unavailable"}, {"name": "const std::string TIME_QUALITY_SECURE", "scope": "WPEFramework::Plugin", "scopeKind": "namespace", "description": "unavailable"}, {"name": "const std::string TIME_QUALITY_STALE", "scope": "WPEFramework::Plugin", "scopeKind": "namespace", "description": "unavailable"}], "revision_history": [{"699": ""}]}