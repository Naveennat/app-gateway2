{"is_source_file": true, "format": "Rust", "description": "This file defines the `OttTokenService` struct in Rust, providing methods for obtaining OTT tokens via gRPC calls with deferred channel creation and request decoration, along with associated test mocks.", "external_files": ["thunder_ripple_sdk::ripple_sdk::log::error", "tonic::transport::Channel", "crate::gateway::appsanity_gateway::GrpcClientSession", "crate::message::DpabError", "crate::model::auth::GetOttTokenResponse", "crate::util::service_util::decorate_request_with_account_session", "ottx_protos::ott_token::ott_token_service_client::OttTokenServiceClient", "ottx_protos::ott_token::PlatformTokenRequest", "thunder_ripple_sdk::ripple_sdk::api::session::AccountSession", "tonic::Request", "uuid::Uuid"], "external_methods": ["OttTokenServiceClient::with_interceptor", "GrpcClientSession::get_grpc_channel", "decorate_request_with_account_session", "client.platform_token"], "published": ["OttTokenService", "tests"], "classes": [{"name": "OttTokenService", "description": "A service class for obtaining OTT tokens via gRPC, managing channel creation and request setup."}], "methods": [{"name": "get_channel(&self) -> Result<Channel, DpabError>", "description": "Retrieves the gRPC channel from the session, handling errors.", "scope": "OttTokenService", "scopeKind": "implementation"}, {"name": "get_ott_token( &self, account_session: &AccountSession, app_id: String, xact: String, ) -> Result<GetOttTokenResponse, DpabError>", "description": "Asynchronously requests an OTT token for a given account session, app id, and transaction id, with request decoration and error handling.", "scope": "OttTokenService", "scopeKind": "implementation"}, {"name": "new_from(grpc_client_session: Arc<Mutex<GrpcClientSession>>) -> OttTokenService", "description": "Creates a new instance of OttTokenService from a gRPC client session.", "scope": "OttTokenService", "scopeKind": "implementation"}, {"name": "mock() -> Self", "scope": "tests::OttTokenService", "scopeKind": "implementation", "description": "unavailable"}], "calls": ["self.grpc_client_session.lock().unwrap().get_grpc_channel()", "decorate_request_with_account_session", "client.platform_token"], "search-terms": ["OttTokenService", "platform_token", "get_ott_token", "GrpcClientSession", "interceptor", "decorate_request"], "state": 2, "file_id": 2596, "knowledge_revision": 5167, "git_revision": "0f87a35b32215bc8547fb583d6c84bd51f603f69", "ctags": [{"_type": "tag", "name": "OttTokenService", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^    impl Mockable for OttTokenService {$/", "language": "Rust", "kind": "implementation", "scope": "tests", "scopeKind": "module"}, {"_type": "tag", "name": "OttTokenService", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^impl OttTokenService {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "OttTokenService", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^pub struct OttTokenService {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "get_channel", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^    fn get_channel(&self) -> Result<Channel, DpabError> {$/", "language": "Rust", "kind": "method", "signature": "(&self) -> Result<Channel, DpabError>", "scope": "OttTokenService", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_ott_token", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^    pub async fn get_ott_token($/", "language": "Rust", "kind": "method", "signature": "( &self, account_session: &AccountSession, app_id: String, xact: String, ) -> Result<GetOttTokenResponse, DpabError>", "scope": "OttTokenService", "scopeKind": "implementation"}, {"_type": "tag", "name": "grpc_client_session", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^    grpc_client_session: Arc<Mutex<GrpcClientSession>>,$/", "language": "Rust", "kind": "field", "scope": "OttTokenService", "scopeKind": "struct"}, {"_type": "tag", "name": "mock", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^        fn mock() -> Self {$/", "language": "Rust", "kind": "method", "signature": "() -> Self", "scope": "tests::OttTokenService", "scopeKind": "implementation"}, {"_type": "tag", "name": "new_from", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^    pub fn new_from(grpc_client_session: Arc<Mutex<GrpcClientSession>>) -> OttTokenService {$/", "language": "Rust", "kind": "method", "signature": "(grpc_client_session: Arc<Mutex<GrpcClientSession>>) -> OttTokenService", "scope": "OttTokenService", "scopeKind": "implementation"}, {"_type": "tag", "name": "tests", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/ott_token.rs", "pattern": "/^pub mod tests {$/", "language": "Rust", "kind": "module"}], "hash": "66cd8c0fdc72d57eb27b1ccd68b762de", "format-version": 4, "code-base-name": "app-gateway2", "filename": "Supporting_Files/ripple-eos/src/service/ott_token.rs", "fields": [{"name": "grpc_client_session: Arc<Mutex<GrpcClientSession>>,", "scope": "OttTokenService", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"5167": "0f87a35b32215bc8547fb583d6c84bd51f603f69"}]}