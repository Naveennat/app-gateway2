{"is_source_file": true, "format": "Rust", "description": "This Rust source file defines a RPC trait and implementation for managing metrics context within a Ripple SDK, including serialization/deserialization of metrics context data, validation of context keys, and RPC method handlers for adding and removing context information.", "external_files": ["jsonrpsee::{core::RpcResult, proc_macros::rpc}", "serde::{Deserialize, Deserializer, Serialize}", "thunder_ripple_sdk::ripple_sdk::api::gateway::rpc_gateway_api::CallContext", "thunder_ripple_sdk::ripple_sdk::async_trait::async_trait", "crate::state::distributor_state::DistributorState"], "external_methods": ["serde_json::to_value", "MetricsContext::is_valid_key", "MetricsManagementServer::add_context", "MetricsManagementServer::remove_context"], "published": ["MetricsManagement", "MetricsManagementImpl"], "classes": [{"name": "MetricsContextParams", "description": "A struct representing parameters for metrics context, including a MetricsContext."}, {"name": "MetricsContext", "description": "A struct representing the metrics context, primarily containing an optional device session ID, with a method to validate keys."}, {"name": "MetricsContextKeys", "description": "A struct wrapping a vector of string keys, with custom deserialization for validation."}, {"name": "MetricsManagementImpl", "description": "A struct implementing the MetricsManagement RPC server trait, managing metrics context via a DistributorState."}], "methods": [{"name": "MetricsContext::is_valid_key", "description": "Checks if the provided key exists among the fields of the current MetricsContext instance."}, {"name": "validate_metrics_context_keys<'de, D>(deserializer: D) -> Result<Vec<String>, D::Error> where D: Deserializer<'de>,", "description": "Custom deserializer for MetricsContextKeys that validates keys during deserialization.", "scope": "", "scopeKind": ""}, {"name": "MetricsManagementImpl::new", "description": "Constructor for MetricsManagementImpl, initializing with a DistributorState."}, {"name": "MetricsManagementServer::add_context", "description": "RPC method to add a metrics context, updating the session ID if provided."}, {"name": "MetricsManagementServer::remove_context", "description": "RPC method to remove metrics context keys, handling specific keys like 'deviceSessionId'."}, {"name": "add_context( &self, _ctx: CallContext, context_params: MetricsContextParams, ) -> RpcResult<()>", "scope": "MetricsManagementImpl", "scopeKind": "implementation", "description": "unavailable"}, {"name": "add_context( &self, ctx: CallContext, context_params: MetricsContextParams, ) -> RpcResult<()>", "scope": "MetricsManagement", "scopeKind": "interface", "description": "unavailable"}, {"name": "is_valid_key(&self, key: &str) -> bool", "scope": "MetricsContext", "scopeKind": "implementation", "description": "unavailable"}, {"name": "new(state: &DistributorState) -> Self", "scope": "MetricsManagementImpl", "scopeKind": "implementation", "description": "unavailable"}, {"name": "remove_context( &self, _ctx: CallContext, request: MetricsContextKeys, ) -> RpcResult<()>", "scope": "MetricsManagementImpl", "scopeKind": "implementation", "description": "unavailable"}, {"name": "remove_context(&self, ctx: CallContext, request: MetricsContextKeys) -> RpcResult<()>", "scope": "MetricsManagement", "scopeKind": "interface", "description": "unavailable"}], "calls": ["serde_json::to_value", "MetricsContext::is_valid_key"], "search-terms": ["MetricsManagementRpc", "MetricsContext", "rpc traits", "Rust RPC implementation", "metrics context validation"], "state": 2, "file_id": 2575, "knowledge_revision": 5149, "git_revision": "0f87a35b32215bc8547fb583d6c84bd51f603f69", "ctags": [{"_type": "tag", "name": "MetricsContext", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^impl MetricsContext {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "MetricsContext", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^pub struct MetricsContext {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "MetricsContextKeys", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^pub struct MetricsContextKeys {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "MetricsContextParams", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^pub struct MetricsContextParams {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "MetricsManagement", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^pub trait MetricsManagement {$/", "language": "Rust", "kind": "interface"}, {"_type": "tag", "name": "MetricsManagementImpl", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^impl MetricsManagementImpl {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "MetricsManagementImpl", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^impl MetricsManagementServer for MetricsManagementImpl {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "MetricsManagementImpl", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^pub struct MetricsManagementImpl {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "add_context", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    async fn add_context($/", "language": "Rust", "kind": "method", "signature": "( &self, _ctx: CallContext, context_params: MetricsContextParams, ) -> RpcResult<()>", "scope": "MetricsManagementImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "add_context", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    async fn add_context($/", "language": "Rust", "kind": "method", "signature": "( &self, ctx: CallContext, context_params: MetricsContextParams, ) -> RpcResult<()>", "scope": "MetricsManagement", "scopeKind": "interface"}, {"_type": "tag", "name": "context", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    context: MetricsContext,$/", "language": "Rust", "kind": "field", "scope": "MetricsContextParams", "scopeKind": "struct"}, {"_type": "tag", "name": "device_session_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    pub device_session_id: Option<String>,$/", "language": "Rust", "kind": "field", "scope": "MetricsContext", "scopeKind": "struct"}, {"_type": "tag", "name": "is_valid_key", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    fn is_valid_key(&self, key: &str) -> bool {$/", "language": "Rust", "kind": "method", "signature": "(&self, key: &str) -> bool", "scope": "MetricsContext", "scopeKind": "implementation"}, {"_type": "tag", "name": "keys", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    pub keys: Vec<String>,$/", "language": "Rust", "kind": "field", "scope": "MetricsContextKeys", "scopeKind": "struct"}, {"_type": "tag", "name": "new", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    pub fn new(state: &DistributorState) -> Self {$/", "language": "Rust", "kind": "method", "signature": "(state: &DistributorState) -> Self", "scope": "MetricsManagementImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "remove_context", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    async fn remove_context($/", "language": "Rust", "kind": "method", "signature": "( &self, _ctx: CallContext, request: MetricsContextKeys, ) -> RpcResult<()>", "scope": "MetricsManagementImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "remove_context", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    async fn remove_context(&self, ctx: CallContext, request: MetricsContextKeys) -> RpcResult<(/", "language": "Rust", "kind": "method", "signature": "(&self, ctx: CallContext, request: MetricsContextKeys) -> RpcResult<()>", "scope": "MetricsManagement", "scopeKind": "interface"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    pub state: DistributorState,$/", "language": "Rust", "kind": "field", "scope": "MetricsManagementImpl", "scopeKind": "struct"}, {"_type": "tag", "name": "validate_metrics_context_keys", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^fn validate_metrics_context_keys<'de, D>(deserializer: D) -> Result<Vec<String>, D::Error>$/", "language": "Rust", "kind": "function", "signature": "<'de, D>(deserializer: D) -> Result<Vec<String>, D::Error> where D: Deserializer<'de>,"}], "hash": "d0f33bed488f0e41bbd788e8b484343b", "format-version": 4, "code-base-name": "app-gateway2", "filename": "Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "fields": [{"name": "pub trait MetricsManagement {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "context: MetricsContext,", "scope": "MetricsContextParams", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub device_session_id: Option<String>,", "scope": "MetricsContext", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub keys: Vec<String>,", "scope": "MetricsContextKeys", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub state: DistributorState,", "scope": "MetricsManagementImpl", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"5149": "0f87a35b32215bc8547fb583d6c84bd51f603f69"}]}