{"is_source_file": true, "format": "Rust", "description": "This file defines a Rust module for managing metrics contexts via RPC trait. It includes data structures, validation functions, and an implementation of the RPC server trait for metrics management, specifically adding and removing context related to device sessions.", "external_files": ["jsonrpsee::{core::RpcResult, proc_macros::rpc}", "serde::{Deserialize, Deserializer, Serialize}", "thunder_ripple_sdk::ripple_sdk::{api::gateway::rpc_gateway_api::CallContext, async_trait::async_trait}"], "external_methods": ["jsonrpsee_macros::rpc", "serde::Deserialize", "serde::Serialize", "serde_json::to_value", "RpcResult", "CallContext", "async_trait::async_trait"], "published": ["MetricsManagement", "MetricsManagementImpl"], "classes": [{"name": "MetricsContextParams", "description": "Data structure for parameters containing a metrics context."}, {"name": "MetricsContext", "description": "Represents a metrics context with optional device session ID and validation methods."}, {"name": "MetricsContextKeys", "description": "Struct holding a vector of key strings, with validation for allowed keys."}, {"name": "MetricsManagementImpl", "description": "Implementation of the MetricsManagement RPC server, managing metrics context for a distributor state."}], "methods": [{"name": "is_valid_key(&self, key: &str) -> bool", "description": "Checks if a given key is valid within the current MetricsContext.", "scope": "MetricsContext", "scopeKind": "implementation"}, {"name": "validate_metrics_context_keys<'de, D>(deserializer: D) -> Result<Vec<String>, D::Error> where D: Deserializer<'de>,", "description": "Custom deserializer that validates keys during deserialization of MetricsContextKeys.", "scope": "", "scopeKind": ""}, {"name": "add_context( &self, _ctx: CallContext, context_params: MetricsContextParams, ) -> RpcResult<()>", "description": "RPC method to add a metrics context, updating session ID if provided.", "scope": "MetricsManagementImpl", "scopeKind": "implementation"}, {"name": "remove_context( &self, _ctx: CallContext, request: MetricsContextKeys, ) -> RpcResult<()>", "description": "RPC method to remove a metrics context key, specifically handling 'deviceSessionId'.", "scope": "MetricsManagementImpl", "scopeKind": "implementation"}, {"name": "new(state: &DistributorState) -> Self", "description": "Constructor for MetricsManagementImpl, clones state.", "scope": "MetricsManagementImpl", "scopeKind": "implementation"}, {"name": "add_context( &self, ctx: CallContext, context_params: MetricsContextParams, ) -> RpcResult<()>", "scope": "MetricsManagement", "scopeKind": "interface", "description": "unavailable"}, {"name": "remove_context(&self, ctx: CallContext, request: MetricsContextKeys) -> RpcResult<()>", "scope": "MetricsManagement", "scopeKind": "interface", "description": "unavailable"}], "calls": ["serde_json::to_value", "self.state.metrics.update_session_id", "self.state.metrics.device_session_id.clone"], "search-terms": ["MetricsManagement", "MetricsContext", "rpc", "metricsmanagement", "deviceSessionId", "rpc_server", "MetricsContextParams"], "state": 2, "file_id": 333, "knowledge_revision": 1058, "git_revision": "046761b9656aa3448e0e16f1a3a9c084965a6b28", "ctags": [{"_type": "tag", "name": "MetricsContext", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^impl MetricsContext {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "MetricsContext", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^pub struct MetricsContext {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "MetricsContextKeys", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^pub struct MetricsContextKeys {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "MetricsContextParams", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^pub struct MetricsContextParams {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "MetricsManagement", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^pub trait MetricsManagement {$/", "language": "Rust", "kind": "interface"}, {"_type": "tag", "name": "MetricsManagementImpl", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^impl MetricsManagementImpl {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "MetricsManagementImpl", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^impl MetricsManagementServer for MetricsManagementImpl {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "MetricsManagementImpl", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^pub struct MetricsManagementImpl {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "add_context", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    async fn add_context($/", "language": "Rust", "kind": "method", "signature": "( &self, _ctx: CallContext, context_params: MetricsContextParams, ) -> RpcResult<()>", "scope": "MetricsManagementImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "add_context", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    async fn add_context($/", "language": "Rust", "kind": "method", "signature": "( &self, ctx: CallContext, context_params: MetricsContextParams, ) -> RpcResult<()>", "scope": "MetricsManagement", "scopeKind": "interface"}, {"_type": "tag", "name": "context", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    context: MetricsContext,$/", "language": "Rust", "kind": "field", "scope": "MetricsContextParams", "scopeKind": "struct"}, {"_type": "tag", "name": "device_session_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    pub device_session_id: Option<String>,$/", "language": "Rust", "kind": "field", "scope": "MetricsContext", "scopeKind": "struct"}, {"_type": "tag", "name": "is_valid_key", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    fn is_valid_key(&self, key: &str) -> bool {$/", "language": "Rust", "kind": "method", "signature": "(&self, key: &str) -> bool", "scope": "MetricsContext", "scopeKind": "implementation"}, {"_type": "tag", "name": "keys", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    pub keys: Vec<String>,$/", "language": "Rust", "kind": "field", "scope": "MetricsContextKeys", "scopeKind": "struct"}, {"_type": "tag", "name": "new", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    pub fn new(state: &DistributorState) -> Self {$/", "language": "Rust", "kind": "method", "signature": "(state: &DistributorState) -> Self", "scope": "MetricsManagementImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "remove_context", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    async fn remove_context($/", "language": "Rust", "kind": "method", "signature": "( &self, _ctx: CallContext, request: MetricsContextKeys, ) -> RpcResult<()>", "scope": "MetricsManagementImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "remove_context", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    async fn remove_context(&self, ctx: CallContext, request: MetricsContextKeys) -> RpcResult<(/", "language": "Rust", "kind": "method", "signature": "(&self, ctx: CallContext, request: MetricsContextKeys) -> RpcResult<()>", "scope": "MetricsManagement", "scopeKind": "interface"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^    pub state: DistributorState,$/", "language": "Rust", "kind": "field", "scope": "MetricsManagementImpl", "scopeKind": "struct"}, {"_type": "tag", "name": "validate_metrics_context_keys", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "pattern": "/^fn validate_metrics_context_keys<'de, D>(deserializer: D) -> Result<Vec<String>, D::Error>$/", "language": "Rust", "kind": "function", "signature": "<'de, D>(deserializer: D) -> Result<Vec<String>, D::Error> where D: Deserializer<'de>,"}], "hash": "d0f33bed488f0e41bbd788e8b484343b", "format-version": 4, "code-base-name": "app-gateway2", "filename": "Supporting_Files/ripple-eos/src/rpc/eos_metrics_management_rpc.rs", "fields": [{"name": "pub trait MetricsManagement {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "context: MetricsContext,", "scope": "MetricsContextParams", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub device_session_id: Option<String>,", "scope": "MetricsContext", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub keys: Vec<String>,", "scope": "MetricsContextKeys", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub state: DistributorState,", "scope": "MetricsManagementImpl", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"1058": "046761b9656aa3448e0e16f1a3a9c084965a6b28"}]}