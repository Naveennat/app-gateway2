{"is_source_file": true, "format": "Rust", "description": "This Rust source file implements the ThunderSessionService for managing session tokens and device information through RPC calls and websocket communication within the Thunder ecosystem. It includes functions for retrieving and setting session tokens, subscribing to session events, and handling responses related to account sessions.", "external_files": ["serde::{Deserialize, Serialize}", "thunder_ripple_sdk::client::device_operator::{DeviceCallRequest, DeviceChannelParams, DeviceOperator}", "thunder_ripple_sdk::client::thunder_client::{DefaultThunderResult, ThunderClient}", "thunder_ripple_sdk::events::thunder_event_processor::ThunderEventHandlerProvider", "thunder_ripple_sdk::ripple_sdk::{api::{device::{device_events::DeviceEventCallback, device_request::AccountToken}, session::{AccountSession, AccountSessionRequest, AccountSessionResponse, AccountSessionTokenRequest, ProvisionRequest, SessionAdjective}}, async_trait::async_trait, extn::{client::{extn_client::ExtnClient, extn_processor::{DefaultExtnStreamer, ExtnRequestProcessor, ExtnStreamProcessor, ExtnStreamer}}, extn_client_message::{ExtnMessage, ExtnResponse}}, framework::ripple_contract::RippleContract, log::{debug, error}, serde_json, tokio::sync::mpsc, utils::error::RippleError}", "super::events::comcast_thunder_event_handlers::SessionTokenChangeHandler"], "external_methods": ["serde::{Deserialize, Serialize}", "thunder_ripple_sdk::client::device_operator::{DeviceCallRequest, DeviceChannelParams, DeviceOperator}", "thunder_ripple_sdk::client::thunder_client::{DefaultThunderResult, ThunderClient}", "thunder_ripple_sdk::events::thunder_event_processor::ThunderEventHandlerProvider", "thunder_ripple_sdk::ripple_sdk::{api::{device::{device_events::DeviceEventCallback, device_request::AccountToken}, session::{AccountSession, AccountSessionRequest, AccountSessionResponse, AccountSessionTokenRequest, ProvisionRequest, SessionAdjective}}, async_trait::async_trait, extn::{client::{extn_client::ExtnClient, extn_processor::{DefaultExtnStreamer, ExtnRequestProcessor, ExtnStreamProcessor, ExtnStreamer}}, extn_client_message::{ExtnMessage, ExtnResponse}}, framework::ripple_contract::RippleContract, log::{debug, error}, serde_json, tokio::sync::mpsc, utils::error::RippleError}"], "published": ["SetSatThunderRequest", "ThunderSessionService", "thunder_getter", "thunder_setter", "get_auth_method"], "classes": [{"name": "SetSatThunderRequest", "description": "Struct representing a request to set a satellite thunder token with fields token, status, and expires.", "methods": [{"name": "get", "description": "Constructs a SetSatThunderRequest from an AccountSessionTokenRequest."}]}, {"name": "ThunderSessionService", "description": "Service class managing session tokens, device info, and event subscriptions within the Thunder ecosystem."}], "methods": [{"name": "thunder_getter( client: ThunderClient, method: String, prop: &'static str, default: &'static str, ) -> String", "description": "Performs a device call to retrieve specific property information via ThunderClient.", "scope": "", "scopeKind": ""}, {"name": "thunder_setter(client: ThunderClient, method: String, key: String, value: String) -> bool", "description": "Performs a device call to set specific properties on the device via ThunderClient.", "scope": "", "scopeKind": ""}, {"name": "get_auth_method(method: &str) -> String", "description": "Generates the fully qualified method string used in RPC calls based on a given method name.", "scope": "", "scopeKind": ""}, {"name": "contract(&self) -> RippleContract", "scope": "ThunderSessionService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "get(a_t_r: AccountSessionTokenRequest) -> SetSatThunderRequest", "scope": "SetSatThunderRequest", "scopeKind": "implementation", "description": "unavailable"}, {"name": "get_account_session(state: &ThunderState) -> Result<AccountSession, RippleError>", "scope": "ThunderSessionService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "get_client(&self) -> ExtnClient", "scope": "ThunderSessionService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "get_sat_token(state: &ThunderState) -> String", "scope": "ThunderSessionService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "get_session(state: ThunderState, request: ExtnMessage) -> bool", "scope": "ThunderSessionService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "get_session_token(state: ThunderState, request: ExtnMessage) -> bool", "scope": "ThunderSessionService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "get_state(&self) -> Self::STATE", "scope": "ThunderSessionService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "new(state: ThunderState) -> ThunderSessionService", "scope": "ThunderSessionService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "process_request( state: Self::STATE, msg: ExtnMessage, extracted_message: Self::VALUE, ) -> bool", "scope": "ThunderSessionService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "receiver(&mut self) -> mpsc::Receiver<ExtnMessage>", "scope": "ThunderSessionService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "sender(&self) -> mpsc::Sender<ExtnMessage>", "scope": "ThunderSessionService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "set_provision(state: ThunderState, session: ProvisionRequest) -> bool", "scope": "ThunderSessionService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "set_session( state: ThunderState, a_t_r: AccountSessionTokenRequest, ) -> bool", "scope": "ThunderSessionService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "setup_session_handler(state: &ThunderState)", "scope": "ThunderSessionService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "subscribe(state: ThunderState, request: ExtnMessage) -> bool", "scope": "ThunderSessionService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "test_thunder_get_service_access_token()", "scope": "contract_tests", "scopeKind": "module", "description": "unavailable"}, {"name": "test_thunder_get_session_partner_id()", "scope": "contract_tests", "scopeKind": "module", "description": "unavailable"}, {"name": "test_thunder_get_session_service_account_id()", "scope": "contract_tests", "scopeKind": "module", "description": "unavailable"}, {"name": "test_thunder_get_session_xdeviceid()", "scope": "contract_tests", "scopeKind": "module", "description": "unavailable"}, {"name": "test_thunder_set_partner_id()", "scope": "contract_tests", "scopeKind": "module", "description": "unavailable"}, {"name": "test_thunder_set_service_access_token()", "scope": "contract_tests", "scopeKind": "module", "description": "unavailable"}, {"name": "test_thunder_set_service_account_id()", "scope": "contract_tests", "scopeKind": "module", "description": "unavailable"}, {"name": "test_thunder_set_xdevice_id()", "scope": "contract_tests", "scopeKind": "module", "description": "unavailable"}], "calls": ["client.call", "serde_json::from_value", "serde_json::to_string", "state.get_thunder_client", "state.get_client", "client.call"], "search-terms": ["thunder session token", "extn RPC session", "ThunderState", "AccountSession", "setServiceAccessToken", "ThunderSessionService", "extn_response", "DeviceCallRequest"], "state": 2, "file_id": 304, "knowledge_revision": 1022, "git_revision": "046761b9656aa3448e0e16f1a3a9c084965a6b28", "ctags": [{"_type": "tag", "name": "STATE", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    type STATE = ThunderState;$/", "language": "Rust", "kind": "typedef", "scope": "ThunderSessionService", "scopeKind": "implementation"}, {"_type": "tag", "name": "SetSatThunderRequest", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^impl SetSatThunderRequest {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "SetSatThunderRequest", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^pub struct SetSatThunderRequest {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "ThunderSessionService", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^impl ExtnRequestProcessor for ThunderSessionService {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "ThunderSessionService", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^impl ExtnStreamProcessor for ThunderSessionService {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "ThunderSessionService", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^impl ThunderSessionService {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "ThunderSessionService", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^pub struct ThunderSessionService {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "VALUE", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    type VALUE = AccountSessionRequest;$/", "language": "Rust", "kind": "typedef", "scope": "ThunderSessionService", "scopeKind": "implementation"}, {"_type": "tag", "name": "contract", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    fn contract(&self) -> RippleContract {$/", "language": "Rust", "kind": "method", "signature": "(&self) -> RippleContract", "scope": "ThunderSessionService", "scopeKind": "implementation"}, {"_type": "tag", "name": "contract_tests", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^pub mod contract_tests {$/", "language": "Rust", "kind": "module"}, {"_type": "tag", "name": "expires", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    pub expires: u32,$/", "language": "Rust", "kind": "field", "scope": "SetSatThunderRequest", "scopeKind": "struct"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    fn get(a_t_r: AccountSessionTokenRequest) -> SetSatThunderRequest {$/", "language": "Rust", "kind": "method", "signature": "(a_t_r: AccountSessionTokenRequest) -> SetSatThunderRequest", "scope": "SetSatThunderRequest", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_account_session", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    pub async fn get_account_session(state: &ThunderState) -> Result<AccountSession, RippleError/", "language": "Rust", "kind": "method", "signature": "(state: &ThunderState) -> Result<AccountSession, RippleError>", "scope": "ThunderSessionService", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_auth_method", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^fn get_auth_method(method: &str) -> String {$/", "language": "Rust", "kind": "function", "signature": "(method: &str) -> String"}, {"_type": "tag", "name": "get_client", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    fn get_client(&self) -> ExtnClient {$/", "language": "Rust", "kind": "method", "signature": "(&self) -> ExtnClient", "scope": "ThunderSessionService", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_sat_token", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    pub async fn get_sat_token(state: &ThunderState) -> String {$/", "language": "Rust", "kind": "method", "signature": "(state: &ThunderState) -> String", "scope": "ThunderSessionService", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_session", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    async fn get_session(state: ThunderState, request: ExtnMessage) -> bool {$/", "language": "Rust", "kind": "method", "signature": "(state: ThunderState, request: ExtnMessage) -> bool", "scope": "ThunderSessionService", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_session_token", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    async fn get_session_token(state: ThunderState, request: ExtnMessage) -> bool {$/", "language": "Rust", "kind": "method", "signature": "(state: ThunderState, request: ExtnMessage) -> bool", "scope": "ThunderSessionService", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_state", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    fn get_state(&self) -> Self::STATE {$/", "language": "Rust", "kind": "method", "signature": "(&self) -> Self::STATE", "scope": "ThunderSessionService", "scopeKind": "implementation"}, {"_type": "tag", "name": "new", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    pub fn new(state: ThunderState) -> ThunderSessionService {$/", "language": "Rust", "kind": "method", "signature": "(state: ThunderState) -> ThunderSessionService", "scope": "ThunderSessionService", "scopeKind": "implementation"}, {"_type": "tag", "name": "process_request", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    async fn process_request($/", "language": "Rust", "kind": "method", "signature": "( state: Self::STATE, msg: ExtnMessage, extracted_message: Self::VALUE, ) -> bool", "scope": "ThunderSessionService", "scopeKind": "implementation"}, {"_type": "tag", "name": "receiver", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    fn receiver(&mut self) -> mpsc::Receiver<ExtnMessage> {$/", "language": "Rust", "kind": "method", "signature": "(&mut self) -> mpsc::Receiver<ExtnMessage>", "scope": "ThunderSessionService", "scopeKind": "implementation"}, {"_type": "tag", "name": "sender", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    fn sender(&self) -> mpsc::Sender<ExtnMessage> {$/", "language": "Rust", "kind": "method", "signature": "(&self) -> mpsc::Sender<ExtnMessage>", "scope": "ThunderSessionService", "scopeKind": "implementation"}, {"_type": "tag", "name": "set_provision", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    pub(crate) async fn set_provision(state: ThunderState, session: ProvisionRequest) -> bool {$/", "language": "Rust", "kind": "method", "signature": "(state: ThunderState, session: ProvisionRequest) -> bool", "scope": "ThunderSessionService", "scopeKind": "implementation"}, {"_type": "tag", "name": "set_session", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    pub(crate) async fn set_session($/", "language": "Rust", "kind": "method", "signature": "( state: ThunderState, a_t_r: AccountSessionTokenRequest, ) -> bool", "scope": "ThunderSessionService", "scopeKind": "implementation"}, {"_type": "tag", "name": "setup_session_handler", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    pub async fn setup_session_handler(state: &ThunderState) {$/", "language": "Rust", "kind": "method", "signature": "(state: &ThunderState)", "scope": "ThunderSessionService", "scopeKind": "implementation"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    state: ThunderState,$/", "language": "Rust", "kind": "field", "scope": "ThunderSessionService", "scopeKind": "struct"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    pub status: u32,$/", "language": "Rust", "kind": "field", "scope": "SetSatThunderRequest", "scopeKind": "struct"}, {"_type": "tag", "name": "streamer", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    streamer: DefaultExtnStreamer,$/", "language": "Rust", "kind": "field", "scope": "ThunderSessionService", "scopeKind": "struct"}, {"_type": "tag", "name": "subscribe", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    async fn subscribe(state: ThunderState, request: ExtnMessage) -> bool {$/", "language": "Rust", "kind": "method", "signature": "(state: ThunderState, request: ExtnMessage) -> bool", "scope": "ThunderSessionService", "scopeKind": "implementation"}, {"_type": "tag", "name": "test_thunder_get_service_access_token", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    pub async fn test_thunder_get_service_access_token() {$/", "language": "Rust", "kind": "function", "signature": "()", "scope": "contract_tests", "scopeKind": "module"}, {"_type": "tag", "name": "test_thunder_get_session_partner_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    pub async fn test_thunder_get_session_partner_id() {$/", "language": "Rust", "kind": "function", "signature": "()", "scope": "contract_tests", "scopeKind": "module"}, {"_type": "tag", "name": "test_thunder_get_session_service_account_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    pub async fn test_thunder_get_session_service_account_id() {$/", "language": "Rust", "kind": "function", "signature": "()", "scope": "contract_tests", "scopeKind": "module"}, {"_type": "tag", "name": "test_thunder_get_session_xdeviceid", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    pub async fn test_thunder_get_session_xdeviceid() {$/", "language": "Rust", "kind": "function", "signature": "()", "scope": "contract_tests", "scopeKind": "module"}, {"_type": "tag", "name": "test_thunder_set_partner_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    pub async fn test_thunder_set_partner_id() {$/", "language": "Rust", "kind": "function", "signature": "()", "scope": "contract_tests", "scopeKind": "module"}, {"_type": "tag", "name": "test_thunder_set_service_access_token", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    pub async fn test_thunder_set_service_access_token() {$/", "language": "Rust", "kind": "function", "signature": "()", "scope": "contract_tests", "scopeKind": "module"}, {"_type": "tag", "name": "test_thunder_set_service_account_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    pub async fn test_thunder_set_service_account_id() {$/", "language": "Rust", "kind": "function", "signature": "()", "scope": "contract_tests", "scopeKind": "module"}, {"_type": "tag", "name": "test_thunder_set_xdevice_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    pub async fn test_thunder_set_xdevice_id() {$/", "language": "Rust", "kind": "function", "signature": "()", "scope": "contract_tests", "scopeKind": "module"}, {"_type": "tag", "name": "thunder_getter", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^async fn thunder_getter($/", "language": "Rust", "kind": "function", "signature": "( client: ThunderClient, method: String, prop: &'static str, default: &'static str, ) -> String"}, {"_type": "tag", "name": "thunder_setter", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^async fn thunder_setter(client: ThunderClient, method: String, key: String, value: String) -> bo/", "language": "Rust", "kind": "function", "signature": "(client: ThunderClient, method: String, key: String, value: String) -> bool"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "pattern": "/^    pub token: String,$/", "language": "Rust", "kind": "field", "scope": "SetSatThunderRequest", "scopeKind": "struct"}], "hash": "92a55fa9d861689e1857eddec0ec95ef", "format-version": 4, "code-base-name": "app-gateway2", "filename": "Supporting_Files/ripple-eos/src/extn/thunder/thunder_session.rs", "fields": [{"name": "pub expires: u32,", "scope": "SetSatThunderRequest", "scopeKind": "struct", "description": "unavailable"}, {"name": "state: ThunderState,", "scope": "ThunderSessionService", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub status: u32,", "scope": "SetSatThunderRequest", "scopeKind": "struct", "description": "unavailable"}, {"name": "streamer: DefaultExtnStreamer,", "scope": "ThunderSessionService", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub token: String,", "scope": "SetSatThunderRequest", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"1022": "046761b9656aa3448e0e16f1a3a9c084965a6b28"}]}