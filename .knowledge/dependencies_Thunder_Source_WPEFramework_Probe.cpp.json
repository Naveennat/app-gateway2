{"is_source_file": true, "format": "C++", "description": "This file implements UPnP discovery logic within the WPEFramework plugin, including classes for handling discovery messages, responses, and network communication, primarily related to SSDP M-SEARCH request processing and response generation.", "external_files": ["Probe.h", "Web/TextBody.h", "Web/Request.h", "Web/Response.h"], "external_methods": ["Core::ToString", "Core::NumberType<uint32_t>.Text", "Core::Time::Now", "Core::URL::Text", "Core::NumberType<uint64_t>", "Core::ProxyPoolType", "Core::ProxyType<Web::Request>", "Core::ProxyType<Web::Response>", "Core::ProxyType<Web::TextBody>", "Core::NodeId::HostAddress", "Core::NodeId::TYPE_IPV4", "Web::Request::Deserialize", "Web::Request::ToString", "Web::Request::Body", "Web::Response::ToString", "Web::Response::Body", "Web::Signature", "validateBlob", "signBlob"], "published": ["Probe::SearchTarget"], "classes": [{"name": "Discovery", "description": "A helper class encapsulating different types of discovery messages and responses, storing textual representations of network discovery data."}, {"name": "Probe::Listener", "description": "Handles SSDP/UPnP network traffic, including receiving M-SEARCH requests, sending responses, and managing discovery message exchange."}, {"name": "Probe::Broadcaster", "description": "Processes incoming discovery responses, validates them, and reports discovered devices."}], "methods": [{"name": "Probe::WebTransform::Transform", "description": "Parses an incoming Web request to determine if it is an SSDP M-SEARCH message and deserializes it if valid."}, {"name": "Probe::Listener::Listener", "description": "Constructor that initializes network link and joins specified NodeId."}, {"name": "Probe::Listener::~Listener", "description": "Destructor that leaves the node and closes the network link."}, {"name": "Probe::Listener::LinkBody", "description": "Prepares the request body for SSDP responses."}, {"name": "Probe::Listener::Received", "description": "Handles incoming SSDP M-SEARCH requests, validates them, and initiates response if criteria match."}, {"name": "Probe::Listener::Send", "description": "Handles sending of responses and moves to the next discovery node."}, {"name": "Probe::Listener::StateChange", "description": "Handles changes in network channel state."}, {"name": "Probe::Listener::ValidRequest", "description": "Validates the signature of the incoming request, if security features are enabled."}, {"name": "Probe::Listener::CreateResponse", "description": "Creates and populates a SSDP response message with device info, timestamp, and optional model."}, {"name": "Probe::Broadcaster::ReceiveData", "description": "Processes incoming device responses, extracts latency info, and reports new devices."}, {"name": "Probe::Broadcaster::ValidResponse", "description": "Validates the security signature of a received response message."}, {"name": "Probe::Report", "description": "Adds a discovered device to the internal list with associated latency and optional model info."}, {"name": "Core::ProxyType<Web::Response> CreateResponse(const uint64_t incomingTime,const uint64_t requestTime)", "scope": "WPEFramework::Plugin::Probe::Listener", "scopeKind": "class", "description": "unavailable"}, {"name": "const char * Data() const", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class", "description": "unavailable"}, {"name": "Discovery(const Core::ProxyType<Web::Request> & request,const Core::NodeId & nodeId)", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class", "description": "unavailable"}, {"name": "Discovery(const Core::ProxyType<Web::Response> & response,const Core::NodeId & nodeId)", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class", "description": "unavailable"}, {"name": "Discovery(const Core::URL & remote,const uint32_t latencyinUs)", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class", "description": "unavailable"}, {"name": "Discovery(const string & message)", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class", "description": "unavailable"}, {"name": "Discovery(const string & message,const Core::NodeId & nodeId)", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class", "description": "unavailable"}, {"name": "Discovery(const uint32_t latencyinUs)", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class", "description": "unavailable"}, {"name": "uint16_t Length() const", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class", "description": "unavailable"}, {"name": "void LinkBody(Core::ProxyType<Web::Request> & element)", "scope": "WPEFramework::Plugin::Probe::Listener", "scopeKind": "class", "description": "unavailable"}, {"name": "Listener(const Core::NodeId & node,const PluginHost::IShell * service,const string & model)", "scope": "WPEFramework::Plugin::Probe::Listener", "scopeKind": "class", "description": "unavailable"}, {"name": "uint16_t ReceiveData(uint8_t * dataFrame,const uint16_t receivedSize)", "scope": "WPEFramework::Plugin::Probe::Broadcaster", "scopeKind": "class", "description": "unavailable"}, {"name": "void Received(Core::ProxyType<Web::Request> & request)", "scope": "WPEFramework::Plugin::Probe::Listener", "scopeKind": "class", "description": "unavailable"}, {"name": "void Report(const Core::URL & remote,const uint32_t latencyinUs,const string & model,const bool secure)", "scope": "WPEFramework::Plugin::Probe", "scopeKind": "class", "description": "unavailable"}, {"name": "void Send(const Core::ProxyType<Web::Response> & response)", "scope": "WPEFramework::Plugin::Probe::Listener", "scopeKind": "class", "description": "unavailable"}, {"name": "void StateChange()", "scope": "WPEFramework::Plugin::Probe::Listener", "scopeKind": "class", "description": "unavailable"}, {"name": "uint16_t Transform(Web::Request::Deserializer & deserializer,uint8_t * dataFrame,const uint16_t maxSendSize)", "scope": "WPEFramework::Plugin::Probe::WebTransform", "scopeKind": "class", "description": "unavailable"}, {"name": "bool ValidRequest(const Web::Request & request) const", "scope": "WPEFramework::Plugin::Probe::Listener", "scopeKind": "class", "description": "unavailable"}, {"name": "bool ValidResponse(const Web::Response & response) const", "scope": "WPEFramework::Plugin::Probe::Broadcaster", "scopeKind": "class", "description": "unavailable"}, {"name": "~Discovery()", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class", "description": "unavailable"}, {"name": "~Listener()", "scope": "WPEFramework::Plugin::Probe::Listener", "scopeKind": "class", "description": "unavailable"}], "calls": ["Core::ToString", "Core::NumberType<uint32_t>.Text", "Core::Time::Now", "Core::URL::Text", "Core::NumberType<uint64_t>", "Core::ProxyPoolType<Web::TextBody>::Element", "Core::NodeId::HostAddress", "Web::Request::Deserialize", "Web::Request::ToString", "Web::Request::Body", "Web::Response::ToString", "Web::Response::Body", "validateBlob", "signBlob"], "search-terms": ["SSDP M-SEARCH", "UPnP SSDP Response", "Discovery message handling", "WPEFramework Probe", "Device discovery", "Network response processing", "Latency measurement"], "state": 2, "file_id": 651, "knowledge_revision": 1748, "git_revision": "", "ctags": [{"_type": "tag", "name": "CreateResponse", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^    Core::ProxyType<Web::Response> Probe::Listener::CreateResponse(const uint64_t incomingTime, /", "language": "C++", "typeref": "typename:Core::ProxyType<Web::Response>", "kind": "function", "signature": "(const uint64_t incomingTime,const uint64_t requestTime)", "scope": "WPEFramework::Plugin::Probe::Listener", "scopeKind": "class"}, {"_type": "tag", "name": "Data", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^        inline const char* Data() const$/", "file": true, "language": "C++", "typeref": "typename:const char *", "kind": "function", "signature": "() const", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class"}, {"_type": "tag", "name": "Discovery", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^        Discovery(const Core::ProxyType<Web::Request>& request, const Core::NodeId& nodeId)$/", "file": true, "language": "C++", "kind": "function", "signature": "(const Core::ProxyType<Web::Request> & request,const Core::NodeId & nodeId)", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class"}, {"_type": "tag", "name": "Discovery", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^        Discovery(const Core::ProxyType<Web::Response>& response, const Core::NodeId& nodeId)$/", "file": true, "language": "C++", "kind": "function", "signature": "(const Core::ProxyType<Web::Response> & response,const Core::NodeId & nodeId)", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class"}, {"_type": "tag", "name": "Discovery", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^        Discovery(const Core::URL& remote, const uint32_t latencyinUs)$/", "file": true, "language": "C++", "kind": "function", "signature": "(const Core::URL & remote,const uint32_t latencyinUs)", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class"}, {"_type": "tag", "name": "Discovery", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^        Discovery(const string& message)$/", "file": true, "language": "C++", "kind": "function", "signature": "(const string & message)", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class"}, {"_type": "tag", "name": "Discovery", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^        Discovery(const string& message, const Core::NodeId& nodeId)$/", "file": true, "language": "C++", "kind": "function", "signature": "(const string & message,const Core::NodeId & nodeId)", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class"}, {"_type": "tag", "name": "Discovery", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^        Discovery(const uint32_t latencyinUs)$/", "file": true, "language": "C++", "kind": "function", "signature": "(const uint32_t latencyinUs)", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class"}, {"_type": "tag", "name": "Discovery", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^    class Discovery {$/", "file": true, "language": "C++", "kind": "class", "scope": "WPEFramework::Plugin", "scopeKind": "namespace"}, {"_type": "tag", "name": "Length", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^        inline uint16_t Length() const$/", "file": true, "language": "C++", "typeref": "typename:uint16_t", "kind": "function", "signature": "() const", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class"}, {"_type": "tag", "name": "LinkBody", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^    \\/* virtual *\\/ void Probe::Listener::LinkBody(Core::ProxyType<Web::Request>& element)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(Core::ProxyType<Web::Request> & element)", "scope": "WPEFramework::Plugin::Probe::Listener", "scopeKind": "class"}, {"_type": "tag", "name": "Listener", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^    Probe::Listener::Listener(const Core::NodeId& node, const PluginHost::IShell* service, const/", "language": "C++", "kind": "function", "signature": "(const Core::NodeId & node,const PluginHost::IShell * service,const string & model)", "scope": "WPEFramework::Plugin::Probe::Listener", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^namespace Plugin {$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "ReceiveData", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^    \\/* virtual*\\/ uint16_t Probe::Broadcaster::ReceiveData(uint8_t* dataFrame, const uint16_t r/", "language": "C++", "typeref": "typename:uint16_t", "kind": "function", "signature": "(uint8_t * dataFrame,const uint16_t receivedSize)", "scope": "WPEFramework::Plugin::Probe::Broadcaster", "scopeKind": "class"}, {"_type": "tag", "name": "Received", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^    \\/* virtual *\\/ void Probe::Listener::Received(Core::ProxyType<Web::Request>& request)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(Core::ProxyType<Web::Request> & request)", "scope": "WPEFramework::Plugin::Probe::Listener", "scopeKind": "class"}, {"_type": "tag", "name": "Report", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^    void Probe::Report(const Core::URL& remote, const uint32_t latencyinUs, const string& model,/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const Core::URL & remote,const uint32_t latencyinUs,const string & model,const bool secure)", "scope": "WPEFramework::Plugin::Probe", "scopeKind": "class"}, {"_type": "tag", "name": "SearchTarget", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^    \\/* static *\\/ const string Probe::SearchTarget(_T(\"urn:metrological-com:service:wpe:1\"));$/", "language": "C++", "typeref": "typename:const string", "kind": "member", "scope": "WPEFramework::Plugin::Probe", "scopeKind": "class"}, {"_type": "tag", "name": "Send", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^    \\/* virtual *\\/ void Probe::Listener::Send(const Core::ProxyType<Web::Response>& response)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const Core::ProxyType<Web::Response> & response)", "scope": "WPEFramework::Plugin::Probe::Listener", "scopeKind": "class"}, {"_type": "tag", "name": "StateChange", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^    \\/* virtual *\\/ void Probe::Listener::StateChange()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::Probe::Listener", "scopeKind": "class"}, {"_type": "tag", "name": "Transform", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^    uint16_t Probe::WebTransform::Transform(Web::Request::Deserializer& deserializer, uint8_t* d/", "language": "C++", "typeref": "typename:uint16_t", "kind": "function", "signature": "(Web::Request::Deserializer & deserializer,uint8_t * dataFrame,const uint16_t maxSendSize)", "scope": "WPEFramework::Plugin::Probe::WebTransform", "scopeKind": "class"}, {"_type": "tag", "name": "ValidRequest", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^    bool Probe::Listener::ValidRequest(const Web::Request& request) const$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const Web::Request & request) const", "scope": "WPEFramework::Plugin::Probe::Listener", "scopeKind": "class"}, {"_type": "tag", "name": "ValidResponse", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^    bool Probe::Broadcaster::ValidResponse(const Web::Response& response) const$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const Web::Response & response) const", "scope": "WPEFramework::Plugin::Probe::Broadcaster", "scopeKind": "class"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^namespace WPEFramework {$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "_text", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^        std::string _text;$/", "file": true, "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class"}, {"_type": "tag", "name": "_textResponseFactory", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^    static Core::ProxyPoolType<Web::TextBody> _textResponseFactory(2);$/", "file": true, "language": "C++", "typeref": "typename:Core::ProxyPoolType<Web::TextBody>", "kind": "variable", "scope": "WPEFramework::Plugin", "scopeKind": "namespace"}, {"_type": "tag", "name": "~Discovery", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^        ~Discovery()$/", "file": true, "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class"}, {"_type": "tag", "name": "~Listener", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/Thunder/Source/WPEFramework/Probe.cpp", "pattern": "/^    \\/* virtual *\\/ Probe::Listener::~Listener()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::Probe::Listener", "scopeKind": "class"}], "hash": "dd28261fe950245da81f329e0af967bf", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/Thunder/Source/WPEFramework/Probe.cpp", "fields": [{"name": "const string SearchTarget", "scope": "WPEFramework::Plugin::Probe", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string _text", "scope": "WPEFramework::Plugin::Discovery", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::ProxyPoolType<Web::TextBody> _textResponseFactory", "scope": "WPEFramework::Plugin", "scopeKind": "namespace", "description": "unavailable"}], "revision_history": [{"1748": ""}]}