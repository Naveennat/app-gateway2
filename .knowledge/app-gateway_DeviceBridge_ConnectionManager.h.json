{"is_source_file": true, "format": "C++ header file", "description": "Header file for the ConnectionManager class, which manages WebSocket connections, mDNS service discovery, and related network interface functionality within the WPEFramework plugin. It declares the class, its methods, member variables, and includes necessary headers.", "external_files": ["Module.h", "utils.h", "MdnsUtils.h", "WebSockets/WSEndpoint.h", "WebSockets/PingPong/PingPongEnabled.h", "WebSockets/Roles/Client.h", "WebSockets/CommunicationInterface/JsonRpcInterface.h", "WebSockets/JsonRpc/Notification.h", "WebSockets/Encryption/MTlsEnabled.h", "WebSockets/Encryption/NoEncryption.h", "Processor.h", "IConnectionStatusListener.h", "UsbInterfaceMonitor.h", "<interfaces/IPowerManager.h>", "PowerManagerInterface.h"], "external_methods": ["WPEFramework::Exchange::IPowerManager::PowerState"], "published": ["ConnectionManager"], "classes": [{"name": "ConnectionManager", "description": "Manages WebSocket connection, mDNS discovery, network interface status, and power mode changes within the plugin. Implements IMdnsBrowserListener to handle mDNS service events."}], "methods": [{"name": "initialize", "description": "Initializes the ConnectionManager with a connection status listener."}, {"name": "deinitialize", "description": "Cleans up resources before shutdown."}, {"name": "isConnected", "description": "Returns the current connection status."}, {"name": "getConnectionStatus", "description": "Retrieves the current connection status as a JSON response."}, {"name": "rpcCall", "description": "Makes an RPC call with specified method and parameters, returning a JSON response."}, {"name": "setNotificationHandler", "description": "Registers a callback for incoming notifications."}, {"name": "powerModeChange", "description": "Handles changes in device power modes."}, {"name": "startMdns", "description": "Starts mDNS service discovery."}, {"name": "restartMdns", "description": "Restarts mDNS service discovery."}, {"name": "stopMdns", "description": "Stops mDNS service discovery."}, {"name": "resetMdns", "description": "Resets the mDNS state."}, {"name": "connect", "description": "Establishes a WebSocket or network connection."}, {"name": "onServiceNew", "description": "Handles detection of a new mDNS service."}, {"name": "onServiceRemove", "description": "Handles removal of an mDNS service."}, {"name": "onServiceResolveFailure", "description": "Handles failure to resolve an mDNS service."}, {"name": "onServiceConnection", "description": "Handles successful service connection events."}, {"name": "onServiceDisconnected", "description": "Handles disconnection events."}, {"name": "isIPv4Address", "description": "Checks if an IP address string is IPv4."}, {"name": "setDeviceAddress", "description": "Sets the device IP address and port."}, {"name": "getInterfaceName", "description": "Gets the network interface name."}, {"name": "interfaceExists", "description": "Checks whether a network interface exists."}, {"name": "setConnectionStatus", "description": "Updates the connection status and triggers notifications."}, {"name": "setDeviceAuthenticatedState", "description": "Sets the device's authenticated state."}, {"name": "onUsbInterfaceDetectedChange", "description": "Handles USB interface detection change."}, {"name": "onSettledUsbInterfaceDetectedChange", "description": "Handles settled USB interface detection."}, {"name": "updateUsbInterfaceDetectedState", "description": "Updates the internal state based on USB detection."}, {"name": "serializeStatusToJson", "description": "Serializes connection status to a JSON object."}, {"name": "notifyListener", "description": "Notifies the registered listener about status changes."}, {"name": "restartMdnsWhenNetworkAvailable", "description": "Restarts mDNS when network becomes available."}, {"name": "hasStatusChanged", "description": "Checks if the connection status has changed."}, {"name": "usbSettlingMonitor", "description": "Monitors the USB interface settling process."}], "calls": ["MdnsUtils::start", "MdnsUtils::restart", "MdnsUtils::stop", "MdnsUtils::reset", "WebSockets::WSEndpoint::connect", "IMdnsBrowserListener::onServiceNew", "IMdnsBrowserListener::onServiceRemove", "IMdnsBrowserListener::onServiceResolveFailure", "WebSockets::WSEndpoint::onServiceConnection", "WebSockets::WSEndpoint::onServiceDisconnected", "PowerManagerInterface::notifyPowerModeChange"], "search-terms": ["ConnectionManager", "mDNS", "WebSockets", "PowerMode", "UsbInterface", "JsonRpc", "NotificationHandler", "DeviceBridge", "IPowerManager", "IPConnectionStatusListener"], "state": 2, "file_id": 6443, "knowledge_revision": 12799, "git_revision": "656612693ac36914a0cc6df82aaadeb43262f518", "ctags": [{"_type": "tag", "name": "ConnectionManager", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^class ConnectionManager : public IMdnsBrowserListener$/", "language": "C++", "kind": "class", "scope": "WPEFramework::Plugin", "scopeKind": "namespace"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^namespace Plugin       {$/", "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "PowerState", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^using PowerState = WPEFramework::Exchange::IPowerManager::PowerState;$/", "language": "C++", "typeref": "typename:WPEFramework::Exchange::IPowerManager::PowerState", "kind": "typedef"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^namespace WPEFramework {$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "address_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    std::string address_;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "connectionStatusListener_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    IConnectionStatusListener *connectionStatusListener_;$/", "language": "C++", "typeref": "typename:IConnectionStatusListener *", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "connectionStatusReason_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    std::string connectionStatusReason_;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "deviceAuthenticated_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    boost::optional<bool> deviceAuthenticated_;$/", "language": "C++", "typeref": "typename:boost::optional<bool>", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "deviceConnected_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    std::atomic_bool deviceConnected_{false};$/", "language": "C++", "typeref": "typename:std::atomic_bool", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "deviceIPAddress_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    std::string deviceIPAddress_;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "deviceInterface_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    std::string deviceInterface_;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "devicePort_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    std::string devicePort_;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "isSettlingThreadWaiting_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    bool isSettlingThreadWaiting_{false};$/", "language": "C++", "typeref": "typename:bool", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "lastStatus_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    boost::optional<JsonObject> lastStatus_;$/", "language": "C++", "typeref": "typename:boost::optional<JsonObject>", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "mdnsMutex", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    std::mutex mdnsMutex;$/", "language": "C++", "typeref": "typename:std::mutex", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "mdnsUtils_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    std::unique_ptr<MdnsUtils> mdnsUtils_;$/", "language": "C++", "typeref": "typename:std::unique_ptr<MdnsUtils>", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "pendingDisconnection_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    std::atomic_bool pendingDisconnection_{false};$/", "language": "C++", "typeref": "typename:std::atomic_bool", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "powerState_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    PowerState powerState_{WPEFramework::Exchange::IPowerManager::POWER_STATE_OFF};$/", "language": "C++", "typeref": "typename:PowerState", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "processor_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    Processor processor_;$/", "language": "C++", "typeref": "typename:Processor", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "staticIpMode_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    bool staticIpMode_{false};$/", "language": "C++", "typeref": "typename:bool", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "totalConnections", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    int totalConnections{0};$/", "language": "C++", "typeref": "typename:int", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "unsettledUsbInterfaceDetected_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    bool unsettledUsbInterfaceDetected_{false};$/", "language": "C++", "typeref": "typename:bool", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "usbInterfaceDetected_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    bool usbInterfaceDetected_{false};$/", "language": "C++", "typeref": "typename:bool", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "usbInterfaceMonitor_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    UsbInterfaceMonitor usbInterfaceMonitor_;$/", "language": "C++", "typeref": "typename:UsbInterfaceMonitor", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "usbSettlingCv", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    std::condition_variable usbSettlingCv;$/", "language": "C++", "typeref": "typename:std::condition_variable", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "usbSettlingMonitorExit_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    bool usbSettlingMonitorExit_{false};$/", "language": "C++", "typeref": "typename:bool", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "usbSettlingMonitorThread_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    std::thread usbSettlingMonitorThread_;$/", "language": "C++", "typeref": "typename:std::thread", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "usbSettlingMutex", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    std::mutex usbSettlingMutex;$/", "language": "C++", "typeref": "typename:std::mutex", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}, {"_type": "tag", "name": "wsClient_", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/DeviceBridge/ConnectionManager.h", "pattern": "/^    > wsClient_{\"DeviceBridge\"};$/", "language": "C++", "typeref": "typename:WebSockets::WSEndpoint<WebSockets::Client,WebSockets::JsonRpcInterface,WebSockets::PingPongEnabled,WebSockets::MTlsEnabled>", "kind": "member", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class"}], "hash": "87e0c14c25b2a4f0499d6ceff7c94962", "format-version": 4, "code-base-name": "app-gateway2", "filename": "app-gateway/DeviceBridge/ConnectionManager.h", "fields": [{"name": "std::string address_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "IConnectionStatusListener * connectionStatusListener_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string connectionStatusReason_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "boost::optional<bool> deviceAuthenticated_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "std::atomic_bool deviceConnected_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string deviceIPAddress_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string deviceInterface_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string devicePort_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "bool isSettlingThreadWaiting_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "boost::optional<JsonObject> lastStatus_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "std::mutex mdnsMutex", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "std::unique_ptr<MdnsUtils> mdnsUtils_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "std::atomic_bool pendingDisconnection_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "PowerState powerState_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "Processor processor_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "bool staticIpMode_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "int totalConnections", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "bool unsettledUsbInterfaceDetected_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "bool usbInterfaceDetected_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "UsbInterfaceMonitor usbInterfaceMonitor_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "std::condition_variable usbSettlingCv", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "bool usbSettlingMonitorExit_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "std::thread usbSettlingMonitorThread_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "std::mutex usbSettlingMutex", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "WebSockets::WSEndpoint<WebSockets::Client,WebSockets::JsonRpcInterface,WebSockets::PingPongEnabled,WebSockets::MTlsEnabled> wsClient_", "scope": "WPEFramework::Plugin::ConnectionManager", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"12799": "656612693ac36914a0cc6df82aaadeb43262f518"}]}