{"is_source_file": true, "format": "C++ header", "description": "This header file declares the BadgerMetricsDelegate class, which provides methods for reporting various analytics and error events via an external analytics interface. It normalizes event data to match Facebook metrics schema and dispatches events through COM-RPC calls using the IAnalytics interface. The class is tightly coupled to the specific schema and event handling logic related to Badger metrics within the project.", "external_files": ["<core/JSON.h>", "<plugins/plugins.h>", "<interfaces/IAnalytics.h>", "UtilsCallsign.h", "UtilsLogging.h"], "external_methods": ["Core::JSON::Variant::IsString()", "Core::JSON::Variant::IsNumber()", "Core::JSON::Variant::IsBoolean()", "Core::JSON::Variant::IsNull()", "Core::JSON::Variant::IsObject()", "Core::JSON::Variant::IsArray()", "Core::JSON::String::FromString()", "JsonObject::FromString()", "JsonObject::ToString()", "Core::OptionalType<string>::IsSet()", "Core::OptionalType<string>::Value()", "WPEFramework::Exchange::IAnalytics::SendEvent()"], "published": ["ParamKV", "HandlerEventType", "EVENT_SOURCE_DEFAULT", "EVENT_SOURCE_VERSION_DEFAULT", "EVENT_VERSION_DEFAULT", "BadgerMetricsDelegate"], "classes": [{"name": "ParamKV", "description": "A simple name-value pair structure with a string name and a variant value used for event parameters."}, {"name": "BadgerMetricsDelegate", "description": "A class responsible for constructing and sending normalized analytics events and errors to an external analytics system via COM-RPC, tailored to the Badger metrics schema."}], "methods": [{"name": "Core::hresult MetricsHandler(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args) const", "description": "Handles generic in-app action metrics, creating an event payload with optional segment and parameters, then dispatches via analytics interface.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult LaunchCompleted(const std::vector<ParamKV> & args) const", "description": "Reports a launch completion event with optional additional parameters.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult UserAction(const std::string & action,const std::vector<ParamKV> & args) const", "description": "Reports a user action event with a specified action string and optional parameters; validates action string length.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult AppAction(const std::string & action,const std::vector<ParamKV> & args) const", "description": "Reports an app action event with a specified action string and optional parameters; validates action string length.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult PageView(const std::string & page,const std::vector<ParamKV> & args) const", "description": "Reports a page view event for a given page ID along with optional parameters.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult UserError(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "description": "Reports a user error event with message, visibility flag, code, and optional parameters; sets 'third_party_error' flag.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult Error(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "description": "Reports an error event with message, visibility, code, and optional parameters; sets 'third_party_error' flag.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult SendViaAnalytics(const std::string & eventName,const JsonObject & eventPayload) const", "description": "Internal method that serializes the event payload and sends it via the IAnalytics interface, handling the COM-RPC call.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "bool ValidateActionType(const std::string & s)", "description": "Checks that the action string length is between 1 and 256 characters.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "void ArgsToParametersObject(const std::vector<ParamKV> & src,JsonObject & out)", "description": "Converts a vector of ParamKV to a JSON object suitable for inclusion in analytics event payload.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "BadgerMetricsDelegate(PluginHost::IShell * shell)", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "ParamKV(const std::string & n,const Core::JSON::Variant & v)", "scope": "BadgerMetrics::ParamKV", "scopeKind": "struct", "description": "unavailable"}, {"name": "JsonValue VariantToJsonValue(const Core::JSON::Variant & v)", "scope": "BadgerMetrics", "scopeKind": "namespace", "description": "unavailable"}], "calls": ["SendViaAnalytics", "Core::JSON::Variant::IsString", "Core::JSON::Variant::IsNumber", "Core::JSON::Variant::IsBoolean", "Core::JSON::Variant::IsNull", "Core::JSON::Variant::IsObject", "Core::JSON::Variant::IsArray", "JsonObject::FromString", "JsonObject::ToString", "WPEFramework::Exchange::IAnalytics::SendEvent"], "search-terms": ["BadgerMetricsDelegate", "SendEvent", "COM-RPC", "IAnalytics", "Analytics bridge", "schema normalization", "Error reporting", "UI event metrics", "Page view", "User action"], "state": 2, "file_id": 1133, "knowledge_revision": 6473, "git_revision": "2cc9c66935ba4fb0f3bb8bf9c0b1056dde5ea4b4", "revision_history": [{"2249": ""}, {"6473": "2cc9c66935ba4fb0f3bb8bf9c0b1056dde5ea4b4"}], "ctags": [{"_type": "tag", "name": "AppAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        AppAction,$/", "language": "C++", "kind": "enumerator", "scope": "BadgerMetrics::HandlerEventType", "scopeKind": "enum"}, {"_type": "tag", "name": "AppAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::hresult AppAction(const std::string& action, const std::vector<ParamKV>& args) con/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "ArgsToParametersObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        static inline void ArgsToParametersObject(const std::vector<ParamKV>& src, JsonObject& o/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const std::vector<ParamKV> & src,JsonObject & out)", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "BadgerMetrics", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^namespace BadgerMetrics {$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "BadgerMetricsDelegate", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        explicit BadgerMetricsDelegate(PluginHost::IShell* shell)$/", "language": "C++", "kind": "function", "signature": "(PluginHost::IShell * shell)", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "BadgerMetricsDelegate", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^    class BadgerMetricsDelegate {$/", "language": "C++", "kind": "class", "scope": "BadgerMetrics", "scopeKind": "namespace"}, {"_type": "tag", "name": "EVENT_SOURCE_DEFAULT", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^    static constexpr const char* EVENT_SOURCE_DEFAULT         = \"ripple\";$/", "language": "C++", "typeref": "typename:const char *", "kind": "variable", "scope": "BadgerMetrics", "scopeKind": "namespace"}, {"_type": "tag", "name": "EVENT_SOURCE_VERSION_DEFAULT", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^    static constexpr const char* EVENT_SOURCE_VERSION_DEFAULT = \"3.5.0\";$/", "language": "C++", "typeref": "typename:const char *", "kind": "variable", "scope": "BadgerMetrics", "scopeKind": "namespace"}, {"_type": "tag", "name": "EVENT_VERSION_DEFAULT", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^    static constexpr const char* EVENT_VERSION_DEFAULT        = \"3\";$/", "language": "C++", "typeref": "typename:const char *", "kind": "variable", "scope": "BadgerMetrics", "scopeKind": "namespace"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::hresult Error(const std::string& message, bool visible, const std::string& code,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Error,$/", "language": "C++", "kind": "enumerator", "scope": "BadgerMetrics::HandlerEventType", "scopeKind": "enum"}, {"_type": "tag", "name": "HandlerEventType", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^    enum class HandlerEventType {$/", "language": "C++", "kind": "enum", "scope": "BadgerMetrics", "scopeKind": "namespace"}, {"_type": "tag", "name": "LaunchCompleted", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::hresult LaunchCompleted(const std::vector<ParamKV>& args) const {$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::vector<ParamKV> & args) const", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "MetricsHandler", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::hresult MetricsHandler(const Core::OptionalType<std::string>& segment,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args) const", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "PageView", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::hresult PageView(const std::string& page, const std::vector<ParamKV>& args) const /", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & page,const std::vector<ParamKV> & args) const", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "PageView", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        PageView,$/", "language": "C++", "kind": "enumerator", "scope": "BadgerMetrics::HandlerEventType", "scopeKind": "enum"}, {"_type": "tag", "name": "ParamKV", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        ParamKV(const std::string& n, const Core::JSON::Variant& v) : name(n), value(v) {}$/", "language": "C++", "kind": "function", "signature": "(const std::string & n,const Core::JSON::Variant & v)", "scope": "BadgerMetrics::ParamKV", "scopeKind": "struct"}, {"_type": "tag", "name": "ParamKV", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^    struct ParamKV {$/", "language": "C++", "kind": "struct", "scope": "BadgerMetrics", "scopeKind": "namespace"}, {"_type": "tag", "name": "SendViaAnalytics", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::hresult SendViaAnalytics(const std::string& eventName, const JsonObject& eventPayl/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & eventName,const JsonObject & eventPayload) const", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::hresult UserAction(const std::string& action, const std::vector<ParamKV>& args) co/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        UserAction,$/", "language": "C++", "kind": "enumerator", "scope": "BadgerMetrics::HandlerEventType", "scopeKind": "enum"}, {"_type": "tag", "name": "UserError", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::hresult UserError(const std::string& message, bool visible, const std::string& cod/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserError", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        UserError$/", "language": "C++", "kind": "enumerator", "scope": "BadgerMetrics::HandlerEventType", "scopeKind": "enum"}, {"_type": "tag", "name": "ValidateActionType", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        static inline bool ValidateActionType(const std::string& s) {$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & s)", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "VariantToJsonValue", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^    static inline JsonValue VariantToJsonValue(const Core::JSON::Variant& v) {$/", "language": "C++", "typeref": "typename:JsonValue", "kind": "function", "signature": "(const Core::JSON::Variant & v)", "scope": "BadgerMetrics", "scopeKind": "namespace"}, {"_type": "tag", "name": "_shell", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        PluginHost::IShell* _shell;$/", "language": "C++", "typeref": "typename:PluginHost::IShell *", "kind": "member", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        std::string name;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "BadgerMetrics::ParamKV", "scopeKind": "struct"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::JSON::Variant value;$/", "language": "C++", "typeref": "typename:Core::JSON::Variant", "kind": "member", "scope": "BadgerMetrics::ParamKV", "scopeKind": "struct"}], "hash": "f1ef7438441647df9999d156d8e44266", "format-version": 4, "code-base-name": "app-gateway2", "filename": "app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "fields": [{"name": "const char * EVENT_SOURCE_DEFAULT", "scope": "BadgerMetrics", "scopeKind": "namespace", "description": "unavailable"}, {"name": "const char * EVENT_SOURCE_VERSION_DEFAULT", "scope": "BadgerMetrics", "scopeKind": "namespace", "description": "unavailable"}, {"name": "const char * EVENT_VERSION_DEFAULT", "scope": "BadgerMetrics", "scopeKind": "namespace", "description": "unavailable"}, {"name": "PluginHost::IShell * _shell", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string name", "scope": "BadgerMetrics::ParamKV", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::JSON::Variant value", "scope": "BadgerMetrics::ParamKV", "scopeKind": "struct", "description": "unavailable"}]}