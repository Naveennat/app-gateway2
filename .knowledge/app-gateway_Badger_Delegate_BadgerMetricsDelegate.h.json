{"is_source_file": true, "format": "C++ header", "description": "This file defines the BadgerMetricsDelegate class responsible for sending metrics data through a JSON-RPC link, handling validation against a schema, and providing several specific handler methods for different metric events such as page views, user actions, errors, and launch completion.", "external_files": ["DelegateUtils.h", "UtilsLogging.h", "core/JSON.h", "plugins/plugins.h", "UtilsLogging.h", "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/Badger_helper_files/metrics.json"], "external_methods": ["DelegateUtils::AcquireLink", "Core::File::Exists", "Core::File::Open", "Core::File::Size", "Core::File::Read", "Core::File::Close", "JsonObject::FromString", "JsonObject::HasLabel", "Core::JSON::Variant::IsString", "Core::JSON::Variant::String", "Core::JSON::Variant::Number", "Core::JSON::Variant::Boolean", "Core::JSON::Variant::IsNull", "Core::JSON::Variant::Object", "Core::JSON::Variant::Array", "Core::JSON::Variant::Serialize", "LOGERR", "LOGWARN", "LOGDBG"], "published": ["BadgerMetrics::BadgerMetricsDelegate"], "classes": [{"name": "BadgerMetrics::BadgerMetricsDelegate", "description": "A class handling the sending of metrics to an EOS RPC endpoint; includes methods for various event types and internal validation logic."}], "methods": [{"name": "Core::hresult SendMetricsHandler(const Core::OptionalType<std::string> & segment,const Core::OptionalType<HandlerEventType> & evtType,const Core::OptionalType<std::string> & action,const Core::OptionalType<std::string> & page,const Core::OptionalType<std::string> & errMsg,const Core::OptionalType<bool> & errVisible,const Core::OptionalType<std::string> & errCode,const std::vector<ParamKV> & args) const", "description": "Constructs a metrics payload and sends it via the EOS link, including validation against a JSON schema or fallback structural validation.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult MetricsHandler(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args) const", "description": "Convenience method to send a generic metrics event with optional arguments.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult LaunchCompleted(const std::vector<ParamKV> & args) const", "description": "Sends a 'LAUNCH_COMPLETED' segment to signal app launch completion.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult UserAction(const std::string & action,const std::vector<ParamKV> & args) const", "description": "Sends a user action event with validation on action string length.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult AppAction(const std::string & action,const std::vector<ParamKV> & args) const", "description": "Sends an app action event with validation on action string length.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult PageView(const std::string & page,const std::vector<ParamKV> & args) const", "description": "Sends a page view event with validation that page string is non-empty.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult UserError(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "description": "Sends a user error event including message, visibility, and code.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "Core::hresult Error(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "description": "Sends an application error with message, visibility, and code.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "string ToEventTypeString(HandlerEventType t)", "description": "Converts enum HandlerEventType to string representation.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "bool ValidateActionType(const std::string & s)", "description": "Checks that action strings are within the allowed length bounds.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "ValidationResult ValidateParams(const std::string & methodName,const JsonObject & params) const", "description": "Performs validation of the payload against schema file presence and structural correctness.", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"name": "BadgerMetricsDelegate(PluginHost::IShell * shell)", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "void BuildArgsArray(const std::vector<ParamKV> & src,JsonArray & out)", "scope": "BadgerMetrics", "scopeKind": "namespace", "description": "unavailable"}, {"name": "ValidationResult Error(const std::string & msg)", "scope": "BadgerMetrics::ValidationResult", "scopeKind": "struct", "description": "unavailable"}, {"name": "ParamKV(const std::string & n,const Core::JSON::Variant & v)", "scope": "BadgerMetrics::ParamKV", "scopeKind": "struct", "description": "unavailable"}, {"name": "ValidationResult Success()", "scope": "BadgerMetrics::ValidationResult", "scopeKind": "struct", "description": "unavailable"}], "calls": ["DelegateUtils::AcquireLink", "Core::File::Exists", "Core::File::Open", "Core::File::Size", "Core::File::Read", "Core::File::Close", "JsonObject::FromString", "LOGERR", "LOGWARN", "LOGDBG"], "search-terms": ["BadgerMetricsDelegate", "eos.metricsHandler", "metrics.json", "ValidationResult", "HandleEventType", "SendMetricsHandler"], "state": 2, "file_id": 1133, "knowledge_revision": 2249, "git_revision": "", "ctags": [{"_type": "tag", "name": "AppAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        AppAction,$/", "language": "C++", "kind": "enumerator", "scope": "BadgerMetrics::HandlerEventType", "scopeKind": "enum"}, {"_type": "tag", "name": "AppAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::hresult AppAction(const std::string& action, const std::vector<ParamKV>& args) con/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "BadgerMetrics", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^namespace BadgerMetrics {$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "BadgerMetricsDelegate", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        explicit BadgerMetricsDelegate(PluginHost::IShell* shell)$/", "language": "C++", "kind": "function", "signature": "(PluginHost::IShell * shell)", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "BadgerMetricsDelegate", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^    class BadgerMetricsDelegate {$/", "language": "C++", "kind": "class", "scope": "BadgerMetrics", "scopeKind": "namespace"}, {"_type": "tag", "name": "BuildArgsArray", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^    inline void BuildArgsArray(const std::vector<ParamKV>& src, JsonArray& out) {$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const std::vector<ParamKV> & src,JsonArray & out)", "scope": "BadgerMetrics", "scopeKind": "namespace"}, {"_type": "tag", "name": "EOS_METRICS_CALLSIGN", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^#define EOS_METRICS_CALLSIGN /", "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::hresult Error(const std::string& message, bool visible, const std::string& code,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Error,$/", "language": "C++", "kind": "enumerator", "scope": "BadgerMetrics::HandlerEventType", "scopeKind": "enum"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        static ValidationResult Error(const std::string& msg) { return {false, msg}; }$/", "language": "C++", "typeref": "typename:ValidationResult", "kind": "function", "signature": "(const std::string & msg)", "scope": "BadgerMetrics::ValidationResult", "scopeKind": "struct"}, {"_type": "tag", "name": "HandlerEventType", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^    enum class HandlerEventType {$/", "language": "C++", "kind": "enum", "scope": "BadgerMetrics", "scopeKind": "namespace"}, {"_type": "tag", "name": "LaunchCompleted", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::hresult LaunchCompleted(const std::vector<ParamKV>& args) const {$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::vector<ParamKV> & args) const", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "MetricsHandler", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::hresult MetricsHandler($/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args) const", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "PageView", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::hresult PageView(const std::string& page, const std::vector<ParamKV>& args) const /", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & page,const std::vector<ParamKV> & args) const", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "PageView", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        PageView,$/", "language": "C++", "kind": "enumerator", "scope": "BadgerMetrics::HandlerEventType", "scopeKind": "enum"}, {"_type": "tag", "name": "ParamKV", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        ParamKV(const std::string& n, const Core::JSON::Variant& v) : name(n), value(v) {}$/", "language": "C++", "kind": "function", "signature": "(const std::string & n,const Core::JSON::Variant & v)", "scope": "BadgerMetrics::ParamKV", "scopeKind": "struct"}, {"_type": "tag", "name": "ParamKV", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^    struct ParamKV {$/", "language": "C++", "kind": "struct", "scope": "BadgerMetrics", "scopeKind": "namespace"}, {"_type": "tag", "name": "SendMetricsHandler", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::hresult SendMetricsHandler($/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const Core::OptionalType<std::string> & segment,const Core::OptionalType<HandlerEventType> & evtType,const Core::OptionalType<std::string> & action,const Core::OptionalType<std::string> & page,const Core::OptionalType<std::string> & errMsg,const Core::OptionalType<bool> & errVisible,const Core::OptionalType<std::string> & errCode,const std::vector<ParamKV> & args) const", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "Success", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        static ValidationResult Success() { return {true, \"\"}; }$/", "language": "C++", "typeref": "typename:ValidationResult", "kind": "function", "signature": "()", "scope": "BadgerMetrics::ValidationResult", "scopeKind": "struct"}, {"_type": "tag", "name": "ToEventTypeString", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        static inline string ToEventTypeString(HandlerEventType t) {$/", "language": "C++", "typeref": "typename:string", "kind": "function", "signature": "(HandlerEventType t)", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::hresult UserAction(const std::string& action, const std::vector<ParamKV>& args) co/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        UserAction,$/", "language": "C++", "kind": "enumerator", "scope": "BadgerMetrics::HandlerEventType", "scopeKind": "enum"}, {"_type": "tag", "name": "UserError", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::hresult UserError(const std::string& message, bool visible, const std::string& cod/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserError", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        UserError$/", "language": "C++", "kind": "enumerator", "scope": "BadgerMetrics::HandlerEventType", "scopeKind": "enum"}, {"_type": "tag", "name": "ValidateActionType", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        static inline bool ValidateActionType(const std::string& s) {$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & s)", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "ValidateParams", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        ValidationResult ValidateParams(const std::string& methodName, const JsonObject& params)/", "language": "C++", "typeref": "typename:ValidationResult", "kind": "function", "signature": "(const std::string & methodName,const JsonObject & params) const", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "ValidationResult", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^    struct ValidationResult {$/", "language": "C++", "kind": "struct", "scope": "BadgerMetrics", "scopeKind": "namespace"}, {"_type": "tag", "name": "_eosLink", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        std::shared_ptr<WPEFramework::Utils::JSONRPCDirectLink> _eosLink;$/", "language": "C++", "typeref": "typename:std::shared_ptr<WPEFramework::Utils::JSONRPCDirectLink>", "kind": "member", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "_schemaPath", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        const std::string _schemaPath;$/", "language": "C++", "typeref": "typename:const std::string", "kind": "member", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "_shell", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        PluginHost::IShell* _shell;$/", "language": "C++", "typeref": "typename:PluginHost::IShell *", "kind": "member", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        std::string message {};$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "BadgerMetrics::ValidationResult", "scopeKind": "struct"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        std::string name;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "BadgerMetrics::ParamKV", "scopeKind": "struct"}, {"_type": "tag", "name": "ok", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        bool ok {true};$/", "language": "C++", "typeref": "typename:bool", "kind": "member", "scope": "BadgerMetrics::ValidationResult", "scopeKind": "struct"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "pattern": "/^        Core::JSON::Variant value; \\/\\/ Holds a typed JSON value$/", "language": "C++", "typeref": "typename:Core::JSON::Variant", "kind": "member", "scope": "BadgerMetrics::ParamKV", "scopeKind": "struct"}], "hash": "929ee531ca2504848a4bd4b8e1fac117", "format-version": 4, "code-base-name": "app-gateway2", "filename": "app-gateway/Badger/Delegate/BadgerMetricsDelegate.h", "fields": [{"name": "std::shared_ptr<WPEFramework::Utils::JSONRPCDirectLink> _eosLink", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "const std::string _schemaPath", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "PluginHost::IShell * _shell", "scope": "BadgerMetrics::BadgerMetricsDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string message", "scope": "BadgerMetrics::ValidationResult", "scopeKind": "struct", "description": "unavailable"}, {"name": "std::string name", "scope": "BadgerMetrics::ParamKV", "scopeKind": "struct", "description": "unavailable"}, {"name": "bool ok", "scope": "BadgerMetrics::ValidationResult", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::JSON::Variant value", "scope": "BadgerMetrics::ParamKV", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"2249": ""}]}