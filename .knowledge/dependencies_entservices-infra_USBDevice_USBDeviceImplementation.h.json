{"is_source_file": true, "format": "C++ header (.h)", "description": "This file defines the class USBDeviceImplementation, which implements the IUSBDevice interface for USB device management within the WPEFramework plugin system. It includes declarations for device enumeration, information retrieval, driver binding, event dispatching, and USB hotplug handling, along with associated nested classes and private methods.", "external_files": ["Module.h", "<interfaces/Ids.h>", "<interfaces/IUSBDevice.h>", "tracing/Logging.h", "<vector>", "<thread>", "<fstream>", "<com/com.h>", "<core/core.h>", "<plugins/plugins.h>", "libusb.h"], "external_methods": ["libusb_init", "libusb_exit", "libusb_hotplug_register_callback", "libusb_hotplug_deregister_callback", "libusb_handle_events", "libusb_open", "libusb_close", "libusb_get_device_descriptor", "libusb_get_string_descriptor_ascii", "libusb_get_config_descriptor"], "published": ["Exchange::IUSBDevice"], "classes": [{"name": "USBDeviceImplementation", "description": "Implements the IUSBDevice interface, manages USB devices, hotplug events, and provides device info retrieval, driver binding, and unbinding functionalities."}, {"name": "USBDeviceImplementation::Job", "description": "A nested class representing a dispatchable job for handling USB device events asynchronously."}], "methods": [{"name": "Register", "description": "Registers a notification callback for USB device events."}, {"name": "Unregister", "description": "Unregisters a previously registered notification callback."}, {"name": "GetDeviceList", "description": "Retrieves a list of connected USB devices."}, {"name": "GetDeviceInfo", "description": "Fetches detailed information for a specific device by name."}, {"name": "BindDriver", "description": "Binds a driver to a specified device."}, {"name": "UnbindDriver", "description": "Removes the driver binding from a specified device."}, {"name": "dispatchEvent", "description": "Internal method to dispatch device events."}, {"name": "void Dispatch()", "description": "Handles the dispatching of events to registered listeners.", "scope": "WPEFramework::Plugin::USBDeviceImplementation::Job", "scopeKind": "class"}, {"name": "libUSBInit", "description": "Initializes the libusb context."}, {"name": "libUSBClose", "description": "Cleans up and closes the libusb context."}, {"name": "getUSBDevicClassFromInterfaceDescriptor", "description": "Extracts device class information from an interface descriptor."}, {"name": "getDevicePathFromDevice", "description": "Retrieves the device path and serial number from a libusb device."}, {"name": "getDeviceSerialNumber", "description": "Fetches the serial number string for a device."}, {"name": "getUSBDescriptorValue", "description": "Reads a string descriptor value from a device handle."}, {"name": "getUSBExtInfoStructFromDeviceDescriptor", "description": "Constructs extended USB device info from device descriptor."}, {"name": "getUSBDeviceInfoStructFromDeviceDescriptor", "description": "Extracts basic USB device info from device descriptor."}, {"name": "getUSBDeviceStructFromDeviceDescriptor", "description": "Builds USB device structure from device descriptor."}, {"name": "libUSBHotPlugCallbackDeviceAttached", "description": "Callback invoked when a device is attached (hotplug)."}, {"name": "libUSBHotPlugCallbackDeviceDetached", "description": "Callback invoked when a device is detached (hotplug)."}, {"name": "libUSBEventsHandlingThread", "description": "Thread function to handle libusb event processing loop."}, {"name": "Core::ProxyType<Core::IDispatch> Create(USBDeviceImplementation * usbDeviceImplementation,Event event,Exchange::IUSBDevice::USBDevice usbDevice)", "scope": "WPEFramework::Plugin::USBDeviceImplementation::Job", "scopeKind": "class", "description": "unavailable"}, {"name": "Job(USBDeviceImplementation * usbDeviceImplementation,Event event,Exchange::IUSBDevice::USBDevice & usbDevice)", "scope": "WPEFramework::Plugin::USBDeviceImplementation::Job", "scopeKind": "class", "description": "unavailable"}, {"name": "~Job()", "scope": "WPEFramework::Plugin::USBDeviceImplementation::Job", "scopeKind": "class", "description": "unavailable"}], "search-terms": ["USBDevice", "libusb", "hotplug", "IUSBDevice", "DeviceInfo", "binding", "unbinding", "device enumeration", "device serial number", "device driver"], "state": 2, "file_id": 58, "knowledge_revision": 433, "git_revision": "", "ctags": [{"_type": "tag", "name": "Create", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^            static Core::ProxyType<Core::IDispatch> Create(USBDeviceImplementation *usbDeviceImp/", "language": "C++", "typeref": "typename:Core::ProxyType<Core::IDispatch>", "kind": "function", "signature": "(USBDeviceImplementation * usbDeviceImplementation,Event event,Exchange::IUSBDevice::USBDevice usbDevice)", "scope": "WPEFramework::Plugin::USBDeviceImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "Dispatch", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^            virtual void Dispatch() {$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::USBDeviceImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "Event", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^        enum Event {$/", "language": "C++", "kind": "enum", "scope": "WPEFramework::Plugin::USBDeviceImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Job", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^             Job(USBDeviceImplementation *usbDeviceImplementation, Event event, Exchange::IUSBDe/", "language": "C++", "kind": "function", "signature": "(USBDeviceImplementation * usbDeviceImplementation,Event event,Exchange::IUSBDevice::USBDevice & usbDevice)", "scope": "WPEFramework::Plugin::USBDeviceImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "Job", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^        class EXTERNAL Job : public Core::IDispatch {$/", "language": "C++", "kind": "class", "scope": "WPEFramework::Plugin::USBDeviceImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "LIBUSB_CONFIG_ATT_SELF_POWERED", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^#define LIBUSB_CONFIG_ATT_SELF_POWERED /", "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^namespace Plugin {$/", "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "STATUS_BIT_DEVICE_SELF_POWERED", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^#define STATUS_BIT_DEVICE_SELF_POWERED /", "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "STATUS_BIT_PORT_CONNECTION", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^#define STATUS_BIT_PORT_CONNECTION /", "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "STATUS_BIT_PORT_DEVICE_SUSPENDED", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^#define STATUS_BIT_PORT_DEVICE_SUSPENDED /", "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "STATUS_BIT_PORT_ENABLED", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^#define STATUS_BIT_PORT_ENABLED /", "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "STATUS_BIT_PORT_OVER_CURRENT", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^#define STATUS_BIT_PORT_OVER_CURRENT /", "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "USBDEVICE_HOTPLUG_EVENT_DEVICE_ARRIVED", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^                USBDEVICE_HOTPLUG_EVENT_DEVICE_ARRIVED,$/", "language": "C++", "kind": "enumerator", "scope": "WPEFramework::Plugin::USBDeviceImplementation::Event", "scopeKind": "enum"}, {"_type": "tag", "name": "USBDEVICE_HOTPLUG_EVENT_DEVICE_LEFT", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^                USBDEVICE_HOTPLUG_EVENT_DEVICE_LEFT$/", "language": "C++", "kind": "enumerator", "scope": "WPEFramework::Plugin::USBDeviceImplementation::Event", "scopeKind": "enum"}, {"_type": "tag", "name": "USBDeviceImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^    class USBDeviceImplementation : public Exchange::IUSBDevice{$/", "language": "C++", "kind": "class", "scope": "WPEFramework::Plugin", "scopeKind": "namespace"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^namespace WPEFramework {$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "_adminLock", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^        mutable Core::CriticalSection _adminLock;$/", "language": "C++", "typeref": "typename:Core::CriticalSection", "kind": "member", "scope": "WPEFramework::Plugin::USBDeviceImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_event", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^            const Event _event;$/", "language": "C++", "typeref": "typename:const Event", "kind": "member", "scope": "WPEFramework::Plugin::USBDeviceImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "_handlingUSBDeviceEvents", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^        bool _handlingUSBDeviceEvents;$/", "language": "C++", "typeref": "typename:bool", "kind": "member", "scope": "WPEFramework::Plugin::USBDeviceImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_hotPlugHandle", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^        libusb_hotplug_callback_handle _hotPlugHandle[2];$/", "language": "C++", "typeref": "typename:libusb_hotplug_callback_handle[2]", "kind": "member", "scope": "WPEFramework::Plugin::USBDeviceImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_libUSBDeviceThread", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^        std::thread *_libUSBDeviceThread;$/", "language": "C++", "typeref": "typename:std::thread *", "kind": "member", "scope": "WPEFramework::Plugin::USBDeviceImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_usbDevice", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^            const Exchange::IUSBDevice::USBDevice _usbDevice;$/", "language": "C++", "typeref": "typename:const Exchange::IUSBDevice::USBDevice", "kind": "member", "scope": "WPEFramework::Plugin::USBDeviceImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "_usbDeviceImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^            USBDeviceImplementation *_usbDeviceImplementation;$/", "language": "C++", "typeref": "typename:USBDeviceImplementation *", "kind": "member", "scope": "WPEFramework::Plugin::USBDeviceImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "_usbDeviceNotification", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^        std::list<Exchange::IUSBDevice::INotification*> _usbDeviceNotification;$/", "language": "C++", "typeref": "typename:std::list<Exchange::IUSBDevice::INotification * >", "kind": "member", "scope": "WPEFramework::Plugin::USBDeviceImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "~Job", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "pattern": "/^            ~Job() {$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::USBDeviceImplementation::Job", "scopeKind": "class"}], "hash": "3bf521171a5729bc6e741f4ab18ad963", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/USBDevice/USBDeviceImplementation.h", "fields": [{"name": "Core::CriticalSection _adminLock", "scope": "WPEFramework::Plugin::USBDeviceImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "const Event _event", "scope": "WPEFramework::Plugin::USBDeviceImplementation::Job", "scopeKind": "class", "description": "unavailable"}, {"name": "bool _handlingUSBDeviceEvents", "scope": "WPEFramework::Plugin::USBDeviceImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "libusb_hotplug_callback_handle[2] _hotPlugHandle", "scope": "WPEFramework::Plugin::USBDeviceImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::thread * _libUSBDeviceThread", "scope": "WPEFramework::Plugin::USBDeviceImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "const Exchange::IUSBDevice::USBDevice _usbDevice", "scope": "WPEFramework::Plugin::USBDeviceImplementation::Job", "scopeKind": "class", "description": "unavailable"}, {"name": "USBDeviceImplementation * _usbDeviceImplementation", "scope": "WPEFramework::Plugin::USBDeviceImplementation::Job", "scopeKind": "class", "description": "unavailable"}, {"name": "std::list<Exchange::IUSBDevice::INotification * > _usbDeviceNotification", "scope": "WPEFramework::Plugin::USBDeviceImplementation", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"433": ""}]}