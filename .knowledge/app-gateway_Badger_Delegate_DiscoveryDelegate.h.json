{"is_source_file": true, "format": "C++ header file", "description": "This file defines the class DiscoveryDelegate, which serves as a client to interact with the FbDiscovery service through a shell interface. It provides methods for handling media events, content access, watching content, signing in and out, and managing entitlements and account linkage. The class manages RPC calls via a link acquired from DelegateUtils, and supports various discovery-related operations in a media application context.", "external_files": ["DelegateUtils.h", "UtilsLogging.h"], "external_methods": ["DelegateUtils::AcquireLink", "JsonObject::FromString", "JsonObject::HasLabel", "JsonObject::Object", "JsonObject::ToString", "Core::JSON::Variant::type::OBJECT", "Core::ERROR_NONE", "Core::ERROR_UNAVAILABLE", "Core::ERROR_NOT_SUPPORTED", "Core::JSON::Boolean", "Core::JSON::Double", "LOGWARN", "LOGERR", "LOGINFO"], "published": ["DiscoveryDelegate::MediaEventAccountLink", "DiscoveryDelegate::ContentAccess", "DiscoveryDelegate::WatchNext", "DiscoveryDelegate::Watched", "DiscoveryDelegate::SignIn", "DiscoveryDelegate::SignOut", "DiscoveryDelegate::EntitlementsAccountLink"], "classes": [{"name": "DiscoveryDelegate", "description": "A class that handles communication with the FbDiscovery service, providing methods for media event reporting, content access, content tracking, and user authentication/entitlement management."}], "methods": [{"name": "uint32_t MediaEventAccountLink(const std::string & appId,const std::string & payload,std::string & result)", "description": "Handles media event reporting to the FbDiscovery service, routing events to either 'watchNext' or 'watched' RPC calls based on event completion status.", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class"}, {"name": "uint32_t ContentAccess(const std::string & appId,const std::string & idsPayload,std::string & result)", "description": "Requests content entitlement and availability information via the 'contentAccess' RPC.", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class"}, {"name": "uint32_t WatchNext(const std::string & appId,const std::string & contentId,std::string & result)", "description": "Marks a content item as 'watched' with a specific identifier.", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class"}, {"name": "uint32_t Watched(const std::string & appId,const std::string & entityId,const double progress,const bool completed,const std::string & watchedOn,std::string & result)", "description": "Reports that a user has watched a content item, including progress and watchedOn timestamp.", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class"}, {"name": "uint32_t SignIn(const std::string & appId,const std::string & entitlements,bool & success)", "description": "Performs sign-in with entitlements via the 'signIn' RPC, indicating user authentication status.", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class"}, {"name": "uint32_t SignOut(const std::string & appId,bool & success)", "description": "Performs sign-out operations via the 'signOut' RPC.", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class"}, {"name": "uint32_t EntitlementsAccountLink(const std::string & appId,const std::string & payload,std::string & result)", "description": "Handles account link actions such as signIn or signOut based on the payload's 'type' and 'action'.", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class"}, {"name": "DiscoveryDelegate(PluginHost::IShell * shell)", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class", "description": "unavailable"}], "calls": ["DelegateUtils::AcquireLink", "link->Invoke<JsonObject, JsonObject>"], "search-terms": ["DiscoveryDelegate", "mediaEventAccountLink", "contentAccess", "watchNext", "watched", "signIn", "signOut", "EntitlementsAccountLink", "FbDiscovery"], "state": 2, "file_id": 6439, "knowledge_revision": 16292, "git_revision": "64a8452c07c2adce9dee86e11a8117b075293172", "revision_history": [{"12793": "f28018468ba067a40f416649bf901f0bc860aa4c"}, {"12804": "f28018468ba067a40f416649bf901f0bc860aa4c"}, {"13475": "c0bd146f4f227549be1a67cfc787928cdf3d1663"}, {"16292": "64a8452c07c2adce9dee86e11a8117b075293172"}], "ctags": [{"_type": "tag", "name": "ContentAccess", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/DiscoveryDelegate.h", "pattern": "/^         uint32_t ContentAccess(const std::string& appId, const std::string& idsPayload, std::st/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & appId,const std::string & idsPayload,std::string & result)", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "DiscoveryDelegate", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/DiscoveryDelegate.h", "pattern": "/^         DiscoveryDelegate(PluginHost::IShell* shell) : _shell(shell) { LOGDBG(\"DiscoveryDelegat/", "language": "C++", "kind": "function", "signature": "(PluginHost::IShell * shell)", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "DiscoveryDelegate", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/DiscoveryDelegate.h", "pattern": "/^     class DiscoveryDelegate {$/", "language": "C++", "kind": "class", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "EntitlementsAccountLink", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/DiscoveryDelegate.h", "pattern": "/^         uint32_t EntitlementsAccountLink(const std::string& appId, const std::string& payload, /", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & appId,const std::string & payload,std::string & result)", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "FB_DISCOVERY_CALLSIGN", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/DiscoveryDelegate.h", "pattern": "/^ #define FB_DISCOVERY_CALLSIGN /", "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "MediaEventAccountLink", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/DiscoveryDelegate.h", "pattern": "/^         uint32_t MediaEventAccountLink(const std::string& appId, const std::string& payload, st/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & appId,const std::string & payload,std::string & result)", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "SignIn", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/DiscoveryDelegate.h", "pattern": "/^         uint32_t SignIn(const std::string& appId, const std::string& entitlements, bool& succes/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & appId,const std::string & entitlements,bool & success)", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "SignOut", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/DiscoveryDelegate.h", "pattern": "/^         uint32_t SignOut(const std::string& appId, bool& success) {$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & appId,bool & success)", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/DiscoveryDelegate.h", "pattern": "/^ namespace WPEFramework {$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "WatchNext", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/DiscoveryDelegate.h", "pattern": "/^         uint32_t WatchNext(const std::string& appId, const std::string& contentId, std::string&/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & appId,const std::string & contentId,std::string & result)", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "Watched", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/DiscoveryDelegate.h", "pattern": "/^         uint32_t Watched(const std::string& appId, const std::string& entityId, const double pr/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const std::string & appId,const std::string & entityId,const double progress,const bool completed,const std::string & watchedOn,std::string & result)", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "_shell", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/DiscoveryDelegate.h", "pattern": "/^         PluginHost::IShell* _shell;$/", "language": "C++", "typeref": "typename:PluginHost::IShell *", "kind": "member", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class"}], "hash": "dbad423299a0f6295cfe3eeaf4801661", "format-version": 4, "code-base-name": "app-gateway2", "filename": "app-gateway/Badger/Delegate/DiscoveryDelegate.h", "fields": [{"name": "PluginHost::IShell * _shell", "scope": "WPEFramework::DiscoveryDelegate", "scopeKind": "class", "description": "unavailable"}]}