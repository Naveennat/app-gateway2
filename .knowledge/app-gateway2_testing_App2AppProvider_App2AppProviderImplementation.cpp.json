{"is_source_file": true, "format": "C++", "description": "This file implements a set of classes and functions for handling JSONRPC communication, provider registration, correlation mapping, and client interaction in an application gateway context. It includes detailed interaction with Thunder platform APIs, JSON serialization/deserialization, and internal data management.", "external_files": ["App2AppProviderImplementation.h", "UtilsLogging.h"], "external_methods": ["LOGERR", "LOGINFO", "LOGWARN", "Core::JSONRPC::Message", "Core::ProxyType", "PluginHost::IFactories::Instance", "PluginHost::IShell", "PluginHost::ILocalDispatcher", "PluginHost::IDispatcher", "Core::JSON::IElement", "Core::JSON::JsonObject", "Core::OptionalType", "Core::Time", "Time::Now", "std::random_device", "std::mt19937_64", "std::stringstream"], "published": ["App2App::ProviderRegistry", "App2App::CorrelationMap", "App2App::GatewayClient"], "classes": [{"name": "JSONRPCDirectLink", "description": "Handles JSONRPC message creation and invocation through Thunder platform dispatchers, supporting different Thunder versions."}, {"name": "ProviderRegistry", "description": "Manages registration and lookup of provider capabilities with associated application contexts, supporting registration, unregistration, and resolution."}, {"name": "CorrelationMap", "description": "Generates and manages correlation IDs for tracking requests and responses, ensuring thread-safe access."}, {"name": "GatewayClient", "description": "Facilitates sending responses back to consumer applications via a specified gateway callsign, handling token updates and JSON payloads."}], "methods": [{"name": "uint32_t Invoke(const uint32_t waitTime,const std::string & token,const string & method,const PARAMETERS & parameters,RESPONSE & response,bool isResponseString=false)", "description": "Performs a JSONRPC call over the Thunder platform, handling different Thunder versions and response parsing.", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct"}, {"name": "bool Register(const std::string & capability,const ProviderContext & ctx)", "description": "Registers a provider capability with a given context, replacing any existing registration for that capability.", "scope": "App2App::ProviderRegistry", "scopeKind": "class"}, {"name": "bool Unregister(const std::string & capability,const std::string & appId)", "description": "Unregisters a provider capability if the caller owns it.", "scope": "App2App::ProviderRegistry", "scopeKind": "class"}, {"name": "bool Resolve(const std::string & capability,ProviderContext & out) const", "description": "Looks up the context for a given capability.", "scope": "App2App::ProviderRegistry", "scopeKind": "class"}, {"name": "std::string GenerateCorrelationId() const", "description": "Creates a unique string ID for correlating requests and responses.", "scope": "App2App::CorrelationMap", "scopeKind": "class"}, {"name": "std::string Create(const ConsumerContext & ctx)", "description": "Creates a new correlation ID and stores the associated request context.", "scope": "App2App::CorrelationMap", "scopeKind": "class"}, {"name": "bool Take(const std::string & correlationId,ConsumerContext & out)", "description": "Retrieves and removes a correlation ID's stored context, used upon response receipt.", "scope": "App2App::CorrelationMap", "scopeKind": "class"}, {"name": "bool Peek(const std::string & correlationId,ConsumerContext & out) const", "description": "Retrieves but does not remove the stored context for a specific correlation ID.", "scope": "App2App::CorrelationMap", "scopeKind": "class"}, {"name": "void UpdateToken(const std::string & token)", "description": "Updates the token used for authentication in subsequent requests.", "scope": "App2App::GatewayClient", "scopeKind": "class"}, {"name": "uint32_t Respond(const ConsumerContext & ctx,const Core::JSON::JsonObject & payload)", "description": "Sends a response payload back to a consumer application using the gateway callsign and JSONRPC.", "scope": "App2App::GatewayClient", "scopeKind": "class"}, {"name": "CorrelationMap()", "scope": "App2App::CorrelationMap", "scopeKind": "class", "description": "unavailable"}, {"name": "bool FromMessage(Core::JSON::IElement * response,const Core::ProxyType<Core::JSONRPC::Message> & message,bool isResponseString=false) const", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct", "description": "unavailable"}, {"name": "bool FromMessage(RESPONSE & response,const Core::ProxyType<Core::JSONRPC::Message> & message,bool isResponseString=false) const", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct", "description": "unavailable"}, {"name": "GatewayClient(PluginHost::IShell * service,const std::string & gatewayCallsign,const std::string & token)", "scope": "App2App::GatewayClient", "scopeKind": "class", "description": "unavailable"}, {"name": "JSONRPCDirectLink(PluginHost::IShell * service)", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct", "description": "unavailable"}, {"name": "JSONRPCDirectLink(PluginHost::IShell * service,const std::string & callsign)", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::ProxyType<Core::JSONRPC::Message> Message() const", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct", "description": "unavailable"}, {"name": "ProviderRegistry()", "scope": "App2App::ProviderRegistry", "scopeKind": "class", "description": "unavailable"}, {"name": "bool ToMessage(Core::JSON::IElement * parameters,Core::ProxyType<Core::JSONRPC::Message> & message) const", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct", "description": "unavailable"}, {"name": "bool ToMessage(PARAMETERS & parameters,Core::ProxyType<Core::JSONRPC::Message> & message) const", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct", "description": "unavailable"}, {"name": "~CorrelationMap()", "scope": "App2App::CorrelationMap", "scopeKind": "class", "description": "unavailable"}, {"name": "~GatewayClient()", "scope": "App2App::GatewayClient", "scopeKind": "class", "description": "unavailable"}, {"name": "~JSONRPCDirectLink()", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct", "description": "unavailable"}, {"name": "~ProviderRegistry()", "scope": "App2App::ProviderRegistry", "scopeKind": "class", "description": "unavailable"}], "calls": ["Core::JSONRPC::Message", "PluginHost::ILocalDispatcher::Invoke", "PluginHost::IDispatcher::Invoke", "Core::JSON::IElement::IsSet", "Core::JSON::IElement::ToString", "Core::JSON::IElement::FromString", "LOGERR", "LOGINFO", "LOGWARN", "Core::Time::Now", "Time::Now", "Core::JSON::JsonObject::Set", "Core::JSON::JsonObject::Set", "Core::JSON::JsonObject::Set", "Core::JSON::JsonObject::Set", "Core::JSON::JsonObject", "Core::JSON::JsonObject", "Core::JSON::JsonObject", "Core::JSON::JsonObject", "Core::JSON::JsonObject"], "search-terms": ["JSONRPCDirectLink", "ProviderRegistry", "CorrelationMap", "GatewayClient", "Thunder_VERSION", "JSONRPC", "App2App", "App2AppProvider", "JSONRPC::Message", "C++ Thunder platform"], "state": 2, "file_id": 377, "knowledge_revision": 747, "git_revision": "93de3ebb5592146b46b0acbe2225f4567d32bfdf", "ctags": [{"_type": "tag", "name": "App2App", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^namespace App2App {$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "CorrelationMap", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^CorrelationMap::CorrelationMap() : _lock(), _pending() {$/", "language": "C++", "kind": "function", "signature": "()", "scope": "App2App::CorrelationMap", "scopeKind": "class"}, {"_type": "tag", "name": "Create", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^std::string CorrelationMap::Create(const ConsumerContext& ctx) {$/", "language": "C++", "typeref": "typename:std::string", "kind": "function", "signature": "(const ConsumerContext & ctx)", "scope": "App2App::CorrelationMap", "scopeKind": "class"}, {"_type": "tag", "name": "FromMessage", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^    bool FromMessage(Core::JSON::IElement* response, const Core::ProxyType<Core::JSONRPC::Messag/", "file": true, "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(Core::JSON::IElement * response,const Core::ProxyType<Core::JSONRPC::Message> & message,bool isResponseString=false) const", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct"}, {"_type": "tag", "name": "FromMessage", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^    bool FromMessage(RESPONSE& response, const Core::ProxyType<Core::JSONRPC::Message>& message,/", "file": true, "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(RESPONSE & response,const Core::ProxyType<Core::JSONRPC::Message> & message,bool isResponseString=false) const", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct"}, {"_type": "tag", "name": "GatewayClient", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^GatewayClient::GatewayClient(PluginHost::IShell* service, const std::string& gatewayCallsign, co/", "language": "C++", "kind": "function", "signature": "(PluginHost::IShell * service,const std::string & gatewayCallsign,const std::string & token)", "scope": "App2App::GatewayClient", "scopeKind": "class"}, {"_type": "tag", "name": "GenerateCorrelationId", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^std::string CorrelationMap::GenerateCorrelationId() const {$/", "language": "C++", "typeref": "typename:std::string", "kind": "function", "signature": "() const", "scope": "App2App::CorrelationMap", "scopeKind": "class"}, {"_type": "tag", "name": "Invoke", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^    uint32_t Invoke(const uint32_t waitTime, const std::string& token, const string& method, con/", "file": true, "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const uint32_t waitTime,const std::string & token,const string & method,const PARAMETERS & parameters,RESPONSE & response,bool isResponseString=false)", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct"}, {"_type": "tag", "name": "JSONRPCDirectLink", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^    JSONRPCDirectLink(PluginHost::IShell* service)$/", "file": true, "language": "C++", "kind": "function", "signature": "(PluginHost::IShell * service)", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct"}, {"_type": "tag", "name": "JSONRPCDirectLink", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^    JSONRPCDirectLink(PluginHost::IShell* service, const std::string& callsign)$/", "file": true, "language": "C++", "kind": "function", "signature": "(PluginHost::IShell * service,const std::string & callsign)", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct"}, {"_type": "tag", "name": "JSONRPCDirectLink", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^struct JSONRPCDirectLink {$/", "file": true, "language": "C++", "kind": "struct", "scope": "__anon0be7c8cb0111", "scopeKind": "namespace"}, {"_type": "tag", "name": "Message", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^    Core::ProxyType<Core::JSONRPC::Message> Message() const {$/", "file": true, "language": "C++", "typeref": "typename:Core::ProxyType<Core::JSONRPC::Message>", "kind": "function", "signature": "() const", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct"}, {"_type": "tag", "name": "Peek", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^bool CorrelationMap::Peek(const std::string& correlationId, ConsumerContext& out) const {$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & correlationId,ConsumerContext & out) const", "scope": "App2App::CorrelationMap", "scopeKind": "class"}, {"_type": "tag", "name": "ProviderRegistry", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^ProviderRegistry::ProviderRegistry() : _lock(), _byCapability() {$/", "language": "C++", "kind": "function", "signature": "()", "scope": "App2App::ProviderRegistry", "scopeKind": "class"}, {"_type": "tag", "name": "Register", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^bool ProviderRegistry::Register(const std::string& capability, const ProviderContext& ctx) {$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & capability,const ProviderContext & ctx)", "scope": "App2App::ProviderRegistry", "scopeKind": "class"}, {"_type": "tag", "name": "Resolve", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^bool ProviderRegistry::Resolve(const std::string& capability, ProviderContext& out) const {$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & capability,ProviderContext & out) const", "scope": "App2App::ProviderRegistry", "scopeKind": "class"}, {"_type": "tag", "name": "Respond", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^uint32_t GatewayClient::Respond(const ConsumerContext& ctx, const Core::JSON::JsonObject& payloa/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const ConsumerContext & ctx,const Core::JSON::JsonObject & payload)", "scope": "App2App::GatewayClient", "scopeKind": "class"}, {"_type": "tag", "name": "Take", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^bool CorrelationMap::Take(const std::string& correlationId, ConsumerContext& out) {$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & correlationId,ConsumerContext & out)", "scope": "App2App::CorrelationMap", "scopeKind": "class"}, {"_type": "tag", "name": "ToMessage", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^    bool ToMessage(Core::JSON::IElement* parameters, Core::ProxyType<Core::JSONRPC::Message>& me/", "file": true, "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(Core::JSON::IElement * parameters,Core::ProxyType<Core::JSONRPC::Message> & message) const", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct"}, {"_type": "tag", "name": "ToMessage", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^    bool ToMessage(PARAMETERS& parameters, Core::ProxyType<Core::JSONRPC::Message>& message) con/", "file": true, "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(PARAMETERS & parameters,Core::ProxyType<Core::JSONRPC::Message> & message) const", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct"}, {"_type": "tag", "name": "Unregister", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^bool ProviderRegistry::Unregister(const std::string& capability, const std::string& appId) {$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & capability,const std::string & appId)", "scope": "App2App::ProviderRegistry", "scopeKind": "class"}, {"_type": "tag", "name": "UpdateToken", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^void GatewayClient::UpdateToken(const std::string& token) {$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const std::string & token)", "scope": "App2App::GatewayClient", "scopeKind": "class"}, {"_type": "tag", "name": "__anon0be7c8cb0111", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^namespace {$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "_callsign", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^    std::string _callsign;$/", "file": true, "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct"}, {"_type": "tag", "name": "_dispatcher", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^    PluginHost::IDispatcher* _dispatcher {nullptr};$/", "file": true, "language": "C++", "typeref": "typename:PluginHost::IDispatcher *", "kind": "member", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct"}, {"_type": "tag", "name": "_dispatcher", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^    PluginHost::ILocalDispatcher* _dispatcher {nullptr};$/", "file": true, "language": "C++", "typeref": "typename:PluginHost::ILocalDispatcher *", "kind": "member", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct"}, {"_type": "tag", "name": "_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^    uint32_t _id {0};$/", "file": true, "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct"}, {"_type": "tag", "name": "~CorrelationMap", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^CorrelationMap::~CorrelationMap() {$/", "language": "C++", "kind": "function", "signature": "()", "scope": "App2App::CorrelationMap", "scopeKind": "class"}, {"_type": "tag", "name": "~GatewayClient", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^GatewayClient::~GatewayClient() {$/", "language": "C++", "kind": "function", "signature": "()", "scope": "App2App::GatewayClient", "scopeKind": "class"}, {"_type": "tag", "name": "~JSONRPCDirectLink", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^    ~JSONRPCDirectLink() {$/", "file": true, "language": "C++", "kind": "function", "signature": "()", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct"}, {"_type": "tag", "name": "~ProviderRegistry", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "pattern": "/^ProviderRegistry::~ProviderRegistry() {$/", "language": "C++", "kind": "function", "signature": "()", "scope": "App2App::ProviderRegistry", "scopeKind": "class"}], "hash": "531d05b9cca9e817c70585da115859f1", "format-version": 4, "code-base-name": "app-gateway2", "filename": "app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.cpp", "fields": [{"name": "std::string _callsign", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct", "description": "unavailable"}, {"name": "PluginHost::IDispatcher * _dispatcher", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct", "description": "unavailable"}, {"name": "PluginHost::ILocalDispatcher * _dispatcher", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint32_t _id", "scope": "__anon0be7c8cb0111::JSONRPCDirectLink", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"747": "93de3ebb5592146b46b0acbe2225f4567d32bfdf"}]}