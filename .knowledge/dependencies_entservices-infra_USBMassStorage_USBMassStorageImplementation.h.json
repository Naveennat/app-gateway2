{"is_source_file": true, "format": "C++ header file", "description": "This file declares the class USBMassStorageImplementation which handles USB mass storage devices, including notifications for device plug-in and removal, device enumeration, mounting, and filesystem info. It implements interfaces for USB mass storage management and configuration within the WPEFramework plugin architecture.", "external_files": ["Module.h", "<interfaces/Ids.h>", "<interfaces/IUSBDevice.h>", "<interfaces/IUSBMassStorage.h>", "<interfaces/IConfiguration.h>", "tracing/Logging.h", "<vector>", "<com/com.h>", "<core/core.h>", "<plugins/plugins.h>", "libusb.h", "<cstring>", "<sys/ioctl.h>", "<unistd.h>", "<cstdlib>", "<iostream>", "<sys/vfs.h>", "<sys/mount.h>"], "external_methods": ["WPEFramework::Exchange::IUSBDevice::INotification::OnDevicePluggedIn", "WPEFramework::Exchange::IUSBDevice::INotification::OnDevicePluggedOut", "Core::IDispatch::Dispatch", "Core::proxy_cast", "Core::ProxyType::Create", "Core::ProxyType<Core::IDispatch>::Create", "WPEFramework::Plugin::USBMassStorageImplementation::Dispatch"], "published": ["WPEFramework::Exchange::IUSBMassStorage", "WPEFramework::Exchange::IConfiguration"], "classes": [{"name": "USBMassStorageImplementation", "description": "Main class managing USB mass storage devices, notifications, mounting, and configuration within the plugin framework."}, {"name": "USBDeviceNotification", "description": "Nested notification class that listens for USB device plug/unplug events and notifies the parent class."}, {"name": "Job", "description": "Represents a dispatchable job for handling mount/unmount events asynchronously."}], "methods": [{"name": "Register", "description": "Registers a notification sink for USB mass storage events."}, {"name": "Unregister", "description": "Unregisters a notification sink."}, {"name": "GetDeviceList", "description": "Retrieves a list of connected USB mass storage devices."}, {"name": "GetMountPoints", "description": "Gets mount points for a specified device."}, {"name": "GetPartitionInfo", "description": "Retrieves partition information for a given mount path."}, {"name": "Configure", "description": "Configures the plugin, likely during initialization."}, {"name": "void OnDevicePluggedIn(const USBDevice & device)", "description": "Handles the event when a USB device is plugged in.", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::USBDeviceNotification", "scopeKind": "class"}, {"name": "void OnDevicePluggedOut(const USBDevice & device)", "description": "Handles the event when a USB device is unplugged.", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::USBDeviceNotification", "scopeKind": "class"}, {"name": "registerEventHandlers", "description": "Sets up USB device event notification handlers."}, {"name": "MountDevicesOnBootUp", "description": "Mounts devices during system startup."}, {"name": "DeviceMount", "description": "Mounts a specific USB storage device."}, {"name": "void Dispatch()", "description": "Dispatches plugin events such as mount or unmount.", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::Job", "scopeKind": "class"}, {"name": "DispatchMountEvent", "description": "Dispatches a mount event notification."}, {"name": "DispatchUnMountEvent", "description": "Dispatches an unmount event notification."}, {"name": "GetFileSystemType", "description": "Returns the filesystem type for a given type code."}, {"name": "Core::ProxyType<Core::IDispatch> Create(USBMassStorageImplementation * usb_mass_storageImplementation,Event event,USBStorageDeviceInfo params)", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::Job", "scopeKind": "class", "description": "unavailable"}, {"name": "Job(USBMassStorageImplementation * usbMass_StorageImplementation,Event event,USBStorageDeviceInfo params)", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::Job", "scopeKind": "class", "description": "unavailable"}, {"name": "USBDeviceNotification(USBMassStorageImplementation & parent)", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::USBDeviceNotification", "scopeKind": "class", "description": "unavailable"}, {"name": "~Job()", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::Job", "scopeKind": "class", "description": "unavailable"}], "calls": ["WPEFramework::Exchange::IUSBDevice::INotification::OnDevicePluggedIn", "WPEFramework::Exchange::IUSBDevice::INotification::OnDevicePluggedOut", "Core::proxy_cast", "Core::ProxyType<Core::IDispatch>::Create", "WPEFramework::Plugin::USBMassStorageImplementation::Dispatch"], "search-terms": ["USBMassStorage", "DevicePluggedIn", "DevicePluggedOut", "MountPoints", "PartitionInfo", "Notification", "USBDevice", "Filesystem", "USBStorageDeviceInfo"], "state": 2, "file_id": 841, "knowledge_revision": 1965, "git_revision": "", "ctags": [{"_type": "tag", "name": "Create", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^            static Core::ProxyType<Core::IDispatch> Create(USBMassStorageImplementation* usb_mas/", "language": "C++", "typeref": "typename:Core::ProxyType<Core::IDispatch>", "kind": "function", "signature": "(USBMassStorageImplementation * usb_mass_storageImplementation,Event event,USBStorageDeviceInfo params)", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "Dispatch", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^            virtual void Dispatch() {$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "Event", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^        enum Event$/", "language": "C++", "kind": "enum", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Job", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^            Job(USBMassStorageImplementation* usbMass_StorageImplementation, Event event,$/", "language": "C++", "kind": "function", "signature": "(USBMassStorageImplementation * usbMass_StorageImplementation,Event event,USBStorageDeviceInfo params)", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "Job", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^        class EXTERNAL Job : public Core::IDispatch {$/", "language": "C++", "kind": "class", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "OnDevicePluggedIn", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^            void OnDevicePluggedIn(const USBDevice &device)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const USBDevice & device)", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::USBDeviceNotification", "scopeKind": "class"}, {"_type": "tag", "name": "OnDevicePluggedOut", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^            void OnDevicePluggedOut(const USBDevice &device)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const USBDevice & device)", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::USBDeviceNotification", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^namespace Plugin {$/", "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "USBDevice", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^using USBDevice = WPEFramework::Exchange::IUSBDevice::USBDevice;$/", "language": "C++", "typeref": "typename:WPEFramework::Exchange::IUSBDevice::USBDevice", "kind": "typedef"}, {"_type": "tag", "name": "USBDeviceNotification", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^            explicit USBDeviceNotification(USBMassStorageImplementation& parent)$/", "language": "C++", "kind": "function", "signature": "(USBMassStorageImplementation & parent)", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::USBDeviceNotification", "scopeKind": "class"}, {"_type": "tag", "name": "USBDeviceNotification", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^        class USBDeviceNotification : public Exchange::IUSBDevice::INotification {$/", "language": "C++", "kind": "class", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "USBMassStorageImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^    class USBMassStorageImplementation : public Exchange::IUSBMassStorage,$/", "language": "C++", "kind": "class", "scope": "WPEFramework::Plugin", "scopeKind": "namespace"}, {"_type": "tag", "name": "USBStorageDeviceInfo", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^using USBStorageDeviceInfo = WPEFramework::Exchange::IUSBMassStorage::USBStorageDeviceInfo;$/", "language": "C++", "typeref": "typename:WPEFramework::Exchange::IUSBMassStorage::USBStorageDeviceInfo", "kind": "typedef"}, {"_type": "tag", "name": "USBStorageFileSystem", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^using USBStorageFileSystem = WPEFramework::Exchange::IUSBMassStorage::USBStorageFileSystem;$/", "language": "C++", "typeref": "typename:WPEFramework::Exchange::IUSBMassStorage::USBStorageFileSystem", "kind": "typedef"}, {"_type": "tag", "name": "USBStorageMountFlags", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^using USBStorageMountFlags = WPEFramework::Exchange::IUSBMassStorage::USBStorageMountFlags;$/", "language": "C++", "typeref": "typename:WPEFramework::Exchange::IUSBMassStorage::USBStorageMountFlags", "kind": "typedef"}, {"_type": "tag", "name": "USB_STORAGE_EVENT_MOUNT", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^            USB_STORAGE_EVENT_MOUNT,$/", "language": "C++", "kind": "enumerator", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::Event", "scopeKind": "enum"}, {"_type": "tag", "name": "USB_STORAGE_EVENT_UNMOUNT", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^            USB_STORAGE_EVENT_UNMOUNT$/", "language": "C++", "kind": "enumerator", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::Event", "scopeKind": "enum"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^namespace WPEFramework {$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "_USB_DeviceNotification", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^        Core::Sink<USBDeviceNotification> _USB_DeviceNotification;$/", "language": "C++", "typeref": "typename:Core::Sink<USBDeviceNotification>", "kind": "member", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_adminLock", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^        mutable Core::CriticalSection _adminLock;$/", "language": "C++", "typeref": "typename:Core::CriticalSection", "kind": "member", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_event", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^            const Event _event;$/", "language": "C++", "typeref": "typename:const Event", "kind": "member", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "_instance", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^        static USBMassStorageImplementation* _instance;$/", "language": "C++", "typeref": "typename:USBMassStorageImplementation *", "kind": "member", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_params", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^            USBStorageDeviceInfo  _params;$/", "language": "C++", "typeref": "typename:USBStorageDeviceInfo", "kind": "member", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "_parent", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^            USBMassStorageImplementation& _parent;$/", "language": "C++", "typeref": "typename:USBMassStorageImplementation &", "kind": "member", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::USBDeviceNotification", "scopeKind": "class"}, {"_type": "tag", "name": "_registeredEventHandlers", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^        bool _registeredEventHandlers;$/", "language": "C++", "typeref": "typename:bool", "kind": "member", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_remoteUSBDeviceObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^        Exchange::IUSBDevice* _remoteUSBDeviceObject;$/", "language": "C++", "typeref": "typename:Exchange::IUSBDevice *", "kind": "member", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_service", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^        PluginHost::IShell* _service;$/", "language": "C++", "typeref": "typename:PluginHost::IShell *", "kind": "member", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_usbMass_StorageImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^            USBMassStorageImplementation *_usbMass_StorageImplementation;$/", "language": "C++", "typeref": "typename:USBMassStorageImplementation *", "kind": "member", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "_usbStorageNotification", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^        std::list<Exchange::IUSBMassStorage::INotification*> _usbStorageNotification;$/", "language": "C++", "typeref": "typename:std::list<Exchange::IUSBMassStorage::INotification * >", "kind": "member", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "usbStorageDeviceInfo", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^        std::list<USBStorageDeviceInfo> usbStorageDeviceInfo;$/", "language": "C++", "typeref": "typename:std::list<USBStorageDeviceInfo>", "kind": "member", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "usbStorageMountInfo", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^        std::map<string \\/*<device name>*\\/,std::list<Exchange::IUSBMassStorage::USBStorageMount/", "language": "C++", "typeref": "typename:std::map<string,std::list<Exchange::IUSBMassStorage::USBStorageMountInfo>>", "kind": "member", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "~Job", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "pattern": "/^            ~Job() {$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::Job", "scopeKind": "class"}], "hash": "5dd536c46bacda9f1e345476822e195c", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/USBMassStorage/USBMassStorageImplementation.h", "fields": [{"name": "Core::Sink<USBDeviceNotification> _USB_DeviceNotification", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::CriticalSection _adminLock", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "const Event _event", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::Job", "scopeKind": "class", "description": "unavailable"}, {"name": "USBMassStorageImplementation * _instance", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "USBStorageDeviceInfo _params", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::Job", "scopeKind": "class", "description": "unavailable"}, {"name": "USBMassStorageImplementation & _parent", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::USBDeviceNotification", "scopeKind": "class", "description": "unavailable"}, {"name": "bool _registeredEventHandlers", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "Exchange::IUSBDevice * _remoteUSBDeviceObject", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "PluginHost::IShell * _service", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "USBMassStorageImplementation * _usbMass_StorageImplementation", "scope": "WPEFramework::Plugin::USBMassStorageImplementation::Job", "scopeKind": "class", "description": "unavailable"}, {"name": "std::list<Exchange::IUSBMassStorage::INotification * > _usbStorageNotification", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::list<USBStorageDeviceInfo> usbStorageDeviceInfo", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::map<string,std::list<Exchange::IUSBMassStorage::USBStorageMountInfo>> usbStorageMountInfo", "scope": "WPEFramework::Plugin::USBMassStorageImplementation", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"1965": ""}]}