{"is_source_file": true, "format": "Rust", "description": "The file contains Rust source code for a module managing data governance, including policies for data exclusion, enforcement, and tag resolution within a larger SDK or application framework. It defines data structures, functions, and async methods for handling exclusion policies, interfacing with storage and privacy services, and managing data tags based on configurations and policies.", "external_files": ["std::collections::HashSet", "std::sync::{Arc, RwLock}", "thunder_ripple_sdk::ripple_sdk::api::storage_manager::StorageManager", "thunder_ripple_sdk::ripple_sdk::api::distributor::distributor_privacy::{DataEventType, ExclusionPolicy, ExclusionPolicyData}", "thunder_ripple_sdk::ripple_sdk::api::firebolt::fb_discovery::DataTagInfo", "thunder_ripple_sdk::ripple_sdk::api::manifest::device_manifest::DataGovernancePolicy", "thunder_ripple_sdk::ripple_sdk::api::storage_property::StorageProperty", "thunder_ripple_sdk::ripple_sdk::log::{debug, info}", "thunder_ripple_sdk::ripple_sdk::utils::error::RippleError", "crate::state::distributor_state::DistributorState"], "external_methods": ["StorageManager::get_bool", "StorageManager::set_string", "DistributorState::get_account_session", "DistributorState::privacy_service.get_partner_exclusions", "serde_json::to_string"], "published": ["default_enforcement_value", "default_drop_on_all_tags", "DataGovernance"], "classes": [{"name": "DataGovernanceState", "description": "Holds the state for data governance exclusions with thread-safe access."}], "methods": [{"name": "update_local_exclusion_policy(state: &DataGovernanceState, excl: ExclusionPolicy)", "description": "Updates the local exclusion policy in the DataGovernanceState.", "scope": "DataGovernance", "scopeKind": "implementation"}, {"name": "get_local_exclusion_policy(state: &DataGovernanceState) -> Option<ExclusionPolicy>", "description": "Retrieves the current local exclusion policy from the DataGovernanceState.", "scope": "DataGovernance", "scopeKind": "implementation"}, {"name": "get_tags( state: &DistributorState, app_id: String, data_type: DataEventType, policy: &DataGovernancePolicy, ) -> (HashSet<DataTagInfo>, bool)", "description": "Asynchronously computes tags for a given app and data type based on policies and exclusions.", "scope": "DataGovernance", "scopeKind": "implementation"}, {"name": "resolve_tags( platform_state: &DistributorState, app_id: String, data_type: DataEventType, ) -> (HashSet<DataTagInfo>, bool)", "description": "Asynchronously resolves applicable tags for an app and data type, considering current policies.", "scope": "DataGovernance", "scopeKind": "implementation"}, {"name": "refresh_partner_exclusions(state: &DistributorState)", "description": "Updates the local exclusions with data fetched from the privacy service.", "scope": "DataGovernance", "scopeKind": "implementation"}, {"name": "get_exclusions_from_privacy_service( state: &DistributorState, ) -> Result<ExclusionPolicy, RippleError>", "description": "Fetches partner exclusions policy from the privacy service.", "scope": "DataGovernance", "scopeKind": "implementation"}, {"name": "get_partner_exclusions( state: &DistributorState, ) -> Result<ExclusionPolicy, RippleError>", "description": "Returns the current partner exclusions policy, fetching from local cache if available.", "scope": "DataGovernance", "scopeKind": "implementation"}, {"name": "get_exclusion_data( setting: StorageProperty, exclusions: ExclusionPolicy, ) -> Option<ExclusionPolicyData>", "description": "Maps a storage property to its corresponding exclusion policy data.", "scope": "DataGovernance", "scopeKind": "implementation"}, {"name": "is_app_excluded_and_get_propagation_state( app_id: &String, data_type: &DataEventType, excl: &ExclusionPolicyData, ) -> (bool, bool)", "description": "Determines if an app is excluded for a data event type and the associated propagation state.", "scope": "DataGovernance", "scopeKind": "implementation"}, {"name": "default() -> Self", "scope": "DataGovernanceState", "scopeKind": "implementation", "description": "unavailable"}, {"name": "default_drop_on_all_tags() -> bool", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "default_enforcement_value() -> bool", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "fmt(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result", "scope": "DataGovernanceState", "scopeKind": "implementation", "description": "unavailable"}], "calls": ["DataGovernance::get_partner_exclusions", "DataGovernance::update_local_exclusion_policy", "StorageManager::get_bool", "StorageManager::set_string", "serde_json::to_string", "DistributorState::get_account_session", "DistributorState::privacy_service.get_partner_exclusions"], "search-terms": ["data_governance", "exclusion_policy", "partner_exclusions", "get_tags", "resolve_tags", "privacy_service", "policy"], "state": 2, "file_id": 317, "knowledge_revision": 1035, "git_revision": "046761b9656aa3448e0e16f1a3a9c084965a6b28", "ctags": [{"_type": "tag", "name": "DataGovernance", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^impl DataGovernance {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "DataGovernance", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^pub struct DataGovernance {}$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "DataGovernanceState", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^impl Default for DataGovernanceState {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "DataGovernanceState", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^impl std::fmt::Debug for DataGovernanceState {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "DataGovernanceState", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^pub struct DataGovernanceState {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "default", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^    fn default() -> Self {$/", "language": "Rust", "kind": "method", "signature": "() -> Self", "scope": "DataGovernanceState", "scopeKind": "implementation"}, {"_type": "tag", "name": "default_drop_on_all_tags", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^pub fn default_drop_on_all_tags() -> bool {$/", "language": "Rust", "kind": "function", "signature": "() -> bool"}, {"_type": "tag", "name": "default_enforcement_value", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^pub fn default_enforcement_value() -> bool {$/", "language": "Rust", "kind": "function", "signature": "() -> bool"}, {"_type": "tag", "name": "exclusions", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^    pub exclusions: Arc<RwLock<Option<ExclusionPolicy>>>,$/", "language": "Rust", "kind": "field", "scope": "DataGovernanceState", "scopeKind": "struct"}, {"_type": "tag", "name": "fmt", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^    fn fmt(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result {$/", "language": "Rust", "kind": "method", "signature": "(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result", "scope": "DataGovernanceState", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_exclusion_data", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^    pub fn get_exclusion_data($/", "language": "Rust", "kind": "method", "signature": "( setting: StorageProperty, exclusions: ExclusionPolicy, ) -> Option<ExclusionPolicyData>", "scope": "DataGovernance", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_exclusions_from_privacy_service", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^    async fn get_exclusions_from_privacy_service($/", "language": "Rust", "kind": "method", "signature": "( state: &DistributorState, ) -> Result<ExclusionPolicy, RippleError>", "scope": "DataGovernance", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_local_exclusion_policy", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^    fn get_local_exclusion_policy(state: &DataGovernanceState) -> Option<ExclusionPolicy> {$/", "language": "Rust", "kind": "method", "signature": "(state: &DataGovernanceState) -> Option<ExclusionPolicy>", "scope": "DataGovernance", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_partner_exclusions", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^    pub async fn get_partner_exclusions($/", "language": "Rust", "kind": "method", "signature": "( state: &DistributorState, ) -> Result<ExclusionPolicy, RippleError>", "scope": "DataGovernance", "scopeKind": "implementation"}, {"_type": "tag", "name": "get_tags", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^    pub async fn get_tags($/", "language": "Rust", "kind": "method", "signature": "( state: &DistributorState, app_id: String, data_type: DataEventType, policy: &DataGovernancePolicy, ) -> (HashSet<DataTagInfo>, bool)", "scope": "DataGovernance", "scopeKind": "implementation"}, {"_type": "tag", "name": "is_app_excluded_and_get_propagation_state", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^    fn is_app_excluded_and_get_propagation_state($/", "language": "Rust", "kind": "method", "signature": "( app_id: &String, data_type: &DataEventType, excl: &ExclusionPolicyData, ) -> (bool, bool)", "scope": "DataGovernance", "scopeKind": "implementation"}, {"_type": "tag", "name": "refresh_partner_exclusions", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^    pub async fn refresh_partner_exclusions(state: &DistributorState) {$/", "language": "Rust", "kind": "method", "signature": "(state: &DistributorState)", "scope": "DataGovernance", "scopeKind": "implementation"}, {"_type": "tag", "name": "resolve_tags", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^    pub async fn resolve_tags($/", "language": "Rust", "kind": "method", "signature": "( platform_state: &DistributorState, app_id: String, data_type: DataEventType, ) -> (HashSet<DataTagInfo>, bool)", "scope": "DataGovernance", "scopeKind": "implementation"}, {"_type": "tag", "name": "update_local_exclusion_policy", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/manager/data_governor.rs", "pattern": "/^    fn update_local_exclusion_policy(state: &DataGovernanceState, excl: ExclusionPolicy) {$/", "language": "Rust", "kind": "method", "signature": "(state: &DataGovernanceState, excl: ExclusionPolicy)", "scope": "DataGovernance", "scopeKind": "implementation"}], "hash": "9f98071e1abed8b819d4a5913c6bf832", "format-version": 4, "code-base-name": "app-gateway2", "filename": "Supporting_Files/ripple-eos/src/manager/data_governor.rs", "fields": [{"name": "pub exclusions: Arc<RwLock<Option<ExclusionPolicy>>>,", "scope": "DataGovernanceState", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"1035": "046761b9656aa3448e0e16f1a3a9c084965a6b28"}]}