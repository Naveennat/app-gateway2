{"is_source_file": true, "format": "C++ header", "description": "This file declares the RequestHandler class, which manages storage operations such as creating, retrieving, deleting, and clearing storage for applications. It includes methods for setting storage paths, handling quotas, and maintaining app-specific storage information. It also defines related data structures and internal mechanisms for thread safety and interaction with external storage interfaces.", "external_files": ["Module.h", "<interfaces/IStore2.h>"], "external_methods": [], "published": ["RequestHandler::getInstance", "RequestHandler::SetBaseStoragePath", "RequestHandler::appQuotaSizeProperty", "RequestHandler::populateAppInfoCacheFromStoragePath", "RequestHandler::setCurrentService", "RequestHandler::CreateStorage", "RequestHandler::GetStorage", "RequestHandler::DeleteStorage", "RequestHandler::Clear", "RequestHandler::ClearAll"], "classes": [{"name": "RequestHandler", "description": "Manages storage operations, including creation, deletion, and retrieval of app storage, handling quotas, and thread-safe storage info management within the plugin framework."}], "methods": [{"name": "getInstance", "description": "Provides singleton access to the RequestHandler instance."}, {"name": "SetBaseStoragePath", "description": "Sets the base directory path for storage."}, {"name": "appQuotaSizeProperty", "description": "Gets or sets the quota size property for a specific app and action."}, {"name": "populateAppInfoCacheFromStoragePath", "description": "Populates internal app storage info cache from the storage path."}, {"name": "setCurrentService", "description": "Sets the current service interface for plugin communication."}, {"name": "CreateStorage", "description": "Creates storage for an app with specified size and returns the path and errors if any."}, {"name": "GetStorage", "description": "Retrieves storage info (path, size, used) for an app given app ID, user ID, and group ID."}, {"name": "DeleteStorage", "description": "Deletes storage associated with the specified app ID."}, {"name": "Clear", "description": "Clears storage for a specified app."}, {"name": "ClearAll", "description": "Clears storage for all apps, with optional exemptions."}], "calls": ["Module.h", "interfaces/IStore2.h", "RequestHandler::createPersistentStoreRemoteStoreObject", "RequestHandler::releasePersistentStoreRemoteStoreObject", "RequestHandler::hasEnoughStorageFreeSpace", "RequestHandler::getDirectorySizeInBytes", "RequestHandler::deleteDirectoryEntries", "PluginHost::IShell"], "search-terms": ["RequestHandler singleton", "storage quota management", "app storage info", "createPersistentStore", "populateAppInfoCache"], "state": 2, "file_id": 4051, "knowledge_revision": 8322, "git_revision": "", "ctags": [{"_type": "tag", "name": "DELETE", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                    DELETE$/", "language": "C++", "kind": "enumerator", "scope": "WPEFramework::Plugin::RequestHandler::StorageActionType", "scopeKind": "enum"}, {"_type": "tag", "name": "GET", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                    GET,$/", "language": "C++", "kind": "enumerator", "scope": "WPEFramework::Plugin::RequestHandler::StorageActionType", "scopeKind": "enum"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^    namespace Plugin $/", "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "RequestHandler", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^        class RequestHandler$/", "language": "C++", "kind": "class", "scope": "WPEFramework::Plugin", "scopeKind": "namespace"}, {"_type": "tag", "name": "SET", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                    SET,$/", "language": "C++", "kind": "enumerator", "scope": "WPEFramework::Plugin::RequestHandler::StorageActionType", "scopeKind": "enum"}, {"_type": "tag", "name": "StorageActionType", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                enum StorageActionType$/", "language": "C++", "kind": "enum", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class"}, {"_type": "tag", "name": "StorageAppInfo", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                } StorageAppInfo;$/", "language": "C++", "typeref": "struct:WPEFramework::Plugin::RequestHandler::_StorageAppInfo", "kind": "typedef", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class"}, {"_type": "tag", "name": "StorageSize", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                } StorageSize;$/", "language": "C++", "typeref": "struct:WPEFramework::Plugin::RequestHandler::_StorageSize", "kind": "typedef", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class"}, {"_type": "tag", "name": "UNKNOWN", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                    UNKNOWN = 0,$/", "language": "C++", "kind": "enumerator", "scope": "WPEFramework::Plugin::RequestHandler::StorageActionType", "scopeKind": "enum"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^namespace WPEFramework$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "_StorageAppInfo", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                typedef struct _StorageAppInfo$/", "language": "C++", "kind": "struct", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class"}, {"_type": "tag", "name": "_StorageSize", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                typedef struct _StorageSize$/", "language": "C++", "kind": "struct", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class"}, {"_type": "tag", "name": "blockSize", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                    uint64_t blockSize = 0;$/", "language": "C++", "typeref": "typename:uint64_t", "kind": "member", "scope": "WPEFramework::Plugin::RequestHandler::_StorageSize", "scopeKind": "struct"}, {"_type": "tag", "name": "gid", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                    int32_t gid;         \\/* GID of the group who owns the storage *\\/$/", "language": "C++", "typeref": "typename:int32_t", "kind": "member", "scope": "WPEFramework::Plugin::RequestHandler::_StorageAppInfo", "scopeKind": "struct"}, {"_type": "tag", "name": "mBaseStoragePath", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                std::string mBaseStoragePath;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class"}, {"_type": "tag", "name": "mInstance", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                static RequestHandler* mInstance;$/", "language": "C++", "typeref": "typename:RequestHandler *", "kind": "member", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class"}, {"_type": "tag", "name": "mPersistentStoreRemoteStoreObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                Exchange::IStore2* mPersistentStoreRemoteStoreObject;$/", "language": "C++", "typeref": "typename:Exchange::IStore2 *", "kind": "member", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class"}, {"_type": "tag", "name": "mService", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                PluginHost::IShell* mService;$/", "language": "C++", "typeref": "typename:PluginHost::IShell *", "kind": "member", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class"}, {"_type": "tag", "name": "mStorageAppInfo", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                std::map<std::string, StorageAppInfo> mStorageAppInfo;  \\/* Map storing app stor/", "language": "C++", "typeref": "typename:std::map<std::string,StorageAppInfo>", "kind": "member", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class"}, {"_type": "tag", "name": "mStorageManagerImplLock", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                mutable std::mutex mStorageManagerImplLock;$/", "language": "C++", "typeref": "typename:std::mutex", "kind": "member", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class"}, {"_type": "tag", "name": "mStorageSizeLock", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                static std::mutex mStorageSizeLock;$/", "language": "C++", "typeref": "typename:std::mutex", "kind": "member", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                    std::string path;    \\/* Path to the application's storage *\\/$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::Plugin::RequestHandler::_StorageAppInfo", "scopeKind": "struct"}, {"_type": "tag", "name": "quotaKB", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                    uint32_t quotaKB;    \\/* Quota size in kilobytes for the storage *\\/$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "WPEFramework::Plugin::RequestHandler::_StorageAppInfo", "scopeKind": "struct"}, {"_type": "tag", "name": "storageLock", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                    std::mutex storageLock; \\/* Mutex for thread safety *\\/$/", "language": "C++", "typeref": "typename:std::mutex", "kind": "member", "scope": "WPEFramework::Plugin::RequestHandler::_StorageAppInfo", "scopeKind": "struct"}, {"_type": "tag", "name": "uid", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                    int32_t uid;         \\/* UID of the user who owns the storage *\\/$/", "language": "C++", "typeref": "typename:int32_t", "kind": "member", "scope": "WPEFramework::Plugin::RequestHandler::_StorageAppInfo", "scopeKind": "struct"}, {"_type": "tag", "name": "usedBytes", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                    uint64_t usedBytes = 0;$/", "language": "C++", "typeref": "typename:uint64_t", "kind": "member", "scope": "WPEFramework::Plugin::RequestHandler::_StorageSize", "scopeKind": "struct"}, {"_type": "tag", "name": "usedKB", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/StorageManager/RequestHandler.h", "pattern": "/^                    uint32_t usedKB;     \\/* Used space in kilobytes for the storage *\\/$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "WPEFramework::Plugin::RequestHandler::_StorageAppInfo", "scopeKind": "struct"}], "hash": "67d7541dc19c61861048128646c9a7f5", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/StorageManager/RequestHandler.h", "fields": [{"name": "uint64_t blockSize", "scope": "WPEFramework::Plugin::RequestHandler::_StorageSize", "scopeKind": "struct", "description": "unavailable"}, {"name": "int32_t gid", "scope": "WPEFramework::Plugin::RequestHandler::_StorageAppInfo", "scopeKind": "struct", "description": "unavailable"}, {"name": "std::string mBaseStoragePath", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class", "description": "unavailable"}, {"name": "RequestHandler * mInstance", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class", "description": "unavailable"}, {"name": "Exchange::IStore2 * mPersistentStoreRemoteStoreObject", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class", "description": "unavailable"}, {"name": "PluginHost::IShell * mService", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class", "description": "unavailable"}, {"name": "std::map<std::string,StorageAppInfo> mStorageAppInfo", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class", "description": "unavailable"}, {"name": "std::mutex mStorageManagerImplLock", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class", "description": "unavailable"}, {"name": "std::mutex mStorageSizeLock", "scope": "WPEFramework::Plugin::RequestHandler", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string path", "scope": "WPEFramework::Plugin::RequestHandler::_StorageAppInfo", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint32_t quotaKB", "scope": "WPEFramework::Plugin::RequestHandler::_StorageAppInfo", "scopeKind": "struct", "description": "unavailable"}, {"name": "std::mutex storageLock", "scope": "WPEFramework::Plugin::RequestHandler::_StorageAppInfo", "scopeKind": "struct", "description": "unavailable"}, {"name": "int32_t uid", "scope": "WPEFramework::Plugin::RequestHandler::_StorageAppInfo", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint64_t usedBytes", "scope": "WPEFramework::Plugin::RequestHandler::_StorageSize", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint32_t usedKB", "scope": "WPEFramework::Plugin::RequestHandler::_StorageAppInfo", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"8322": ""}]}