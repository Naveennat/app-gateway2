{"is_source_file": true, "format": "Rust", "description": "This is a Rust source file implementing an RPC server for advertising-related functionalities. It defines data structures, RPC method implementations, and logic for managing advertising IDs, configuration, and device attributes within a larger distributed SDK or application framework.", "external_files": ["crate::service::appsanity_advertising::AppsanityAdvertisingService", "crate::state::distributor_state::DistributorState", "crate::service::appsanity_advertising::XvpServiceUrl", "crate::util::service_util::create_grpc_client_session", "base64", "jsonrpsee::core::{async_trait, Error, RpcResult}", "jsonrpsee::proc_macros::rpc", "serde::{Deserialize, Serialize}", "serde_json::Value", "thunder_ripple_sdk::ripple_sdk::api::{config::Config, firebolt::{fb_advertising::{AdConfig, AdConfigRequestParams, AdConfigResponse, AdIdRequestParams, AdvertisingFrameworkConfig, GetAdConfig}, fb_capabilities::{CapabilityRole, FireboltCap, RoleInfo}}, gateway::rpc_gateway_api::{CallContext, RpcRequest}}", "thunder_ripple_sdk::ripple_sdk::extn::extn_client_message::ExtnResponse", "thunder_ripple_sdk::log::error"], "external_methods": ["create_grpc_client_session", "get_account_session", "request_with_timeout_main", "get_client", "reset_ad_identifier", "get_ad_identifier", "get_ad_config", "request_with_timeout_main", "get_allow_app_content_ad_targetting_settings", "get_allow_app_content_ad_targetting", "isPermitted"], "published": ["Advertising", "AdvertisingServer"], "classes": [{"name": "AdvertisingId", "description": "Represents the advertising ID with its associated properties: ifa, ifa_type, and lmt."}, {"name": "AdvertisingPolicy", "description": "Defines advertising policy parameters such as skip restriction and limit ad tracking."}, {"name": "AdvertisingIdRPCRequest", "description": "RPC request structure for retrieving advertising ID, optionally including scope options."}, {"name": "ScopeOption", "description": "Defines the scope for advertising ID requests, including type and id."}, {"name": "Scope", "description": "Specifies the scope type and identifier, used in advertising ID requests."}, {"name": "AdvertisingImpl", "description": "Implementation of the Advertising RPC server, managing advertising ID retrieval and configuration."}], "methods": [{"name": "reset_identifier(&self, _ctx: CallContext) -> RpcResult<()>", "description": "Resets the advertising identifier for the current session.", "scope": "AdvertisingImpl", "scopeKind": "implementation"}, {"name": "advertising_id( &self, ctx: CallContext, request: Option<AdvertisingIdRPCRequest>, ) -> RpcResult<AdvertisingId>", "description": "Retrieves the advertising ID, considering privacy and scope options.", "scope": "AdvertisingImpl", "scopeKind": "implementation"}, {"name": "config( &self, ctx: CallContext, config: GetAdConfig, ) -> RpcResult<AdvertisingFrameworkConfig>", "description": "Fetches advertising configuration including URLs, ad IDs, and privacy settings.", "scope": "AdvertisingImpl", "scopeKind": "implementation"}, {"name": "device_attributes(&self, ctx: CallContext) -> RpcResult<Value>", "description": "Returns device attributes as a JSON object.", "scope": "Advertising", "scopeKind": "interface"}, {"name": "app_bundle_id(&self, ctx: CallContext) -> RpcResult<String>", "description": "Generates the application bundle ID with a specific suffix.", "scope": "Advertising", "scopeKind": "interface"}, {"name": "badger_init_object( &self, ctx: CallContext, config: AdConfig, ) -> RpcResult<AdvertisingFrameworkConfig>", "description": "Initializes advertising configuration based on provided options, especially COPPA settings.", "scope": "Advertising", "scopeKind": "interface"}, {"name": "device_ad_attributes(&self, ctx: CallContext) -> RpcResult<String>", "description": "Fetches device ad attributes as a raw string.", "scope": "Advertising", "scopeKind": "interface"}, {"name": "as_string(&self) -> &'static str", "scope": "ScopeType", "scopeKind": "implementation", "description": "unavailable"}, {"name": "badger_init_object( &self, ctx: CallContext, options: AdConfig, ) -> RpcResult<AdvertisingFrameworkConfig>", "scope": "AdvertisingImpl", "scopeKind": "implementation", "description": "unavailable"}, {"name": "get_scope_option_map(options: &Option<ScopeOption>) -> HashMap<String, String>", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "new(state: &DistributorState) -> Self", "scope": "AdvertisingImpl", "scopeKind": "implementation", "description": "unavailable"}, {"name": "reset_identifier(&self, ctx: CallContext) -> RpcResult<()>", "scope": "Advertising", "scopeKind": "interface", "description": "unavailable"}, {"name": "serialize<S: serde::Serializer>(&self, serializer: S) -> Result<S::Ok, S::Error>", "scope": "AdvertisingId", "scopeKind": "implementation", "description": "unavailable"}], "calls": ["self.state.get_account_session()", "self.service.clone().reset_ad_identifier(session)", "client.request_with_timeout_main()", "self.state.get_client()", "self.service.clone().get_ad_identifier()", "self.service.clone().get_ad_config()", "client.request_with_timeout_main()", "client.request_with_timeout_main()", "self.config()", "self.device_attributes()"], "search-terms": ["eos_advertising_rpc", "AdvertisingId", "AdvertisingPolicy", "AdvertisingImpl", "advertising.config", "ad_server_url", "privacy_data", "deviceAttributes", "appBundleId", "rpc method"], "state": 2, "file_id": 2570, "knowledge_revision": 5146, "git_revision": "0f87a35b32215bc8547fb583d6c84bd51f603f69", "ctags": [{"_type": "tag", "name": "Advertising", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^pub trait Advertising {$/", "language": "Rust", "kind": "interface"}, {"_type": "tag", "name": "AdvertisingId", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^impl Serialize for AdvertisingId {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "AdvertisingId", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^pub struct AdvertisingId {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "AdvertisingIdRPCRequest", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^pub struct AdvertisingIdRPCRequest {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "AdvertisingImpl", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^impl AdvertisingImpl {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "AdvertisingImpl", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^impl AdvertisingServer for AdvertisingImpl {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "AdvertisingImpl", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^pub struct AdvertisingImpl {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "AdvertisingPolicy", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^pub struct AdvertisingPolicy {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "Browse", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    Browse,$/", "language": "Rust", "kind": "enumerator", "scope": "ScopeType", "scopeKind": "enum"}, {"_type": "tag", "name": "Content", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    Content,$/", "language": "Rust", "kind": "enumerator", "scope": "ScopeType", "scopeKind": "enum"}, {"_type": "tag", "name": "Scope", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^pub struct Scope {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "ScopeOption", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^pub struct ScopeOption {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "ScopeType", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^impl ScopeType {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "ScopeType", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^pub enum ScopeType {$/", "language": "Rust", "kind": "enum"}, {"_type": "tag", "name": "_type", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    pub _type: ScopeType,$/", "language": "Rust", "kind": "field", "scope": "Scope", "scopeKind": "struct"}, {"_type": "tag", "name": "advertising_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    async fn advertising_id($/", "language": "Rust", "kind": "method", "signature": "( &self, ctx: CallContext, request: Option<AdvertisingIdRPCRequest>, ) -> RpcResult<AdvertisingId>", "scope": "Advertising", "scopeKind": "interface"}, {"_type": "tag", "name": "advertising_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    async fn advertising_id($/", "language": "Rust", "kind": "method", "signature": "( &self, ctx: CallContext, request: Option<AdvertisingIdRPCRequest>, ) -> RpcResult<AdvertisingId>", "scope": "AdvertisingImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "app_bundle_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    fn app_bundle_id(&self, ctx: CallContext) -> RpcResult<String> {$/", "language": "Rust", "kind": "method", "signature": "(&self, ctx: CallContext) -> RpcResult<String>", "scope": "AdvertisingImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "app_bundle_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    fn app_bundle_id(&self, ctx: CallContext) -> RpcResult<String>;$/", "language": "Rust", "kind": "method", "signature": "(&self, ctx: CallContext) -> RpcResult<String>", "scope": "Advertising", "scopeKind": "interface"}, {"_type": "tag", "name": "as_string", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    pub fn as_string(&self) -> &'static str {$/", "language": "Rust", "kind": "method", "signature": "(&self) -> &'static str", "scope": "ScopeType", "scopeKind": "implementation"}, {"_type": "tag", "name": "badger_init_object", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    async fn badger_init_object($/", "language": "Rust", "kind": "method", "signature": "( &self, ctx: CallContext, config: AdConfig, ) -> RpcResult<AdvertisingFrameworkConfig>", "scope": "Advertising", "scopeKind": "interface"}, {"_type": "tag", "name": "badger_init_object", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    async fn badger_init_object($/", "language": "Rust", "kind": "method", "signature": "( &self, ctx: CallContext, options: AdConfig, ) -> RpcResult<AdvertisingFrameworkConfig>", "scope": "AdvertisingImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    async fn config($/", "language": "Rust", "kind": "method", "signature": "( &self, ctx: CallContext, config: GetAdConfig, ) -> RpcResult<AdvertisingFrameworkConfig>", "scope": "Advertising", "scopeKind": "interface"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    async fn config($/", "language": "Rust", "kind": "method", "signature": "( &self, ctx: CallContext, config: GetAdConfig, ) -> RpcResult<AdvertisingFrameworkConfig>", "scope": "AdvertisingImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "device_ad_attributes", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    async fn device_ad_attributes(&self, ctx: CallContext) -> RpcResult<String> {$/", "language": "Rust", "kind": "method", "signature": "(&self, ctx: CallContext) -> RpcResult<String>", "scope": "AdvertisingImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "device_ad_attributes", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    async fn device_ad_attributes(&self, ctx: CallContext) -> RpcResult<String>;$/", "language": "Rust", "kind": "method", "signature": "(&self, ctx: CallContext) -> RpcResult<String>", "scope": "Advertising", "scopeKind": "interface"}, {"_type": "tag", "name": "device_attributes", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    async fn device_attributes(&self, ctx: CallContext) -> RpcResult<Value> {$/", "language": "Rust", "kind": "method", "signature": "(&self, ctx: CallContext) -> RpcResult<Value>", "scope": "AdvertisingImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "device_attributes", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    async fn device_attributes(&self, ctx: CallContext) -> RpcResult<Value>;$/", "language": "Rust", "kind": "method", "signature": "(&self, ctx: CallContext) -> RpcResult<Value>", "scope": "Advertising", "scopeKind": "interface"}, {"_type": "tag", "name": "get_scope_option_map", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^fn get_scope_option_map(options: &Option<ScopeOption>) -> HashMap<String, String> {$/", "language": "Rust", "kind": "function", "signature": "(options: &Option<ScopeOption>) -> HashMap<String, String>"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    pub id: String,$/", "language": "Rust", "kind": "field", "scope": "Scope", "scopeKind": "struct"}, {"_type": "tag", "name": "ifa", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    pub ifa: String,$/", "language": "Rust", "kind": "field", "scope": "AdvertisingId", "scopeKind": "struct"}, {"_type": "tag", "name": "ifa_type", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    pub ifa_type: String,$/", "language": "Rust", "kind": "field", "scope": "AdvertisingId", "scopeKind": "struct"}, {"_type": "tag", "name": "limit_ad_tracking", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    pub limit_ad_tracking: bool,$/", "language": "Rust", "kind": "field", "scope": "AdvertisingPolicy", "scopeKind": "struct"}, {"_type": "tag", "name": "lmt", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    pub lmt: String,$/", "language": "Rust", "kind": "field", "scope": "AdvertisingId", "scopeKind": "struct"}, {"_type": "tag", "name": "new", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    pub(crate) fn new(state: &DistributorState) -> Self {$/", "language": "Rust", "kind": "method", "signature": "(state: &DistributorState) -> Self", "scope": "AdvertisingImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "options", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    pub options: Option<ScopeOption>,$/", "language": "Rust", "kind": "field", "scope": "AdvertisingIdRPCRequest", "scopeKind": "struct"}, {"_type": "tag", "name": "reset_identifier", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    async fn reset_identifier(&self, _ctx: CallContext) -> RpcResult<()> {$/", "language": "Rust", "kind": "method", "signature": "(&self, _ctx: CallContext) -> RpcResult<()>", "scope": "AdvertisingImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "reset_identifier", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    async fn reset_identifier(&self, ctx: CallContext) -> RpcResult<()>;$/", "language": "Rust", "kind": "method", "signature": "(&self, ctx: CallContext) -> RpcResult<()>", "scope": "Advertising", "scopeKind": "interface"}, {"_type": "tag", "name": "scope", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    pub scope: Option<Scope>,$/", "language": "Rust", "kind": "field", "scope": "ScopeOption", "scopeKind": "struct"}, {"_type": "tag", "name": "serialize", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    fn serialize<S: serde::Serializer>(&self, serializer: S) -> Result<S::Ok, S::Error> {$/", "language": "Rust", "kind": "method", "signature": "<S: serde::Serializer>(&self, serializer: S) -> Result<S::Ok, S::Error>", "scope": "AdvertisingId", "scopeKind": "implementation"}, {"_type": "tag", "name": "service", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    pub service: AppsanityAdvertisingService,$/", "language": "Rust", "kind": "field", "scope": "AdvertisingImpl", "scopeKind": "struct"}, {"_type": "tag", "name": "skip_restriction", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    pub skip_restriction: String,$/", "language": "Rust", "kind": "field", "scope": "AdvertisingPolicy", "scopeKind": "struct"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "pattern": "/^    pub state: DistributorState,$/", "language": "Rust", "kind": "field", "scope": "AdvertisingImpl", "scopeKind": "struct"}], "hash": "10e627982296bd449abc9a5ed573c41b", "format-version": 4, "code-base-name": "app-gateway2", "filename": "Supporting_Files/ripple-eos/src/rpc/eos_advertising_rpc.rs", "fields": [{"name": "pub trait Advertising {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pub _type: ScopeType,", "scope": "Scope", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub id: String,", "scope": "Scope", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub ifa: String,", "scope": "AdvertisingId", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub ifa_type: String,", "scope": "AdvertisingId", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub limit_ad_tracking: bool,", "scope": "AdvertisingPolicy", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub lmt: String,", "scope": "AdvertisingId", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub options: Option<ScopeOption>,", "scope": "AdvertisingIdRPCRequest", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub scope: Option<Scope>,", "scope": "ScopeOption", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub service: AppsanityAdvertisingService,", "scope": "AdvertisingImpl", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub skip_restriction: String,", "scope": "AdvertisingPolicy", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub state: DistributorState,", "scope": "AdvertisingImpl", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"5146": "0f87a35b32215bc8547fb583d6c84bd51f603f69"}]}