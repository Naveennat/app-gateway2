{"is_source_file": true, "format": "Rust", "description": "This file defines a Rust trait and implementation for an RPC interface managing device provisioning and querying device information in a distributed system. It includes RPC method declarations, internal logic for handling device sessions, and utility functions for retrieving device identifiers like MAC address.", "external_files": ["jsonrpsee", "thunder_ripple_sdk", "crate::extn::thunder::thunder_session", "crate::rpc::rpc_utils", "crate::state::distributor_state"], "external_methods": ["jsonrpsee::core::async_trait::async_trait", "jsonrpsee::proc_macros::rpc", "thunder_ripple_sdk::client::device_operator::DeviceCallRequest", "thunder_ripple_sdk::client::thunder_plugin::ThunderPlugin", "thunder_ripple_sdk::ripple_sdk::api::gateway::rpc_gateway_api::CallContext", "thunder_ripple_sdk::ripple_sdk::api::session::ProvisionRequest", "thunder_ripple_sdk::log::{debug, error, info}", "crate::extn::thunder::thunder_session::ThunderSessionService", "crate::rpc::rpc_utils::rpc_err", "crate::state::distributor_state::DistributorState"], "published": ["Device"], "classes": [{"name": "DeviceImpl", "description": "Implementation of the Device RPC interface, managing device provisioning and fetching device identifiers."}], "methods": [{"name": "new(state: &DistributorState) -> Self", "description": "Constructor for DeviceImpl that clones the distributor state.", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"name": "provision( &self, ctx: CallContext, provision_request: ProvisionRequest, ) -> RpcResult<()>", "description": "Handles the device provisioning logic, including updating sessions and calling external services.", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"name": "provision( &self, mut _ctx: CallContext, provision_request: ProvisionRequest, ) -> RpcResult<()>", "description": "RPC method exposed externally to handle device provisioning requests.", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"name": "id(&self, _ctx: CallContext) -> RpcResult<String>", "description": "RPC method to retrieve the device's unique identifier.", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"name": "distributor(&self, _ctx: CallContext) -> RpcResult<String>", "description": "RPC method to fetch the distributor ID associated with the device.", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"name": "distributor(&self, ctx: CallContext) -> RpcResult<String>", "scope": "Device", "scopeKind": "interface", "description": "unavailable"}, {"name": "filter_mac(mac_address: String) -> String", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_device_id(state: &DistributorState) -> RpcResult<String>", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_mac(state: &DistributorState) -> String", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "id(&self, ctx: CallContext) -> RpcResult<String>", "scope": "Device", "scopeKind": "interface", "description": "unavailable"}], "calls": ["ThunderSessionService::get_account_session", "ThunderSessionService::set_provision", "self.state.get_account_session", "self.state.update_account_session", "self.state.get_thunder", "get_device_id", "get_mac", "client.call"], "search-terms": ["rust rpc device provisioning", "ThunderSessionService get/set", "DistributorState device session", "device ID retrieval", "getDeviceInfo method", "mac address filter"], "state": 2, "file_id": 335, "knowledge_revision": 1051, "git_revision": "046761b9656aa3448e0e16f1a3a9c084965a6b28", "ctags": [{"_type": "tag", "name": "Device", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^pub trait Device {$/", "language": "Rust", "kind": "interface"}, {"_type": "tag", "name": "DeviceImpl", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^impl DeviceImpl {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "DeviceImpl", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^impl DeviceServer for DeviceImpl {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "DeviceImpl", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^pub struct DeviceImpl {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "distributor", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    async fn distributor(&self, _ctx: CallContext) -> RpcResult<String> {$/", "language": "Rust", "kind": "method", "signature": "(&self, _ctx: CallContext) -> RpcResult<String>", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "distributor", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    async fn distributor(&self, ctx: CallContext) -> RpcResult<String>;$/", "language": "Rust", "kind": "method", "signature": "(&self, ctx: CallContext) -> RpcResult<String>", "scope": "Device", "scopeKind": "interface"}, {"_type": "tag", "name": "filter_mac", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^fn filter_mac(mac_address: String) -> String {$/", "language": "Rust", "kind": "function", "signature": "(mac_address: String) -> String"}, {"_type": "tag", "name": "get_device_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^pub(crate) async fn get_device_id(state: &DistributorState) -> RpcResult<String> {$/", "language": "Rust", "kind": "function", "signature": "(state: &DistributorState) -> RpcResult<String>"}, {"_type": "tag", "name": "get_mac", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^pub(crate) async fn get_mac(state: &DistributorState) -> String {$/", "language": "Rust", "kind": "function", "signature": "(state: &DistributorState) -> String"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    async fn id(&self, _ctx: CallContext) -> RpcResult<String> {$/", "language": "Rust", "kind": "method", "signature": "(&self, _ctx: CallContext) -> RpcResult<String>", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    async fn id(&self, ctx: CallContext) -> RpcResult<String>;$/", "language": "Rust", "kind": "method", "signature": "(&self, ctx: CallContext) -> RpcResult<String>", "scope": "Device", "scopeKind": "interface"}, {"_type": "tag", "name": "new", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    pub fn new(state: &DistributorState) -> Self {$/", "language": "Rust", "kind": "method", "signature": "(state: &DistributorState) -> Self", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "provision", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    async fn provision($/", "language": "Rust", "kind": "method", "signature": "( &self, ctx: CallContext, provision_request: ProvisionRequest, ) -> RpcResult<()>", "scope": "Device", "scopeKind": "interface"}, {"_type": "tag", "name": "provision", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    async fn provision($/", "language": "Rust", "kind": "method", "signature": "( &self, ctx: CallContext, provision_request: ProvisionRequest, ) -> RpcResult<()>", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "provision", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    async fn provision($/", "language": "Rust", "kind": "method", "signature": "( &self, mut _ctx: CallContext, provision_request: ProvisionRequest, ) -> RpcResult<()>", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    pub state: DistributorState,$/", "language": "Rust", "kind": "field", "scope": "DeviceImpl", "scopeKind": "struct"}], "hash": "211e662e0b9560ebf810afbf8235450c", "format-version": 4, "code-base-name": "app-gateway2", "filename": "Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "fields": [{"name": "pub trait Device {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pub state: DistributorState,", "scope": "DeviceImpl", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"1051": "046761b9656aa3448e0e16f1a3a9c084965a6b28"}]}