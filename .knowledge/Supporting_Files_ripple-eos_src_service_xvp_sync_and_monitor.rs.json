{"is_source_file": true, "format": "Rust", "description": "This source file defines the `SyncAndMonitorService` class along with related enums and functions for synchronizing and monitoring device state, handling listener requests, and managing partner exclusions in a distributed system. It utilizes asynchronous Rust features such as Tokio and communicates with external components via channels and network requests.", "external_files": ["crate::manager::data_governor::DataGovernance", "crate::manager::privacy_response_manager::PrivacyResponseManager", "crate::message::DpabError", "crate::state::distributor_state::DistributorState", "crate::util::cloud_linchpin_monitor::LinchpinConnectionStatus", "crate::util::cloud_sync_monitor_utils::get_sync_settings", "crate::util::cloud_linchpin_monitor::CloudLinchpinMonitor", "crate::util::cloud_periodic_sync::CloudPeriodicSync", "crate::util::cloud_sync_monitor_utils::StateRequest", "crate::util::sync_settings::SyncSettings", "thunder_ripple_sdk::ripple_sdk::api::device::device_info_request::DeviceInfoRequest", "thunder_ripple_sdk::ripple_sdk::api::distributor::distributor_privacy::PrivacyResponse", "thunder_ripple_sdk::ripple_sdk::api::manifest::device_manifest::PrivacySettingsStorageType", "thunder_ripple_sdk::ripple_sdk::api::session::AccountSession", "thunder_ripple_sdk::ripple_sdk::extn::client::extn_client::ExtnClient", "thunder_ripple_sdk::ripple_sdk::log::{debug, error}", "tokio::sync::mpsc::{self, Receiver, Sender}"], "external_methods": ["DataGovernance::refresh_partner_exclusions", "START_PARTNER_EXCLUSION_SYNC_THREAD.call_once", "CloudPeriodicSync::start", "CloudLinchpinMonitor::start"], "published": [], "classes": [{"name": "SyncAndMonitorModule", "description": "Enum representing the modules that can be synchronized and monitored, such as Privacy and User Grants."}, {"name": "SyncAndMonitorService", "description": "Main service class managing synchronization and monitoring processes, including state request processing and partner exclusion updates."}], "methods": [{"name": "SyncAndMonitorService::process_state_requests", "description": "Asynchronous function that processes incoming state requests via a receiver channel, managing listeners, topics, and connection status updates."}, {"name": "SyncAndMonitorService::start", "description": "Starts the sync and monitor service by initializing the necessary components and launching the state request processing loop."}, {"name": "SyncAndMonitorService::new", "description": "Constructs a new instance of the service, setting up channels, periodic syncs, and monitoring components."}, {"name": "SyncAndMonitorService::sync", "description": "Performs synchronization tasks if privacy settings indicate, triggering privacy and user grants sync processes."}, {"name": "SyncAndMonitorService::handle_sync_request", "description": "Handles a specific sync request for a given module, setting up linchpin monitoring and periodic syncs."}, {"name": "handle_sync_request( &self, module: SyncAndMonitorModule, callback: Option<Sender<PrivacyResponse>>, ) -> Result<(), DpabError>", "scope": "SyncAndMonitorService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "new(state: &DistributorState) -> Self", "scope": "SyncAndMonitorService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "process_state_requests( extn_client: ExtnClient, mut rx: Receiver<StateRequest>, account_session: Arc<RwLock<Option<AccountSession>>>, )", "scope": "SyncAndMonitorService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "start(state: DistributorState)", "scope": "SyncAndMonitorService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "sync(&self)", "scope": "SyncAndMonitorService", "scopeKind": "implementation", "description": "unavailable"}, {"name": "sync_partner_exclusions(state: DistributorState)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["Self::process_state_requests", "CloudPeriodicSync::start", "CloudLinchpinMonitor::start", "SyncAndMonitorService::handle_sync_request", "DataGovernance::refresh_partner_exclusions"], "search-terms": ["xvp_sync_and_monitor", "SyncAndMonitorService", "partner_exclusion_refresh", "process_state_requests", "SyncAndMonitorModule", "privacy_settings_storage_type", "cloud_sync_monitor_utils", "cloud_linchpin_monitor"], "state": 2, "file_id": 2594, "knowledge_revision": 5173, "git_revision": "0f87a35b32215bc8547fb583d6c84bd51f603f69", "ctags": [{"_type": "tag", "name": "Privacy", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/xvp_sync_and_monitor.rs", "pattern": "/^    Privacy,$/", "language": "Rust", "kind": "enumerator", "scope": "SyncAndMonitorModule", "scopeKind": "enum"}, {"_type": "tag", "name": "START_PARTNER_EXCLUSION_SYNC_THREAD", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/xvp_sync_and_monitor.rs", "pattern": "/^static START_PARTNER_EXCLUSION_SYNC_THREAD: Once = Once::new();$/", "language": "Rust", "kind": "variable"}, {"_type": "tag", "name": "SyncAndMonitorModule", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/xvp_sync_and_monitor.rs", "pattern": "/^pub enum SyncAndMonitorModule {$/", "language": "Rust", "kind": "enum"}, {"_type": "tag", "name": "SyncAndMonitorService", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/xvp_sync_and_monitor.rs", "pattern": "/^impl SyncAndMonitorService {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "SyncAndMonitorService", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/xvp_sync_and_monitor.rs", "pattern": "/^pub struct SyncAndMonitorService {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "UserGrants", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/xvp_sync_and_monitor.rs", "pattern": "/^    UserGrants,$/", "language": "Rust", "kind": "enumerator", "scope": "SyncAndMonitorModule", "scopeKind": "enum"}, {"_type": "tag", "name": "cloud_linchpin_monitor", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/xvp_sync_and_monitor.rs", "pattern": "/^    cloud_linchpin_monitor: CloudLinchpinMonitor,$/", "language": "Rust", "kind": "field", "scope": "SyncAndMonitorService", "scopeKind": "struct"}, {"_type": "tag", "name": "cloud_periodic_sync", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/xvp_sync_and_monitor.rs", "pattern": "/^    pub cloud_periodic_sync: CloudPeriodicSync,$/", "language": "Rust", "kind": "field", "scope": "SyncAndMonitorService", "scopeKind": "struct"}, {"_type": "tag", "name": "handle_sync_request", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/xvp_sync_and_monitor.rs", "pattern": "/^    async fn handle_sync_request($/", "language": "Rust", "kind": "method", "signature": "( &self, module: SyncAndMonitorModule, callback: Option<Sender<PrivacyResponse>>, ) -> Result<(), DpabError>", "scope": "SyncAndMonitorService", "scopeKind": "implementation"}, {"_type": "tag", "name": "new", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/xvp_sync_and_monitor.rs", "pattern": "/^    fn new(state: &DistributorState) -> Self {$/", "language": "Rust", "kind": "method", "signature": "(state: &DistributorState) -> Self", "scope": "SyncAndMonitorService", "scopeKind": "implementation"}, {"_type": "tag", "name": "process_state_requests", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/xvp_sync_and_monitor.rs", "pattern": "/^    pub async fn process_state_requests($/", "language": "Rust", "kind": "method", "signature": "( extn_client: ExtnClient, mut rx: Receiver<StateRequest>, account_session: Arc<RwLock<Option<AccountSession>>>, )", "scope": "SyncAndMonitorService", "scopeKind": "implementation"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/xvp_sync_and_monitor.rs", "pattern": "/^    pub fn start(state: DistributorState) {$/", "language": "Rust", "kind": "method", "signature": "(state: DistributorState)", "scope": "SyncAndMonitorService", "scopeKind": "implementation"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/xvp_sync_and_monitor.rs", "pattern": "/^    state: DistributorState,$/", "language": "Rust", "kind": "field", "scope": "SyncAndMonitorService", "scopeKind": "struct"}, {"_type": "tag", "name": "sync", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/xvp_sync_and_monitor.rs", "pattern": "/^    fn sync(&self) {$/", "language": "Rust", "kind": "method", "signature": "(&self)", "scope": "SyncAndMonitorService", "scopeKind": "implementation"}, {"_type": "tag", "name": "sync_partner_exclusions", "path": "/home/kavia/workspace/code-generation/app-gateway2/Supporting_Files/ripple-eos/src/service/xvp_sync_and_monitor.rs", "pattern": "/^async fn sync_partner_exclusions(state: DistributorState) {$/", "language": "Rust", "kind": "function", "signature": "(state: DistributorState)"}], "hash": "fae0055f2fdfcf0c563921745723b688", "format-version": 4, "code-base-name": "app-gateway2", "filename": "Supporting_Files/ripple-eos/src/service/xvp_sync_and_monitor.rs", "fields": [{"name": "static START_PARTNER_EXCLUSION_SYNC_THREAD: Once = Once::new();", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "cloud_linchpin_monitor: CloudLinchpinMonitor,", "scope": "SyncAndMonitorService", "scopeKind": "struct", "description": "unavailable"}, {"name": "pub cloud_periodic_sync: CloudPeriodicSync,", "scope": "SyncAndMonitorService", "scopeKind": "struct", "description": "unavailable"}, {"name": "state: DistributorState,", "scope": "SyncAndMonitorService", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"5173": "0f87a35b32215bc8547fb583d6c84bd51f603f69"}]}