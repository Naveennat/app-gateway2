{"is_source_file": true, "format": "C++", "description": "Source implementation of the PreinstallManager in the WPEFramework plugin, handling package preinstallation logic including directory traversal, version comparison, package installation, notification management, and singleton instance handling.", "external_files": ["PreinstallManagerImplementation.h"], "external_methods": ["Core::hresult Core::ERROR_NONE", "Core::hresult Core::ERROR_GENERAL", "Core::hresult Core::ERROR_NONE", "Core::hresult Core::ERROR_GENERAL", "Core::hresult Core::ERROR_NONE", "Core::hresult Core::ERROR_NONE", "Core::hresult Core::ERROR_NONE", "Core::hresult Core::ERROR_GENERAL", "Core::hresult Core::ERROR_NONE", "Core::hresult Core::ERROR_GENERAL", "Core::hresult Core::ERROR_NONE", "Core::hresult Core::ERROR_GENERAL", "Core::hresult Core::ERROR_NONE", "bool", "bool", "bool", "bool", "bool"], "published": ["PreinstallManagerImplementation::StartPreinstall"], "classes": [{"name": "PreinstallManagerImplementation", "description": "Implements a singleton class managing preinstallation of packages, including directory scanning, version comparison, package installation, notifications, and cleanup."}], "methods": [{"name": "bool readPreinstallDirectory(std::list<PackageInfo> & packages)", "description": "Traverses the preinstall directory to discover package folders, collects package details using the package installer, and logs the findings.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "bool isNewerVersion(const std::string & v1,const std::string & v2)", "description": "Compares two version strings to determine if the first is newer than the second.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult StartPreinstall(bool forceInstall)", "description": "Main method to scan preinstall directory, determine which packages need installing or updating, and perform installations accordingly.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "uint32_t Configure(PluginHost::IShell * service)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "void Dispatch(EventNames event,const JsonObject params)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "PreinstallManagerImplementation()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult Register(Exchange::IPreinstallManager::INotification * notification)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult Unregister(Exchange::IPreinstallManager::INotification * notification)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult createPackageManagerObject()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "void dispatchEvent(EventNames event,const JsonObject & params)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "string getFailReason(FailReason reason)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "PreinstallManagerImplementation * getInstance()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "void handleOnAppInstallationStatus(const std::string & jsonresponse)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "void releasePackageManagerObject()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "~PreinstallManagerImplementation()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}], "calls": ["opendir", "readdir", "closedir", "mPackageManagerInstallerObject->GetConfigForPackage", "mPackageManagerInstallerObject->ListPackages", "mPackageManagerInstallerObject->Install", "mPackageManagerInstallerObject->Unregister", "mPackageManagerInstallerObject->Release", "mCurrentservice->QueryInterfaceByCallsign", "Core::Service<RPC::IteratorType<Exchange::IPackageInstaller::IKeyValueIterator>>"], "search-terms": ["PreinstallDirectoryTraversal", "VersionComparison", "PackageInstallation", "PreinstallManagerSingleton", "readPreinstallDirectory", "isNewerVersion", "StartPreinstall"], "state": 2, "file_id": 7940, "knowledge_revision": 15997, "git_revision": "", "ctags": [{"_type": "tag", "name": "AI_PREINSTALL_DIRECTORY", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^#define AI_PREINSTALL_DIRECTORY /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "Configure", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    uint32_t PreinstallManagerImplementation::Configure(PluginHost::IShell* service)$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(PluginHost::IShell * service)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Dispatch", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    void PreinstallManagerImplementation::Dispatch(EventNames event, const JsonObject params)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(EventNames event,const JsonObject params)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    namespace Plugin$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "PreinstallManagerImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    PreinstallManagerImplementation::PreinstallManagerImplementation()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Register", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    Core::hresult PreinstallManagerImplementation::Register(Exchange::IPreinstallManager::INotif/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(Exchange::IPreinstallManager::INotification * notification)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "StartPreinstall", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    Core::hresult PreinstallManagerImplementation::StartPreinstall(bool forceInstall)$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(bool forceInstall)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Unregister", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    Core::hresult PreinstallManagerImplementation::Unregister(Exchange::IPreinstallManager::INot/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(Exchange::IPreinstallManager::INotification * notification)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^namespace WPEFramework$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "_instance", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    PreinstallManagerImplementation *PreinstallManagerImplementation::_instance = nullptr;$/", "language": "C++", "typeref": "typename:PreinstallManagerImplementation *", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "createPackageManagerObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    Core::hresult PreinstallManagerImplementation::createPackageManagerObject()$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "dispatchEvent", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    void PreinstallManagerImplementation::dispatchEvent(EventNames event, const JsonObject &para/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(EventNames event,const JsonObject & params)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "getFailReason", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    string PreinstallManagerImplementation::getFailReason(FailReason reason) {$/", "language": "C++", "typeref": "typename:string", "kind": "function", "signature": "(FailReason reason)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "getInstance", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    PreinstallManagerImplementation *PreinstallManagerImplementation::getInstance()$/", "language": "C++", "typeref": "typename:PreinstallManagerImplementation *", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "handleOnAppInstallationStatus", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    void PreinstallManagerImplementation::handleOnAppInstallationStatus(const std::string &jsonr/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const std::string & jsonresponse)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "isNewerVersion", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    bool PreinstallManagerImplementation::isNewerVersion(const std::string &v1, const std::strin/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & v1,const std::string & v2)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "readPreinstallDirectory", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    bool PreinstallManagerImplementation::readPreinstallDirectory(std::list<PackageInfo> &packag/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(std::list<PackageInfo> & packages)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "releasePackageManagerObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    void PreinstallManagerImplementation::releasePackageManagerObject()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "~PreinstallManagerImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    PreinstallManagerImplementation::~PreinstallManagerImplementation()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}], "hash": "754ac50fd9ce9b8a391f8d859033705b", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "fields": [{"name": "PreinstallManagerImplementation * _instance", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"15997": ""}]}