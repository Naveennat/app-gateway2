{"is_source_file": true, "format": "C++", "description": "This source file contains the implementation of the PreinstallManager class, which manages preinstallation of packages including directory traversal, version comparison, package installation, notification handling, and singleton management within a larger plugin framework.", "external_files": ["PreinstallManagerImplementation.h", "Exchange/IPreinstallManager.h", "Exchange/IPackageInstaller.h"], "external_methods": ["Core::ERROR_NONE", "Core::ERROR_GENERAL", "Core::hresult", "Core::ERROR_NONE", "Core::Error", "Core::IWorkerPool::Instance", "Job::Create", "JsonObject::HasLabel", "JsonObject::operator[]", "std::find", "std::min", "sscanf", "opendir", "readdir", "closedir"], "published": ["PreinstallManagerImplementation"], "classes": [{"name": "PreinstallManagerImplementation", "description": "The primary class managing preinstall package logic, including directory reading, version comparison, installation, notifications, and singleton access."}], "methods": [{"name": "Core::hresult Register(Exchange::IPreinstallManager::INotification * notification)", "description": "Registers a notification callback for preinstall events.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Unregister(Exchange::IPreinstallManager::INotification * notification)", "description": "Unregisters a previously registered notification callback.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "uint32_t Configure(PluginHost::IShell * service)", "description": "Initializes the implementation with the current service context.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "void dispatchEvent(EventNames event,const JsonObject & params)", "description": "Schedules an event to be dispatched asynchronously.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "void Dispatch(EventNames event,const JsonObject params)", "description": "Dispatches specific events to registered listeners based on event type.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "void handleOnAppInstallationStatus(const std::string & jsonresponse)", "description": "Handles and forwards application installation status updates.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult createPackageManagerObject()", "description": "Creates and initializes the package manager interface object.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "void releasePackageManagerObject()", "description": "Releases and cleans up the package manager interface object.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "bool isNewerVersion(const std::string & v1,const std::string & v2)", "description": "Compares two version strings to determine if the first is newer.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "bool readPreinstallDirectory(std::list<PackageInfo> & packages)", "description": "Reads the preinstall directory and gathers package info.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "string getFailReason(FailReason reason)", "description": "Returns a string representation of a failure reason enum.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult StartPreinstall(bool forceInstall)", "description": "Traverses preinstall directory, checks existing packages, and installs new or updated packages as needed.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "PreinstallManagerImplementation()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "PreinstallManagerImplementation * getInstance()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "~PreinstallManagerImplementation()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}], "calls": ["Core::IWorkerPool::Instance", "Job::Create", "JsonObject::HasLabel", "JsonObject::operator[]", "std::find", "LOGINFO", "LOGWARN", "LOGERR", "LOGDBG", "LOGTRACE", "Core::ERROR_NONE", "Core::ERROR_GENERAL", "Core::hresult", "Create", "releasePackageManagerObject", "getInstance", "operator==", "Next", "Stat", "sscanf", "opendir", "readdir", "closedir", "LOGINFO", "LOGERR", "LOGDBG", "LOGTRACE"], "search-terms": ["PreinstallManagerImplementation", "readPreinstallDirectory", "StartPreinstall", "isNewerVersion", "package.wgt", "Preinstall directory", "installPackage", "notification", "configure", "jsonresponse", "PACKAGE_MISMATCH_FAILURE", "SIGNATURE_VERIFICATION_FAILURE"], "state": 2, "file_id": 1059, "knowledge_revision": 2177, "git_revision": "", "ctags": [{"_type": "tag", "name": "AI_PREINSTALL_DIRECTORY", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^#define AI_PREINSTALL_DIRECTORY /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "Configure", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    uint32_t PreinstallManagerImplementation::Configure(PluginHost::IShell* service)$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(PluginHost::IShell * service)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Dispatch", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    void PreinstallManagerImplementation::Dispatch(EventNames event, const JsonObject params)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(EventNames event,const JsonObject params)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    namespace Plugin$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "PreinstallManagerImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    PreinstallManagerImplementation::PreinstallManagerImplementation()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Register", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    Core::hresult PreinstallManagerImplementation::Register(Exchange::IPreinstallManager::INotif/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(Exchange::IPreinstallManager::INotification * notification)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "StartPreinstall", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    Core::hresult PreinstallManagerImplementation::StartPreinstall(bool forceInstall)$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(bool forceInstall)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Unregister", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    Core::hresult PreinstallManagerImplementation::Unregister(Exchange::IPreinstallManager::INot/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(Exchange::IPreinstallManager::INotification * notification)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^namespace WPEFramework$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "_instance", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    PreinstallManagerImplementation *PreinstallManagerImplementation::_instance = nullptr;$/", "language": "C++", "typeref": "typename:PreinstallManagerImplementation *", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "createPackageManagerObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    Core::hresult PreinstallManagerImplementation::createPackageManagerObject()$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "dispatchEvent", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    void PreinstallManagerImplementation::dispatchEvent(EventNames event, const JsonObject &para/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(EventNames event,const JsonObject & params)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "getFailReason", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    string PreinstallManagerImplementation::getFailReason(FailReason reason) {$/", "language": "C++", "typeref": "typename:string", "kind": "function", "signature": "(FailReason reason)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "getInstance", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    PreinstallManagerImplementation *PreinstallManagerImplementation::getInstance()$/", "language": "C++", "typeref": "typename:PreinstallManagerImplementation *", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "handleOnAppInstallationStatus", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    void PreinstallManagerImplementation::handleOnAppInstallationStatus(const std::string &jsonr/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const std::string & jsonresponse)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "isNewerVersion", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    bool PreinstallManagerImplementation::isNewerVersion(const std::string &v1, const std::strin/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & v1,const std::string & v2)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "readPreinstallDirectory", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    bool PreinstallManagerImplementation::readPreinstallDirectory(std::list<PackageInfo> &packag/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(std::list<PackageInfo> & packages)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "releasePackageManagerObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    void PreinstallManagerImplementation::releasePackageManagerObject()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "~PreinstallManagerImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    PreinstallManagerImplementation::~PreinstallManagerImplementation()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}], "hash": "754ac50fd9ce9b8a391f8d859033705b", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "fields": [{"name": "PreinstallManagerImplementation * _instance", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"2177": ""}]}