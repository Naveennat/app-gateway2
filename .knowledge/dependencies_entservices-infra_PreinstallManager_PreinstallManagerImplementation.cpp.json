{"is_source_file": true, "format": "C++", "description": "This file is a C++ implementation class for managing preinstall packages in the WPEFramework plugin. It handles package directory traversal, version comparison, installation via a package manager interface, and event/notification dispatching related to package installation status.", "external_files": ["PreinstallManagerImplementation.h", "<chrono>"], "external_methods": ["Core::ERROR_NONE", "Core::ERROR_GENERAL", "Core::hresult", "Core::WorkerPool::Instance().Submit()", "JsonObject::HasLabel()", "JsonObject::operator[]", "LOGINFO", "LOGERR", "LOGWARN", "LOGDBG", "LOGTRACE", "Core::Service<RPC::IteratorType<Exchange::IPackageInstaller::IKeyValueIterator>>", "Core::Error", "opendir()", "readdir()", "closedir()", "stat()", "Release()", "AddRef()", "Unregister()", "Register()", "QueryInterfaceByCallsign()"], "published": ["PreinstallManagerImplementation", "isNewerVersion", "readPreinstallDirectory", "StartPreinstall"], "classes": [{"name": "PreinstallManagerImplementation", "description": "A class that manages preinstall packages, including directory scanning, version checking, installation via package manager, and notification dispatching."}], "methods": [{"name": "PreinstallManagerImplementation * getInstance()", "description": "Returns the singleton instance of the class.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "uint32_t Configure(PluginHost::IShell * service)", "description": "Sets up the current service for package operations.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "bool readPreinstallDirectory(std::list<PackageInfo> & packages)", "description": "Traverses the preinstall directory to list packages and fetch their configurations.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult StartPreinstall(bool forceInstall)", "description": "Main method to check for packages in the preinstall directory and install/update them as needed.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "bool isNewerVersion(const std::string & v1,const std::string & v2)", "description": "Compares two version strings to determine if one is newer than the other.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult createPackageManagerObject()", "description": "Creates the package installer object using the current service.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "void releasePackageManagerObject()", "description": "Releases the package installer object.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "void handleOnAppInstallationStatus(const std::string & jsonresponse)", "description": "Handles the app installation status event and forwards it to registered listeners.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "void dispatchEvent(EventNames event,const JsonObject & params)", "description": "Dispatches events to registered notifications.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "string getFailReason(FailReason reason)", "description": "Returns a string description for the given failure reason enum.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "void Dispatch(EventNames event,const JsonObject params)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "PreinstallManagerImplementation()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult Register(Exchange::IPreinstallManager::INotification * notification)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult Unregister(Exchange::IPreinstallManager::INotification * notification)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "~PreinstallManagerImplementation()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}], "calls": ["Core::WorkerPool::Instance().Submit()", "mPackageManagerInstallerObject->GetConfigForPackage()", "mPackageManagerInstallerObject->ListPackages()", "mPackageManagerInstallerObject->Install()"], "search-terms": ["Preinstall", "PackageManager", "readPreinstallDirectory", "StartPreinstall", "Version comparison", "package.wgt", "Pending installation", "Package installation", "Notification callback", "Preinstall directory path"], "state": 2, "file_id": 6643, "knowledge_revision": 13333, "git_revision": "", "ctags": [{"_type": "tag", "name": "AI_PREINSTALL_DIRECTORY", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^#define AI_PREINSTALL_DIRECTORY /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "Configure", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    uint32_t PreinstallManagerImplementation::Configure(PluginHost::IShell* service)$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(PluginHost::IShell * service)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Dispatch", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    void PreinstallManagerImplementation::Dispatch(EventNames event, const JsonObject params)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(EventNames event,const JsonObject params)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    namespace Plugin$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "PreinstallManagerImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    PreinstallManagerImplementation::PreinstallManagerImplementation()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Register", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    Core::hresult PreinstallManagerImplementation::Register(Exchange::IPreinstallManager::INotif/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(Exchange::IPreinstallManager::INotification * notification)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "StartPreinstall", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    Core::hresult PreinstallManagerImplementation::StartPreinstall(bool forceInstall)$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(bool forceInstall)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Unregister", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    Core::hresult PreinstallManagerImplementation::Unregister(Exchange::IPreinstallManager::INot/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(Exchange::IPreinstallManager::INotification * notification)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^namespace WPEFramework$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "_instance", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    PreinstallManagerImplementation *PreinstallManagerImplementation::_instance = nullptr;$/", "language": "C++", "typeref": "typename:PreinstallManagerImplementation *", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "createPackageManagerObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    Core::hresult PreinstallManagerImplementation::createPackageManagerObject()$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "dispatchEvent", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    void PreinstallManagerImplementation::dispatchEvent(EventNames event, const JsonObject &para/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(EventNames event,const JsonObject & params)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "getFailReason", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    string PreinstallManagerImplementation::getFailReason(FailReason reason) {$/", "language": "C++", "typeref": "typename:string", "kind": "function", "signature": "(FailReason reason)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "getInstance", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    PreinstallManagerImplementation *PreinstallManagerImplementation::getInstance()$/", "language": "C++", "typeref": "typename:PreinstallManagerImplementation *", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "handleOnAppInstallationStatus", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    void PreinstallManagerImplementation::handleOnAppInstallationStatus(const std::string &jsonr/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const std::string & jsonresponse)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "isNewerVersion", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    bool PreinstallManagerImplementation::isNewerVersion(const std::string &v1, const std::strin/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & v1,const std::string & v2)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "readPreinstallDirectory", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    bool PreinstallManagerImplementation::readPreinstallDirectory(std::list<PackageInfo> &packag/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(std::list<PackageInfo> & packages)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "releasePackageManagerObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    void PreinstallManagerImplementation::releasePackageManagerObject()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "~PreinstallManagerImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    PreinstallManagerImplementation::~PreinstallManagerImplementation()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}], "hash": "754ac50fd9ce9b8a391f8d859033705b", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "fields": [{"name": "PreinstallManagerImplementation * _instance", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"13333": ""}]}