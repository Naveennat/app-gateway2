{"is_source_file": true, "format": "C++", "description": "This file implements the PreinstallManager class responsible for managing preinstallation of packages, including reading a preinstall directory, handling package installation, version comparison, and notifying registered listeners of events.", "external_files": ["PreinstallManagerImplementation.h", "core/Lock.h", "core/Logger.h", "core/WorkerPool.h", "core/Job.h", "core/Error.h", "core/JSONSerializer.h", "core/JSONParser.h", "core/Trace.h", "core/Time.h", "core/ProxyType.h", "core/ResourceMonitor.h", "core/Process.h", "core/Directory.h", "core/Stat.h", "core/Plugin.h", "core/Module.h", "core/ResourceMonitor.h", "core/Promise.h", "core/SharedBuffer.h", "core/INIReader.h", "core/Enumerate.h", "core/String.h", "core/Blob.h", "core/URL.h", "core/SocketPort.h", "core/Thread.h", "core/ThreadPool.h", "core/Timer.h", "core/SharedMutex.h", "core/Notification.h", "core/Service.h", "core/Proxy.h", "core/Enumerate.h", "core/Implementation.h", "core/Point.h", "core/Metrics.h", "core/TimeDuration.h", "core/TimePoint.h", "core/Chrono.h", "core/Complex.h", "core/Version.h", "core/Library.h", "core/Identifier.h", "core/DeviceId.h", "core/PlayerId.h", "core/DesktopId.h", "core/AccessoryId.h", "core/Color.h", "core/Domain.h", "core/ServiceRegistration.h", "core/Assertion.h", "core/SharedPointer.h", "core/SharedPointerHelpers.h", "core/SharedMutex.h", "core/SharedMutexGuard.h", "core/SharedMutexLock.h", "core/SharedMutexReadGuard.h", "core/SharedMutexWriteGuard.h", "core/SharedMutexScope.h", "core/SharedMutexType.h", "core/SharedMutexUtil.h", "core/SharedMutexTraits.h", "core/SharedMutexLockTraits.h", "core/SharedMutexLockScope.h", "core/SharedMutexLockGuard.h", "core/SharedMutexLockScopeGuard.h", "core/SharedMutexLockTraits.h", "core/SharedMutexLockScopeTraits.h", "core/SharedMutexLockScopeGuardTraits.h"], "external_methods": ["Core::Logger::Log", "Core::WorkerPool::Instance", "Core::Job::Create", "Core::hresult", "Core::ERROR_NONE", "Core::ERROR_GENERAL", "Core::ERROR_NONE", "Core::ERROR_GENERAL", "Core::Lock", "Core::Unlock", "Core::ERROR_NONE", "Core::ERROR_GENERAL", "Core::ERROR_NONE", "Core::ERROR_GENERAL", "Core::Error::Unknown", "Core::Error::InvalidArgument"], "published": ["PreinstallManagerImplementation"], "classes": [{"name": "PreinstallManagerImplementation", "description": "Class responsible for managing preinstallation of packages, including directory traversal, version comparison, and event notification."}], "methods": [{"name": "PreinstallManagerImplementation * getInstance()", "description": "Returns the singleton instance of the PreinstallManagerImplementation class.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "uint32_t Configure(PluginHost::IShell * service)", "description": "Sets up the current service interface for the preinstall manager.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult StartPreinstall(bool forceInstall)", "description": "Triggers the preinstall process, reading packages from the directory and installing newer versions.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "void handleOnAppInstallationStatus(const std::string & jsonresponse)", "description": "Handles and propagates app installation status events.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "bool readPreinstallDirectory(std::list<PackageInfo> & packages)", "description": "Reads the preinstall directory and populates package info structures based on existing package files.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "bool isNewerVersion(const std::string & v1,const std::string & v2)", "description": "Compares two version strings to determine if the first is a newer version.", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"name": "void Dispatch(EventNames event,const JsonObject params)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "PreinstallManagerImplementation()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult Register(Exchange::IPreinstallManager::INotification * notification)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult Unregister(Exchange::IPreinstallManager::INotification * notification)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult createPackageManagerObject()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "void dispatchEvent(EventNames event,const JsonObject & params)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "string getFailReason(FailReason reason)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "void releasePackageManagerObject()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "~PreinstallManagerImplementation()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}], "calls": ["Core::WorkerPool::Instance().Submit", "mPackageManagerInstallerObject->Install", "mPackageManagerInstallerObject->ListPackages", "mPackageManagerInstallerObject->GetConfigForPackage", "mPackageManagerInstallerObject->Register", "mPackageManagerInstallerObject->Unregister", "releasePackageManagerObject", "LOGINFO", "LOGERR", "LOGWARN", "LOGTRACE"], "search-terms": ["PreinstallManager", "readPreinstallDirectory", "StartPreinstall", "Version comparison", "package.wgt", "Preinstall directory", "installed packages", "package installer", "preinstall process"], "state": 2, "file_id": 8555, "knowledge_revision": 17297, "git_revision": "", "ctags": [{"_type": "tag", "name": "AI_PREINSTALL_DIRECTORY", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^#define AI_PREINSTALL_DIRECTORY /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "Configure", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    uint32_t PreinstallManagerImplementation::Configure(PluginHost::IShell* service)$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(PluginHost::IShell * service)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Dispatch", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    void PreinstallManagerImplementation::Dispatch(EventNames event, const JsonObject params)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(EventNames event,const JsonObject params)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    namespace Plugin$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "PreinstallManagerImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    PreinstallManagerImplementation::PreinstallManagerImplementation()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Register", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    Core::hresult PreinstallManagerImplementation::Register(Exchange::IPreinstallManager::INotif/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(Exchange::IPreinstallManager::INotification * notification)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "StartPreinstall", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    Core::hresult PreinstallManagerImplementation::StartPreinstall(bool forceInstall)$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(bool forceInstall)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Unregister", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    Core::hresult PreinstallManagerImplementation::Unregister(Exchange::IPreinstallManager::INot/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(Exchange::IPreinstallManager::INotification * notification)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^namespace WPEFramework$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "_instance", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    PreinstallManagerImplementation *PreinstallManagerImplementation::_instance = nullptr;$/", "language": "C++", "typeref": "typename:PreinstallManagerImplementation *", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "createPackageManagerObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    Core::hresult PreinstallManagerImplementation::createPackageManagerObject()$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "dispatchEvent", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    void PreinstallManagerImplementation::dispatchEvent(EventNames event, const JsonObject &para/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(EventNames event,const JsonObject & params)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "getFailReason", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    string PreinstallManagerImplementation::getFailReason(FailReason reason) {$/", "language": "C++", "typeref": "typename:string", "kind": "function", "signature": "(FailReason reason)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "getInstance", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    PreinstallManagerImplementation *PreinstallManagerImplementation::getInstance()$/", "language": "C++", "typeref": "typename:PreinstallManagerImplementation *", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "handleOnAppInstallationStatus", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    void PreinstallManagerImplementation::handleOnAppInstallationStatus(const std::string &jsonr/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const std::string & jsonresponse)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "isNewerVersion", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    bool PreinstallManagerImplementation::isNewerVersion(const std::string &v1, const std::strin/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & v1,const std::string & v2)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "readPreinstallDirectory", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    bool PreinstallManagerImplementation::readPreinstallDirectory(std::list<PackageInfo> &packag/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(std::list<PackageInfo> & packages)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "releasePackageManagerObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    void PreinstallManagerImplementation::releasePackageManagerObject()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "~PreinstallManagerImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "pattern": "/^    PreinstallManagerImplementation::~PreinstallManagerImplementation()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}], "hash": "754ac50fd9ce9b8a391f8d859033705b", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.cpp", "fields": [{"name": "PreinstallManagerImplementation * _instance", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"17297": ""}]}