{"is_source_file": true, "format": "C++ header (likely .h file)", "description": "This header file defines the MetricsHandlerDelegate class, which is responsible for sending various metrics and event data through an Analytics bridge within a software project. It includes methods for handling user actions, app actions, page views, and errors, formatting the payloads accordingly, and dispatching them via COM-RPC interfaces.", "external_files": ["<core/JSON.h>", "<plugins/plugins.h>", "<interfaces/IAnalytics.h>"], "external_methods": ["WPEFramework::Exchange::IAnalytics::SendEvent", "Core::JSON::String::ToString", "Core::JSON::String::FromString", "WPEFramework::Core::Service<WPEFramework::RPC::IStringIterator>", "WPEFramework::RPC::IStringIterator::Create"], "published": ["MetricsHandler::MetricsHandlerDelegate"], "classes": [{"name": "MetricsHandler::MetricsHandlerDelegate", "description": "A delegate class responsible for creating and sending structured metrics events to an analytics system via COM-RPC interface."}], "methods": [{"name": "MetricsHandler::MetricsHandlerDelegate", "description": "Constructor initializing the delegate with a shell interface for RPC communication."}, {"name": "MetricsHandler::~MetricsHandlerDelegate", "description": "Default destructor."}, {"name": "MetricsHandler::MetricsHandler", "description": "Function to send a generic in-app action event, with optional segment and arguments."}, {"name": "MetricsHandler::LaunchCompleted", "description": "Function to send a 'launch completed' event."}, {"name": "MetricsHandler::UserAction", "description": "Function to send a user action event with specified action and arguments."}, {"name": "MetricsHandler::AppAction", "description": "Function to send an app action event with specified action and arguments."}, {"name": "MetricsHandler::PageView", "description": "Function to send a page view event indicating a page ID and optional arguments."}, {"name": "MetricsHandler::UserError", "description": "Function to send a user error event including message, visibility, code, and arguments."}, {"name": "MetricsHandler::Error", "description": "Function to send an app error event including message, visibility, code, and arguments."}, {"name": "MetricsHandler::ValidateActionType", "description": "Static helper to validate that action strings are within the length limits."}, {"name": "MetricsHandler::ArgsToParametersObject", "description": "Converts a vector of key-value pairs into a JSON parameters object."}, {"name": "MetricsHandler::SendViaAnalytics", "description": "Internal method to dispatch the event payload via the IAnalytics interface."}, {"name": "Core::hresult AppAction(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "void ArgsToParametersObject(const std::vector<ParamKV> & src,JsonObject & out)", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult Error(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult LaunchCompleted(const std::vector<ParamKV> & args) const", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult MetricsHandler(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args) const", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "MetricsHandlerDelegate(PluginHost::IShell * shell)", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult PageView(const std::string & page,const std::vector<ParamKV> & args) const", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "ParamKV(const std::string & n,const Core::JSON::Variant & v)", "scope": "MetricsHandler::ParamKV", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::hresult SendViaAnalytics(const std::string & eventName,const JsonObject & eventPayload) const", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult UserAction(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult UserError(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "bool ValidateActionType(const std::string & s)", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "JsonValue VariantToJsonValue(const Core::JSON::Variant & v)", "scope": "MetricsHandler", "scopeKind": "namespace", "description": "unavailable"}], "calls": ["WPEFramework::Exchange::IAnalytics::SendEvent", "Core::JSON::String::ToString", "Core::JSON::String::FromString", "WPEFramework::Core::Service<WPEFramework::RPC::IStringIterator>", "WPEFramework::RPC::IStringIterator::Create"], "search-terms": ["MetricsHandlerDelegate", "SendEvent", "IAnalytics", "Analytics bridge", "COM-RPC metrics", "FbMetrics schema", "PageView", "UserAction", "AppAction", "Error", "metrics payload", "EventSource", "Metrics"], "state": 2, "file_id": 3270, "knowledge_revision": 6479, "git_revision": "", "ctags": [{"_type": "tag", "name": "AppAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        AppAction,$/", "language": "C++", "kind": "enumerator", "scope": "MetricsHandler::HandlerEventType", "scopeKind": "enum"}, {"_type": "tag", "name": "AppAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        Core::hresult AppAction(const std::string& action, const std::vector<ParamKV>& args) con/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "ArgsToParametersObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        static inline void ArgsToParametersObject(const std::vector<ParamKV>& src, JsonObject& o/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const std::vector<ParamKV> & src,JsonObject & out)", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "EVENT_SOURCE_DEFAULT", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^    static constexpr const char* EVENT_SOURCE_DEFAULT         = \"ripple\";$/", "language": "C++", "typeref": "typename:const char *", "kind": "variable", "scope": "MetricsHandler", "scopeKind": "namespace"}, {"_type": "tag", "name": "EVENT_SOURCE_VERSION_DEFAULT", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^    static constexpr const char* EVENT_SOURCE_VERSION_DEFAULT = \"3.5.0\";$/", "language": "C++", "typeref": "typename:const char *", "kind": "variable", "scope": "MetricsHandler", "scopeKind": "namespace"}, {"_type": "tag", "name": "EVENT_VERSION_DEFAULT", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^    static constexpr const char* EVENT_VERSION_DEFAULT        = \"3\";$/", "language": "C++", "typeref": "typename:const char *", "kind": "variable", "scope": "MetricsHandler", "scopeKind": "namespace"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        Core::hresult Error(const std::string& message, bool visible, const std::string& code,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "Error", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        Error,$/", "language": "C++", "kind": "enumerator", "scope": "MetricsHandler::HandlerEventType", "scopeKind": "enum"}, {"_type": "tag", "name": "HandlerEventType", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^    enum class HandlerEventType {$/", "language": "C++", "kind": "enum", "scope": "MetricsHandler", "scopeKind": "namespace"}, {"_type": "tag", "name": "LaunchCompleted", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        Core::hresult LaunchCompleted(const std::vector<ParamKV>& args) const {$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::vector<ParamKV> & args) const", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "MetricsHandler", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        Core::hresult MetricsHandler(const Core::OptionalType<std::string>& segment,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const Core::OptionalType<std::string> & segment,const std::vector<ParamKV> & args) const", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "MetricsHandler", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^namespace MetricsHandler {$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "MetricsHandlerDelegate", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        explicit MetricsHandlerDelegate(PluginHost::IShell* shell)$/", "language": "C++", "kind": "function", "signature": "(PluginHost::IShell * shell)", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "MetricsHandlerDelegate", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^    class MetricsHandlerDelegate {$/", "language": "C++", "kind": "class", "scope": "MetricsHandler", "scopeKind": "namespace"}, {"_type": "tag", "name": "PageView", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        Core::hresult PageView(const std::string& page, const std::vector<ParamKV>& args) const /", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & page,const std::vector<ParamKV> & args) const", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "PageView", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        PageView,$/", "language": "C++", "kind": "enumerator", "scope": "MetricsHandler::HandlerEventType", "scopeKind": "enum"}, {"_type": "tag", "name": "ParamKV", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        ParamKV(const std::string& n, const Core::JSON::Variant& v) : name(n), value(v) {}$/", "language": "C++", "kind": "function", "signature": "(const std::string & n,const Core::JSON::Variant & v)", "scope": "MetricsHandler::ParamKV", "scopeKind": "struct"}, {"_type": "tag", "name": "ParamKV", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^    struct ParamKV {$/", "language": "C++", "kind": "struct", "scope": "MetricsHandler", "scopeKind": "namespace"}, {"_type": "tag", "name": "SendViaAnalytics", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        Core::hresult SendViaAnalytics(const std::string& eventName, const JsonObject& eventPayl/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & eventName,const JsonObject & eventPayload) const", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        Core::hresult UserAction(const std::string& action, const std::vector<ParamKV>& args) co/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & action,const std::vector<ParamKV> & args) const", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserAction", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        UserAction,$/", "language": "C++", "kind": "enumerator", "scope": "MetricsHandler::HandlerEventType", "scopeKind": "enum"}, {"_type": "tag", "name": "UserError", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        Core::hresult UserError(const std::string& message, bool visible, const std::string& cod/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const std::string & message,bool visible,const std::string & code,const std::vector<ParamKV> & args) const", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "UserError", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        UserError$/", "language": "C++", "kind": "enumerator", "scope": "MetricsHandler::HandlerEventType", "scopeKind": "enum"}, {"_type": "tag", "name": "ValidateActionType", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        static inline bool ValidateActionType(const std::string& s) {$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & s)", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "VariantToJsonValue", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^    static inline JsonValue VariantToJsonValue(const Core::JSON::Variant& v) {$/", "language": "C++", "typeref": "typename:JsonValue", "kind": "function", "signature": "(const Core::JSON::Variant & v)", "scope": "MetricsHandler", "scopeKind": "namespace"}, {"_type": "tag", "name": "_shell", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        PluginHost::IShell* _shell;$/", "language": "C++", "typeref": "typename:PluginHost::IShell *", "kind": "member", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        std::string name;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "MetricsHandler::ParamKV", "scopeKind": "struct"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "pattern": "/^        Core::JSON::Variant value;$/", "language": "C++", "typeref": "typename:Core::JSON::Variant", "kind": "member", "scope": "MetricsHandler::ParamKV", "scopeKind": "struct"}], "hash": "0b51e9580363586da8c84ea775a8b479", "format-version": 4, "code-base-name": "app-gateway2", "filename": "app-gateway/Badger/Delegate/MetricsHandlerDelegate.h", "fields": [{"name": "const char * EVENT_SOURCE_DEFAULT", "scope": "MetricsHandler", "scopeKind": "namespace", "description": "unavailable"}, {"name": "const char * EVENT_SOURCE_VERSION_DEFAULT", "scope": "MetricsHandler", "scopeKind": "namespace", "description": "unavailable"}, {"name": "const char * EVENT_VERSION_DEFAULT", "scope": "MetricsHandler", "scopeKind": "namespace", "description": "unavailable"}, {"name": "PluginHost::IShell * _shell", "scope": "MetricsHandler::MetricsHandlerDelegate", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string name", "scope": "MetricsHandler::ParamKV", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::JSON::Variant value", "scope": "MetricsHandler::ParamKV", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"6479": ""}]}