{"is_source_file": true, "format": "C++ header file", "description": "The file is a C++ header defining the class OttServicesImplementation which implements interfaces for OttServices functionality including permission management, token retrieval, and configuration within the WPEFramework plugin architecture.", "external_files": ["<core/core.h>", "<core/JSON.h>", "<plugins/IShell.h>", "<interfaces/IOttServices.h>", "<interfaces/IConfiguration.h>", "Module.h", "PermissionsClient.h", "TokenCache.h", "TokenClient.h", "UtilsLogging.h"], "external_methods": ["PermissionsClient()", "TokenClient()", "OttPermissionCache::Instance().UpdateCache()", "Core::IDispatch::Create()", "LOGINFO()"], "published": ["Initialize", "Deinitialize", "Configure", "GetAppPermissions", "GetAppCIMAToken", "GetAppThorToken"], "classes": [{"name": "OttServicesImplementation", "description": "A class implementing OttServices interfaces, responsible for initializing, configuring, and providing permission and token services."}], "methods": [{"name": "Initialize", "description": "Initializes the OttServicesImplementation instance with the provided shell service."}, {"name": "Deinitialize", "description": "Deinitializes the instance, performing cleanup."}, {"name": "Configure", "description": "Configures the instance based on the JSON configuration."}, {"name": "GetAppPermissions", "description": "Retrieves permissions for a specific app ID."}, {"name": "GetAppCIMAToken", "description": "Retrieves a CIMAToken for the specified app ID."}, {"name": "GetAppThorToken", "description": "Retrieves a ThorToken for the specified app ID and content provider."}, {"name": "SetPermissionsClient", "description": "Sets up the permissions client."}, {"name": "SetTokenClient", "description": "Sets up the token client."}, {"name": "Config()", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::ProxyType<Core::IDispatch> Create(const string & appId,const std::vector<std::string> & permissions)", "scope": "WPEFramework::Plugin::OttServicesImplementation::UpdatePermissionCacheJob", "scopeKind": "class", "description": "unavailable"}, {"name": "void Dispatch()", "scope": "WPEFramework::Plugin::OttServicesImplementation::UpdatePermissionCacheJob", "scopeKind": "class", "description": "unavailable"}, {"name": "UpdatePermissionCacheJob(const string & appId,const std::vector<std::string> & permissions)", "scope": "WPEFramework::Plugin::OttServicesImplementation::UpdatePermissionCacheJob", "scopeKind": "class", "description": "unavailable"}, {"name": "~UpdatePermissionCacheJob()", "scope": "WPEFramework::Plugin::OttServicesImplementation::UpdatePermissionCacheJob", "scopeKind": "class", "description": "unavailable"}], "calls": ["PermissionsClient()", "TokenClient()", "OttPermissionCache::Instance().UpdateCache()", "Core::IDispatch::Create()", "LOGINFO()"], "search-terms": ["OttServicesImplementation", "IOttServices", "IConfiguration", "TokenCache", "PermissionsClient", "GetAppPermissions", "GetAppCIMAToken", "GetAppThorToken"], "state": 2, "file_id": 8763, "knowledge_revision": 17546, "git_revision": "ebc81d5be406b7bad5fd35c44b16992d94834970", "ctags": [{"_type": "tag", "name": "Config", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^            Config() : Core::JSON::Container(), PermissionsEndpoint(), UseTls(true) {$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct"}, {"_type": "tag", "name": "Config", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^        struct Config : public Core::JSON::Container {$/", "language": "C++", "kind": "struct", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Create", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^                    static Core::ProxyType<Core::IDispatch> Create($/", "language": "C++", "typeref": "typename:Core::ProxyType<Core::IDispatch>", "kind": "function", "signature": "(const string & appId,const std::vector<std::string> & permissions)", "scope": "WPEFramework::Plugin::OttServicesImplementation::UpdatePermissionCacheJob", "scopeKind": "class"}, {"_type": "tag", "name": "Dispatch", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^                    virtual void Dispatch()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::OttServicesImplementation::UpdatePermissionCacheJob", "scopeKind": "class"}, {"_type": "tag", "name": "OttServicesImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^    class OttServicesImplementation : public Exchange::IOttServices , public Exchange::IConfigur/", "language": "C++", "kind": "class", "scope": "WPEFramework::Plugin", "scopeKind": "namespace"}, {"_type": "tag", "name": "PermissionsEndpoint", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^            Core::JSON::String PermissionsEndpoint;$/", "language": "C++", "typeref": "typename:Core::JSON::String", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^namespace Plugin {$/", "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "TokenEndpoint", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^            Core::JSON::String TokenEndpoint;$/", "language": "C++", "typeref": "typename:Core::JSON::String", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct"}, {"_type": "tag", "name": "UpdatePermissionCacheJob", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^                    UpdatePermissionCacheJob($/", "language": "C++", "kind": "function", "signature": "(const string & appId,const std::vector<std::string> & permissions)", "scope": "WPEFramework::Plugin::OttServicesImplementation::UpdatePermissionCacheJob", "scopeKind": "class"}, {"_type": "tag", "name": "UpdatePermissionCacheJob", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^            class EXTERNAL UpdatePermissionCacheJob : public Core::IDispatch$/", "language": "C++", "kind": "class", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "UseTls", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^            Core::JSON::Boolean UseTls;$/", "language": "C++", "typeref": "typename:Core::JSON::Boolean", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct"}, {"_type": "tag", "name": "UseTlsToken", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^            Core::JSON::Boolean UseTlsToken;$/", "language": "C++", "typeref": "typename:Core::JSON::Boolean", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^namespace WPEFramework {$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "_permissionsClientInitialized", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^        mutable bool _permissionsClientInitialized {false};$/", "language": "C++", "typeref": "typename:bool", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_perms", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^        mutable std::shared_ptr<PermissionsClient> _perms;       $/", "language": "C++", "typeref": "typename:std::shared_ptr<PermissionsClient>", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_permsEndpoint", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^        std::string _permsEndpoint;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_permsUseTls", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^        bool _permsUseTls;$/", "language": "C++", "typeref": "typename:bool", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_refCount", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^        mutable std::atomic<uint32_t> _refCount {1};$/", "language": "C++", "typeref": "typename:std::atomic<uint32_t>", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_service", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^        PluginHost::IShell* _service;$/", "language": "C++", "typeref": "typename:PluginHost::IShell *", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_state", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^        string _state;$/", "language": "C++", "typeref": "typename:string", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_token", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^        mutable std::shared_ptr<TokenClient> _token;$/", "language": "C++", "typeref": "typename:std::shared_ptr<TokenClient>", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_tokenCache", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^        mutable TokenCache _tokenCache;$/", "language": "C++", "typeref": "typename:TokenCache", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_tokenClientInitialized", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^        mutable bool _tokenClientInitialized {false};$/", "language": "C++", "typeref": "typename:bool", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_tokenEndpoint", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^        std::string _tokenEndpoint;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_tokenMutex", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^        mutable std::mutex _tokenMutex;$/", "language": "C++", "typeref": "typename:std::mutex", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_tokenUseTls", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^        bool _tokenUseTls;$/", "language": "C++", "typeref": "typename:bool", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "mAppId", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^                    const string mAppId;$/", "language": "C++", "typeref": "typename:const string", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation::UpdatePermissionCacheJob", "scopeKind": "class"}, {"_type": "tag", "name": "mPermissions", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^                    const std::vector<std::string> mPermissions;$/", "language": "C++", "typeref": "typename:const std::vector<std::string>", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation::UpdatePermissionCacheJob", "scopeKind": "class"}, {"_type": "tag", "name": "~UpdatePermissionCacheJob", "path": "/home/kavia/workspace/code-generation/app-gateway2/plugin/OttServices/OttServicesImplementation.h", "pattern": "/^                    ~UpdatePermissionCacheJob()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::OttServicesImplementation::UpdatePermissionCacheJob", "scopeKind": "class"}], "hash": "8e60a469d3b824db68604acd6a903ab2", "format-version": 4, "code-base-name": "app-gateway2", "filename": "plugin/OttServices/OttServicesImplementation.h", "fields": [{"name": "Core::JSON::String PermissionsEndpoint", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::JSON::String TokenEndpoint", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::JSON::Boolean UseTls", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::JSON::Boolean UseTlsToken", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct", "description": "unavailable"}, {"name": "bool _permissionsClientInitialized", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::shared_ptr<PermissionsClient> _perms", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string _permsEndpoint", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "bool _permsUseTls", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::atomic<uint32_t> _refCount", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "PluginHost::IShell * _service", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "string _state", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::shared_ptr<TokenClient> _token", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "TokenCache _tokenCache", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "bool _tokenClientInitialized", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string _tokenEndpoint", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::mutex _tokenMutex", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "bool _tokenUseTls", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "const string mAppId", "scope": "WPEFramework::Plugin::OttServicesImplementation::UpdatePermissionCacheJob", "scopeKind": "class", "description": "unavailable"}, {"name": "const std::vector<std::string> mPermissions", "scope": "WPEFramework::Plugin::OttServicesImplementation::UpdatePermissionCacheJob", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"17546": "ebc81d5be406b7bad5fd35c44b16992d94834970"}]}