{"is_source_file": true, "format": "C++", "description": "This file is the implementation (AppGateway.cpp) of the AppGateway plugin for the WPEFramework, defining the class AppGateway with its methods, constructors, and internal logic for handling JSON-RPC endpoints, WebSocket communication, security token extraction, and plugin registration.", "external_files": ["AppGateway.h"], "external_methods": ["PluginHost::JSONRPC::Register", "PluginHost::JSONRPC::Unregister", "PluginHost::IShell::ConfigLine", "PluginHost::IAuthenticate::CreateToken", "SYSLOG", "Core::JSON::ArrayType", "Core::JSON::Container", "Core::JSON::Object", "Core::JSON::String", "Config::FromString", "Config::ServerPort", "Config::PermissionEnforcement", "Config::JwtEnabled", "Config::GatewayCallsign", "Resolver::LoadPaths", "RequestRouter::RequestRouter", "ConnectionRegistry", "PermissionManager", "GatewayWebSocket", "json"], "published": ["WPEFramework::Plugin::AppGateway"], "classes": [{"name": "AppGateway", "description": "The AppGateway class implements a plugin that provides JSON-RPC methods, WebSocket communication, security management, and resolution path handling within the WPEFramework environment."}], "methods": [{"name": "uint32_t AddRef() const", "description": "Increments the reference count of the plugin object for lifetime management.", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"name": "uint32_t Release() const", "description": "Decrements the reference count; deletes the object if count reaches zero.", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"name": "void * QueryInterface(const uint32_t id)", "description": "Provides access to interface pointers based on interface ID.", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"name": "void RegisterMethods()", "description": "Registers JSON-RPC methods ('configure', 'respond', 'resolve') for remote invocation.", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"name": "void UnregisterMethods()", "description": "Unregisters previously registered JSON-RPC methods.", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"name": "bool ExtractSecurityToken(PluginHost::IShell * service,string & token) const", "description": "Acquires a security token using the SecurityAgent interface.", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"name": "const string Initialize(PluginHost::IShell * service)", "description": "Sets up the plugin, loads config, starts WebSocket, and prepares resolution paths.", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"name": "void Deinitialize(PluginHost::IShell * service)", "description": "Cleans up resources, stops WebSocket, and resets internal state.", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"name": "string Information() const", "description": "Returns plugin info; currently returns an empty string.", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"name": "uint32_t endpoint_configure(const ConfigureParams & params,Core::JSON::Container &)", "description": "Handles 'configure' JSON-RPC call for loading resolution paths.", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"name": "uint32_t endpoint_respond(const RespondParams & params,Core::JSON::Container &)", "description": "Handles 'respond' JSON-RPC call to send payloads via WebSocket.", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"name": "uint32_t endpoint_resolve(const ResolveParams & params,ResolveResult & response)", "description": "Handles 'resolve' JSON-RPC call for method resolution, fallback to echo.", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"name": "AppGateway()", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class", "description": "unavailable"}, {"name": "~AppGateway()", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class", "description": "unavailable"}], "calls": ["Register<ConfigureParams, Core::JSON::Container>", "Register<RespondParams, Core::JSON::Container>", "Register<ResolveParams, ResolveResult>", "Unregister", "QueryInterfaceByCallsign", "Config::FromString", "Resolver::LoadPaths", "RequestRouter", "Core::JSON::Object::ToString", "GatewayWebSocket::SendTo", "Resolver::Get"], "search-terms": ["AppGateway.cpp", "WPEFramework Plugin", "JSONRPC", "WebSocket", "SecurityToken", "configure", "respond", "resolve", "ResolutionPaths", "ConnectionRegistry", "PermissionManager", "GatewayWebSocket", "JSONRPC endpoint"], "state": 2, "file_id": 23, "knowledge_revision": 138, "git_revision": "d89669d01f023d1cc4ba4e5c6b879bb230d44c72", "revision_history": [{"48": "2716c672eb9834bc1b267530d5c0eaf9087df9c6"}, {"49": "5e0a03b2a0b5d4cb3fecd3b9719ad4368edde652"}, {"50": "508975ec8d61d40d8e3b1a69f3d6c30ed260522d"}, {"51": "f37bae1ce7dc74cbcdd02e80dfc8d6dcfea00d3b"}, {"52": "e725eec60ce15c5527f249a562e6730b795c6223"}, {"55": "fc750fd2d7d70d90e99c54f4ec274bb5d6c64fe5"}, {"56": "dd67edd5bfe70f0a8202d76c16b8d6190d0fce35"}, {"57": "551c77e6320dcc5fb76bc6f0da5a8d2c8106f7f0"}, {"58": "e21ed34a3b7f89aec4399b733b53c017c74bf7f9"}, {"59": "9eb64ff1b3204340c0fd51e82cfd3c91c23c7c79"}, {"60": "185f2b7081035a9c2a3d9d42209fa01c5588f4cc"}, {"61": "f4a40f265b1f9080ce88935509991f1a4785f1e6"}, {"62": "f4a40f265b1f9080ce88935509991f1a4785f1e6"}, {"64": "f4a40f265b1f9080ce88935509991f1a4785f1e6"}, {"65": "f4a40f265b1f9080ce88935509991f1a4785f1e6"}, {"66": "f4a40f265b1f9080ce88935509991f1a4785f1e6"}, {"72": "f4a40f265b1f9080ce88935509991f1a4785f1e6"}, {"73": "2fa07e0295915b08e78ec25e33140c1b85c33ae8"}, {"135": "3b117270fc86b61f6371e197c708c01e4f59cb83"}, {"138": "d89669d01f023d1cc4ba4e5c6b879bb230d44c72"}], "ctags": [{"_type": "tag", "name": "AddRef", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^uint32_t AppGateway::AddRef() const {$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "() const", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"_type": "tag", "name": "AppGateway", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^AppGateway::AppGateway()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"_type": "tag", "name": "Deinitialize", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^void AppGateway::Deinitialize(PluginHost::IShell* service) {$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(PluginHost::IShell * service)", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"_type": "tag", "name": "ExtractSecurityToken", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^bool AppGateway::ExtractSecurityToken(PluginHost::IShell* service, string& token) const {$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(PluginHost::IShell * service,string & token) const", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"_type": "tag", "name": "Information", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^string AppGateway::Information() const {$/", "language": "C++", "typeref": "typename:string", "kind": "function", "signature": "() const", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"_type": "tag", "name": "Initialize", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^const string AppGateway::Initialize(PluginHost::IShell* service) {$/", "language": "C++", "typeref": "typename:const string", "kind": "function", "signature": "(PluginHost::IShell * service)", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"_type": "tag", "name": "JSONRPC_INVALID_PARAMS", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^    constexpr uint32_t JSONRPC_INVALID_PARAMS = static_cast<uint32_t>(-32602);$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "variable", "scope": "WPEFramework::Plugin::__anone67987be0111", "scopeKind": "namespace"}, {"_type": "tag", "name": "JSONRPC_INVALID_PATH", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^    constexpr uint32_t JSONRPC_INVALID_PATH = 2;        \\/\\/ configure$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "variable", "scope": "WPEFramework::Plugin::__anone67987be0111", "scopeKind": "namespace"}, {"_type": "tag", "name": "JSONRPC_INVALID_REQUEST", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^    constexpr uint32_t JSONRPC_INVALID_REQUEST = static_cast<uint32_t>(-32699);$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "variable", "scope": "WPEFramework::Plugin::__anone67987be0111", "scopeKind": "namespace"}, {"_type": "tag", "name": "JSONRPC_PARSE_ERROR", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^    constexpr uint32_t JSONRPC_PARSE_ERROR = static_cast<uint32_t>(-32700);$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "variable", "scope": "WPEFramework::Plugin::__anone67987be0111", "scopeKind": "namespace"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^namespace Plugin {$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "QueryInterface", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^void* AppGateway::QueryInterface(const uint32_t id) {$/", "language": "C++", "typeref": "typename:void *", "kind": "function", "signature": "(const uint32_t id)", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"_type": "tag", "name": "RegisterMethods", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^void AppGateway::RegisterMethods() {$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"_type": "tag", "name": "Release", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^uint32_t AppGateway::Release() const {$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "() const", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"_type": "tag", "name": "UnregisterMethods", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^void AppGateway::UnregisterMethods() {$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^namespace WPEFramework {$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "__anone67987be0111", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^namespace {$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework::Plugin", "scopeKind": "namespace"}, {"_type": "tag", "name": "endpoint_configure", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^uint32_t AppGateway::endpoint_configure(const ConfigureParams& params, Core::JSON::Container& \\//", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const ConfigureParams & params,Core::JSON::Container &)", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"_type": "tag", "name": "endpoint_resolve", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^uint32_t AppGateway::endpoint_resolve(const ResolveParams& params, ResolveResult& response) {$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const ResolveParams & params,ResolveResult & response)", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"_type": "tag", "name": "endpoint_respond", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^uint32_t AppGateway::endpoint_respond(const RespondParams& params, Core::JSON::Container& \\/*res/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(const RespondParams & params,Core::JSON::Container &)", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}, {"_type": "tag", "name": "~AppGateway", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/AppGateway/AppGateway.cpp", "pattern": "/^AppGateway::~AppGateway() {$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::AppGateway", "scopeKind": "class"}], "hash": "922bb7ecee391ada3f235e039923d4ab", "format-version": 4, "code-base-name": "app-gateway2", "filename": "app-gateway/AppGateway/AppGateway.cpp", "fields": [{"name": "uint32_t JSONRPC_INVALID_PARAMS", "scope": "WPEFramework::Plugin::__anone67987be0111", "scopeKind": "namespace", "description": "unavailable"}, {"name": "uint32_t JSONRPC_INVALID_PATH", "scope": "WPEFramework::Plugin::__anone67987be0111", "scopeKind": "namespace", "description": "unavailable"}, {"name": "uint32_t JSONRPC_INVALID_REQUEST", "scope": "WPEFramework::Plugin::__anone67987be0111", "scopeKind": "namespace", "description": "unavailable"}, {"name": "uint32_t JSONRPC_PARSE_ERROR", "scope": "WPEFramework::Plugin::__anone67987be0111", "scopeKind": "namespace", "description": "unavailable"}]}