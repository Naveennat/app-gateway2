{"is_source_file": true, "format": "C++ header file", "description": "This header file defines the OttServicesImplementation class which implements functionality related to OTT services, including permission management, token retrieval, and internal authentication, as part of a plugin architecture. It contains class declarations, includes, and configuration structures, but no executable code.", "external_files": ["<core/core.h>", "<core/JSON.h>", "<plugins/IShell.h>", "<interfaces/IOttServices.h>", "<interfaces/IConfiguration.h>", "PermissionsClient.h", "TokenCache.h"], "external_methods": ["PluginHost::IShell::Initialize", "PluginHost::IShell::Deinitialize", "PluginHost::IShell::Configure"], "published": ["Initialize", "Deinitialize", "Configure", "Ping", "GetPermissions", "InvalidatePermissions", "UpdatePermissionsCache", "GetDistributorToken", "GetAuthToken"], "classes": [{"name": "OttServicesImplementation", "description": "Implements the IOttServices and IConfiguration interfaces, handling OTT service permissions and token management within the plugin system."}], "methods": [{"name": "Initialize", "description": "Initializes the OTT services plugin with the provided service shell."}, {"name": "Deinitialize", "description": "Deinitializes the plugin, cleaning up resources."}, {"name": "Configure", "description": "Applies configuration settings to the plugin via the provided shell."}, {"name": "Ping", "description": "Checks the connectivity or health status of the service with a message and reply."}, {"name": "GetPermissions", "description": "Retrieves permissions for a specified app ID, returning them as JSON or a list of strings."}, {"name": "InvalidatePermissions", "description": "Invalidates cached permissions for a specific app ID."}, {"name": "UpdatePermissionsCache", "description": "Updates the permissions cache for the given app ID, returning the count of updated entries."}, {"name": "GetDistributorToken", "description": "Retrieves a distributor token for a specified app ID."}, {"name": "GetAuthToken", "description": "Retrieves an authentication token for the specified app ID."}, {"name": "Config()", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct", "description": "unavailable"}], "calls": ["PermissionsClient", "TokenCache", "EnsurePerms", "EnsureToken", "FetchSat", "FetchXact", "NowEpochSec"], "search-terms": ["OttServicesImplementation", "IOttServices", "PermissionsClient", "TokenClient", "OTT services", "permissions management", "token retrieval", "plugin configuration", "permissions cache"], "state": 2, "file_id": 52, "knowledge_revision": 16398, "git_revision": "2acc6b1f2164c745a826a53df19f520f5fc28d21", "revision_history": [{"162": ""}, {"173": "0122b584310d777b8d07f9a9be695f2cb90c09dd"}, {"191": "c8e47b2a6d37c6d5c56d0ecafffe3d8cbec64b9e"}, {"257": "648fe4facac7e3617f078e1af2f5ab5734b54229"}, {"294": "b980f4e3e253a8299a669f5f0622cb22913a253d"}, {"327": "e3dea931296a543a65493075a65aaa817cbdc9a1"}, {"397": "a7a470609e5ec86bfb827285d49e4d69ba63ed5b"}, {"412": "ee01dfa922d65deb1655acc4f9ef7a881f6c3e05"}, {"432": "ee01dfa922d65deb1655acc4f9ef7a881f6c3e05"}, {"435": "25df307c05024e5e96123b19bb9a308689377d39"}, {"445": "11687bdf35796aa59ae3a1afecde9935f4bdd400"}, {"16325": "0f87a35b32215bc8547fb583d6c84bd51f603f69"}, {"16326": "0f87a35b32215bc8547fb583d6c84bd51f603f69"}, {"16342": "b6496a978f0d461a81579869494de03baf1df52c"}, {"16346": "fff39b943f272d7b49d7be5a37a891e7a3c0e2ea"}, {"16353": "1f23fbe26b359ee5c126908b69c4add2183a3338"}, {"16398": "2acc6b1f2164c745a826a53df19f520f5fc28d21"}], "ctags": [{"_type": "tag", "name": "Config", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^            Config() : Core::JSON::Container(), PermissionsEndpoint(), UseTls(true), TokenEndpoi/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct"}, {"_type": "tag", "name": "Config", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^        struct Config : public Core::JSON::Container {$/", "language": "C++", "kind": "struct", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "OttServicesImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^    class OttServicesImplementation : public Exchange::IOttServices , public Exchange::IConfigur/", "language": "C++", "kind": "class", "scope": "WPEFramework::Plugin", "scopeKind": "namespace"}, {"_type": "tag", "name": "PermissionsEndpoint", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^            Core::JSON::String PermissionsEndpoint;$/", "language": "C++", "typeref": "typename:Core::JSON::String", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^namespace Plugin {$/", "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "TokenEndpoint", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^            Core::JSON::String TokenEndpoint;$/", "language": "C++", "typeref": "typename:Core::JSON::String", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct"}, {"_type": "tag", "name": "UseTls", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^            Core::JSON::Boolean UseTls;$/", "language": "C++", "typeref": "typename:Core::JSON::Boolean", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct"}, {"_type": "tag", "name": "UseTlsToken", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^            Core::JSON::Boolean UseTlsToken;$/", "language": "C++", "typeref": "typename:Core::JSON::Boolean", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^namespace WPEFramework {$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "_perms", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^        std::unique_ptr<PermissionsClient> _perms;$/", "language": "C++", "typeref": "typename:std::unique_ptr<PermissionsClient>", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_permsClientUseTls", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^        bool _permsClientUseTls { true };$/", "language": "C++", "typeref": "typename:bool", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_permsEndpoint", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^        std::string _permsEndpoint;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_permsMutex", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^        std::mutex _permsMutex;$/", "language": "C++", "typeref": "typename:std::mutex", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_permsUseTls", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^        bool _permsUseTls;$/", "language": "C++", "typeref": "typename:bool", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_refCount", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^        mutable std::atomic<uint32_t> _refCount {1};$/", "language": "C++", "typeref": "typename:std::atomic<uint32_t>", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_service", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^        PluginHost::IShell* _service;$/", "language": "C++", "typeref": "typename:PluginHost::IShell *", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_state", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^        string _state;$/", "language": "C++", "typeref": "typename:string", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_token", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^        std::unique_ptr<TokenClient> _token;$/", "language": "C++", "typeref": "typename:std::unique_ptr<TokenClient>", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_tokenCache", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^        TokenCache _tokenCache;$/", "language": "C++", "typeref": "typename:TokenCache", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_tokenClientUseTls", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^        bool _tokenClientUseTls { true };$/", "language": "C++", "typeref": "typename:bool", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_tokenEndpoint", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^        std::string _tokenEndpoint;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_tokenMutex", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^        std::mutex _tokenMutex;$/", "language": "C++", "typeref": "typename:std::mutex", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_tokenUseTls", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway/OttServices/OttServicesImplementation.h", "pattern": "/^        bool _tokenUseTls;$/", "language": "C++", "typeref": "typename:bool", "kind": "member", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class"}], "hash": "5f0b7aa5678e52da41d9590d83dd3739", "format-version": 4, "code-base-name": "app-gateway2", "filename": "app-gateway/OttServices/OttServicesImplementation.h", "fields": [{"name": "Core::JSON::String PermissionsEndpoint", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::JSON::String TokenEndpoint", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::JSON::Boolean UseTls", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::JSON::Boolean UseTlsToken", "scope": "WPEFramework::Plugin::OttServicesImplementation::Config", "scopeKind": "struct", "description": "unavailable"}, {"name": "std::unique_ptr<PermissionsClient> _perms", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "bool _permsClientUseTls", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string _permsEndpoint", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::mutex _permsMutex", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "bool _permsUseTls", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::atomic<uint32_t> _refCount", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "PluginHost::IShell * _service", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "string _state", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::unique_ptr<TokenClient> _token", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "TokenCache _tokenCache", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "bool _tokenClientUseTls", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string _tokenEndpoint", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "std::mutex _tokenMutex", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "bool _tokenUseTls", "scope": "WPEFramework::Plugin::OttServicesImplementation", "scopeKind": "class", "description": "unavailable"}]}