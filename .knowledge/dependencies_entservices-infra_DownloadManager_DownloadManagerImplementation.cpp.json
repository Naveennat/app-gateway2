{"is_source_file": true, "format": "C++", "description": "This file contains the implementation of the DownloadManager class, including its constructor, destructor, core methods such as Initialize, Deinitialize, Download, Pause, Resume, Cancel, Delete, Progress, and RateLimit, as well as internal thread routine for handling download jobs and notifications. It manages download queues, threading, and interaction with an HTTP client for file downloads within a plugin system.", "external_files": ["DownloadManagerImplementation.h"], "external_methods": ["Core::hresult::AddRef", "Core::hresult::Release", "Core::hresult::Lock", "Core::hresult::Unlock", "Core::hresult::NotifyDownloadStatus", "DownloadManagerHttpClient::downloadFile", "DownloadManagerHttpClient::pause", "DownloadManagerHttpClient::resume", "DownloadManagerHttpClient::cancel", "DownloadManagerHttpClient::getProgress", "DownloadManagerHttpClient::setRateLimit", "DownloadManagerHttpClient::getStatusCode"], "published": ["DownloadManagerImplementation"], "classes": [{"name": "DownloadManagerImplementation", "description": "The main class implementing download management functionality, including download queue handling, threading, and notification mechanisms."}, {"name": "DownloadInfo", "description": "Represents individual download request details such as URL, file location, ID, priority, retries, and rate limit."}], "methods": [{"name": "DownloadManagerImplementation()", "description": "Constructor initializing member variables and setting up the HTTP client.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "~DownloadManagerImplementation()", "description": "Destructor cleaning up notifications and resources.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Initialize(PluginHost::IShell * service)", "description": "Initializes the download manager with service configuration and starts the downloader thread.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Deinitialize(PluginHost::IShell * service)", "description": "Stops the downloader thread and clears download queues.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Download(const string & url,const Exchange::IDownloadManager::Options & options,string & downloadId)", "description": "Enqueues a download request with specified URL and options, assigns a download ID.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Pause(const string & downloadId)", "description": "Pauses the current active download if it matches the provided ID.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Resume(const string & downloadId)", "description": "Resumes a paused download matching the provided ID.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Cancel(const string & downloadId)", "description": "Cancels an active download matching the provided ID.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Delete(const string & fileLocator)", "description": "Deletes a file given its locator if it is not currently being downloaded.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Progress(const string & downloadId,uint8_t & percent)", "description": "Retrieves the download progress percentage for the current download.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult GetStorageDetails(uint32_t & quotaKB,uint32_t & usedKB)", "description": "Stub for retrieving storage quota and usage details.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult RateLimit(const string & downloadId,const uint32_t & limit)", "description": "Sets the rate limit for an active download.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "void downloaderRoutine(int waitTime)", "description": "Main thread loop for processing download jobs, handling retries, and notifying status.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "void notifyDownloadStatus(const string & id,const string & locator,const DownloadReason reason)", "description": "Prepares and sends download status notifications to registered observers.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "DownloadManagerImplementation::DownloadInfoPtr pickDownloadJob(void)", "description": "Selects the next download job from priority or regular queue.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Register(Exchange::IDownloadManager::INotification * notification)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::hresult Unregister(Exchange::IDownloadManager::INotification * notification)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class", "description": "unavailable"}], "calls": ["mHttpClient->downloadFile", "mHttpClient->pause", "mHttpClient->resume", "mHttpClient->cancel", "mHttpClient->getProgress", "mHttpClient->setRateLimit", "mHttpClient->getStatusCode", "notification->OnAppDownloadStatus"], "search-terms": ["DownloadManagerHttpClient", "DownloaderThread", "download queue", "DownloadRequest", "download retries", "download status notification", "priority download queue", "http download", "download ID"], "state": 2, "file_id": 7021, "knowledge_revision": 14062, "git_revision": "", "ctags": [{"_type": "tag", "name": "Cancel", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Cancel(const string &downloadId)$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const string & downloadId)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "DOWNLOADER_DEFAULT_PATH_LOCATION", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^#define DOWNLOADER_DEFAULT_PATH_LOCATION /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "DOWNLOADER_DOWNLOAD_ID_START", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^#define DOWNLOADER_DOWNLOAD_ID_START /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "Deinitialize", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Deinitialize(PluginHost::IShell* service)$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(PluginHost::IShell * service)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Delete", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Delete(const string &fileLocator)$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const string & fileLocator)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Download", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Download(const string& url,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const string & url,const Exchange::IDownloadManager::Options & options,string & downloadId)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "DownloadManagerImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    DownloadManagerImplementation::DownloadManagerImplementation()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "GetStorageDetails", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::GetStorageDetails(uint32_t &quotaKB, uint32_t &/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(uint32_t & quotaKB,uint32_t & usedKB)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Initialize", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Initialize(PluginHost::IShell* service)$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(PluginHost::IShell * service)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Pause", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Pause(const string &downloadId)$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const string & downloadId)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^namespace Plugin {$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "Progress", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Progress(const string &downloadId, uint8_t &per/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const string & downloadId,uint8_t & percent)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "RateLimit", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::RateLimit(const string &downloadId, const uint3/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const string & downloadId,const uint32_t & limit)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Register", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Register(Exchange::IDownloadManager::INotificat/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(Exchange::IDownloadManager::INotification * notification)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Resume", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Resume(const string &downloadId)$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const string & downloadId)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Unregister", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Unregister(Exchange::IDownloadManager::INotific/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(Exchange::IDownloadManager::INotification * notification)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^namespace WPEFramework {$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "downloaderRoutine", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    void DownloadManagerImplementation::downloaderRoutine(int waitTime)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(int waitTime)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "notifyDownloadStatus", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    void DownloadManagerImplementation::notifyDownloadStatus(const string& id, const string& loc/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const string & id,const string & locator,const DownloadReason reason)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "pickDownloadJob", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    DownloadManagerImplementation::DownloadInfoPtr DownloadManagerImplementation::pickDownloadJo/", "language": "C++", "typeref": "typename:DownloadManagerImplementation::DownloadInfoPtr", "kind": "function", "signature": "(void)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "~DownloadManagerImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    DownloadManagerImplementation::~DownloadManagerImplementation()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}], "hash": "df1c422a4176898bc25ecb5d8433e224", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "revision_history": [{"14062": ""}]}