{"is_source_file": true, "format": "C++", "description": "This file contains the implementation of the DownloadManager class in C++, including methods to handle downloads, notifications, threading, and utilities for managing download requests and their states within a plugin framework.", "external_files": ["DownloadManagerImplementation.h"], "external_methods": ["LOGINFO", "LOGERR", "LOGWARN", "LOGDBG", "Core::ERROR_NONE", "Core::ERROR_UNAVAILABLE", "Core::ERROR_GENERAL", "Core::ERROR_UNKNOWN_KEY", "Core::hresult", "ASSERT", "std::find", "mkdir", "remove", "std::thread", "std::mutex", "std::unique_lock", "std::condition_variable", "std::chrono", "std::shared_ptr", "std::make_shared", "JsonArray", "JsonObject"], "published": ["DownloadManagerImplementation"], "classes": [{"name": "DownloadManagerImplementation", "description": "Implements the download manager functionality, including queue handling, threading for download processes, and notification management."}, {"name": "DownloadInfo", "description": "Represents individual download request details, including URL, ID, status, and configurations."}], "methods": [{"name": "Core::hresult Register(Exchange::IDownloadManager::INotification * notification)", "description": "Registers a notification callback for download status updates.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Unregister(Exchange::IDownloadManager::INotification * notification)", "description": "Unregisters a previously registered notification callback.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Initialize(PluginHost::IShell * service)", "description": "Initializes the download manager with a service, setting up download directory and thread.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Deinitialize(PluginHost::IShell * service)", "description": "Cleans up resources, stops threads, and clears queues upon shutdown.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Download(const string & url,const Exchange::IDownloadManager::Options & options,string & downloadId)", "description": "Queues a new download request, assigning an ID and managing priority.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Pause(const string & downloadId)", "description": "Pauses an active download based on ID.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Resume(const string & downloadId)", "description": "Resumes a paused download based on ID.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Cancel(const string & downloadId)", "description": "Cancels an active download based on ID.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Delete(const string & fileLocator)", "description": "Deletes a downloaded file from storage.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult Progress(const string & downloadId,uint8_t & percent)", "description": "Retrieves current progress of a download.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult GetStorageDetails(uint32_t & quotaKB,uint32_t & usedKB)", "description": "Provides storage quota and used space info, stubbed for now.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "Core::hresult RateLimit(const string & downloadId,const uint32_t & limit)", "description": "Sets the download rate limit for an active download.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "void downloaderRoutine(int waitTime)", "description": "Main thread loop handling download queue processing, retries, and status updates.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "void notifyDownloadStatus(const string & id,const string & locator,const DownloadReason reason)", "description": "Notifies registered observers of download status updates.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "DownloadManagerImplementation::DownloadInfoPtr pickDownloadJob(void)", "description": "Selects the next download request based on priority and queue status.", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"name": "DownloadManagerImplementation()", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "~DownloadManagerImplementation()", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class", "description": "unavailable"}], "calls": ["mHttpClient->downloadFile", "mHttpClient->pause", "mHttpClient->resume", "mHttpClient->cancel", "mHttpClient->getProgress", "mHttpClient->setRateLimit", "mHttpClient->getStatusCode", "mkdir", "remove", "loggers and synchronization primitives"], "search-terms": ["DownloadManagerImplementation", "downloaderRoutine", "Notification", "Download queue", "HTTP client", "retry logic", "priority queue", "File deletion", "download ID", "Rate limit"], "state": 2, "file_id": 8595, "knowledge_revision": 17339, "git_revision": "", "ctags": [{"_type": "tag", "name": "Cancel", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Cancel(const string &downloadId)$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const string & downloadId)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "DOWNLOADER_DEFAULT_PATH_LOCATION", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^#define DOWNLOADER_DEFAULT_PATH_LOCATION /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "DOWNLOADER_DOWNLOAD_ID_START", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^#define DOWNLOADER_DOWNLOAD_ID_START /", "file": true, "language": "C++", "kind": "macro"}, {"_type": "tag", "name": "Deinitialize", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Deinitialize(PluginHost::IShell* service)$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(PluginHost::IShell * service)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Delete", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Delete(const string &fileLocator)$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const string & fileLocator)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Download", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Download(const string& url,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const string & url,const Exchange::IDownloadManager::Options & options,string & downloadId)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "DownloadManagerImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    DownloadManagerImplementation::DownloadManagerImplementation()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "GetStorageDetails", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::GetStorageDetails(uint32_t &quotaKB, uint32_t &/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(uint32_t & quotaKB,uint32_t & usedKB)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Initialize", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Initialize(PluginHost::IShell* service)$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(PluginHost::IShell * service)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Pause", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Pause(const string &downloadId)$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const string & downloadId)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^namespace Plugin {$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "Progress", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Progress(const string &downloadId, uint8_t &per/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const string & downloadId,uint8_t & percent)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "RateLimit", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::RateLimit(const string &downloadId, const uint3/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const string & downloadId,const uint32_t & limit)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Register", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Register(Exchange::IDownloadManager::INotificat/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(Exchange::IDownloadManager::INotification * notification)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Resume", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Resume(const string &downloadId)$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const string & downloadId)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Unregister", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    Core::hresult DownloadManagerImplementation::Unregister(Exchange::IDownloadManager::INotific/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(Exchange::IDownloadManager::INotification * notification)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^namespace WPEFramework {$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "downloaderRoutine", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    void DownloadManagerImplementation::downloaderRoutine(int waitTime)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(int waitTime)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "notifyDownloadStatus", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    void DownloadManagerImplementation::notifyDownloadStatus(const string& id, const string& loc/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const string & id,const string & locator,const DownloadReason reason)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "pickDownloadJob", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    DownloadManagerImplementation::DownloadInfoPtr DownloadManagerImplementation::pickDownloadJo/", "language": "C++", "typeref": "typename:DownloadManagerImplementation::DownloadInfoPtr", "kind": "function", "signature": "(void)", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "~DownloadManagerImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "pattern": "/^    DownloadManagerImplementation::~DownloadManagerImplementation()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::DownloadManagerImplementation", "scopeKind": "class"}], "hash": "df1c422a4176898bc25ecb5d8433e224", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/DownloadManager/DownloadManagerImplementation.cpp", "revision_history": [{"17339": ""}]}