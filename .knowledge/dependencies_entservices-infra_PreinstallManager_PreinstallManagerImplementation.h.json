{"is_source_file": true, "format": "C++ header file", "description": "This file declares the PreinstallManagerImplementation class, which implements interfaces related to preinstall management and configuration within the WPEFramework Plugin namespace. It includes class definitions, notification handling, job dispatching, and methods for managing package preinstallation state and events.", "external_files": ["Module.h", "<interfaces/Ids.h>", "<interfaces/IPreinstallManager.h>", "<interfaces/IConfiguration.h>", "tracing/Logging.h", "UtilsLogging.h", "<com/com.h>", "<core/core.h>", "<plugins/plugins.h>"], "external_methods": ["Exchange::IPackageInstaller::INotification::OnAppInstallationStatus", "Core::ProxyType<Core::IDispatch>::Create", "Core::proxy_cast<Core::IDispatch>", "Core::CriticalSection", "Core::hresult", "Core::IDispatch::Dispatch", "Core::RefCounted", "PluginHost::IShell"], "published": ["PreinstallManagerImplementation::getInstance", "PreinstallManagerImplementation::Configure"], "classes": [{"name": "PreinstallManagerImplementation", "description": "Main class implementing preinstall and configuration interfaces, managing package installation events, notifications, and dispatching jobs."}, {"name": "PackageManagerNotification", "description": "Notification class that handles package installation status events from the package manager."}, {"name": "Job", "description": "Dispatchable job class for handling asynchronous events related to preinstall management."}], "methods": [{"name": "Register", "description": "Registers a notification callback for preinstall events."}, {"name": "Unregister", "description": "Unregisters a previously registered notification callback."}, {"name": "StartPreinstall", "description": "Initiates the preinstall process, with an option to force installation."}, {"name": "handleOnAppInstallationStatus", "description": "Processes installation status updates received from package manager events."}, {"name": "Configure", "description": "Configures the plugin with the provided service."}, {"name": "Core::ProxyType<Core::IDispatch> Create(PreinstallManagerImplementation * preinstallManagerImplementation,EventNames event,JsonObject params)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::Job", "scopeKind": "class", "description": "unavailable"}, {"name": "void Dispatch()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::Job", "scopeKind": "class", "description": "unavailable"}, {"name": "Job(PreinstallManagerImplementation * preinstallManagerImplementation,EventNames event,JsonObject & params)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::Job", "scopeKind": "class", "description": "unavailable"}, {"name": "void OnAppInstallationStatus(const string & jsonresponse)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::PackageManagerNotification", "scopeKind": "class", "description": "unavailable"}, {"name": "PackageManagerNotification(PreinstallManagerImplementation & parent)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::PackageManagerNotification", "scopeKind": "class", "description": "unavailable"}, {"name": "~Job()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::Job", "scopeKind": "class", "description": "unavailable"}, {"name": "~PackageManagerNotification()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::PackageManagerNotification", "scopeKind": "class", "description": "unavailable"}], "calls": ["PreinstallManagerImplementation->Dispatch", "mParent.handleOnAppInstallationStatus", "Core::ProxyType<Job>::Create", "Job::Dispatch"], "search-terms": ["PreinstallManagerImplementation", "IPreinstallManager", "IConfiguration", "PackageInfo", "PackageManagerNotification", "Job", "handleOnAppInstallationStatus", "PreinstallDirectory"], "state": 2, "file_id": 1850, "knowledge_revision": 3794, "git_revision": "", "ctags": [{"_type": "tag", "name": "Create", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^                static Core::ProxyType<Core::IDispatch> Create(PreinstallManagerImplementation */", "language": "C++", "typeref": "typename:Core::ProxyType<Core::IDispatch>", "kind": "function", "signature": "(PreinstallManagerImplementation * preinstallManagerImplementation,EventNames event,JsonObject params)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "Dispatch", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^                virtual void Dispatch()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "EventNames", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^            enum EventNames {$/", "language": "C++", "kind": "enum", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "FailReason", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^            typedef Exchange::IPackageInstaller::FailReason FailReason;$/", "language": "C++", "typeref": "typename:Exchange::IPackageInstaller::FailReason", "kind": "typedef", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "InstallState", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^            typedef Exchange::IPackageInstaller::InstallState InstallState;$/", "language": "C++", "typeref": "typename:Exchange::IPackageInstaller::InstallState", "kind": "typedef", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Job", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^                Job(PreinstallManagerImplementation *preinstallManagerImplementation, EventNames/", "language": "C++", "kind": "function", "signature": "(PreinstallManagerImplementation * preinstallManagerImplementation,EventNames event,JsonObject & params)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "Job", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^            class EXTERNAL Job : public Core::IDispatch$/", "language": "C++", "kind": "class", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "OnAppInstallationStatus", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^        void OnAppInstallationStatus(const string& jsonresponse)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const string & jsonresponse)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::PackageManagerNotification", "scopeKind": "class"}, {"_type": "tag", "name": "PREINSTALL_MANAGER_APP_INSTALLATION_STATUS", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^            PREINSTALL_MANAGER_APP_INSTALLATION_STATUS$/", "language": "C++", "kind": "enumerator", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::EventNames", "scopeKind": "enum"}, {"_type": "tag", "name": "PREINSTALL_MANAGER_UNKNOWN", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^            PREINSTALL_MANAGER_UNKNOWN = 0,$/", "language": "C++", "kind": "enumerator", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::EventNames", "scopeKind": "enum"}, {"_type": "tag", "name": "PackageInfo", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^            } PackageInfo;$/", "language": "C++", "typeref": "struct:WPEFramework::Plugin::PreinstallManagerImplementation::_PackageInfo", "kind": "typedef", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "PackageManagerNotification", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^            PackageManagerNotification(PreinstallManagerImplementation& parent) : mParent(parent/", "language": "C++", "kind": "function", "signature": "(PreinstallManagerImplementation & parent)", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::PackageManagerNotification", "scopeKind": "class"}, {"_type": "tag", "name": "PackageManagerNotification", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^        class PackageManagerNotification : public Exchange::IPackageInstaller::INotification {$/", "language": "C++", "kind": "class", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^    namespace Plugin$/", "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "PreinstallManagerImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^        class PreinstallManagerImplementation : public Exchange::IPreinstallManager, public Exch/", "language": "C++", "kind": "class", "scope": "WPEFramework::Plugin", "scopeKind": "namespace"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^namespace WPEFramework$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "_PackageInfo", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^            typedef struct _PackageInfo$/", "language": "C++", "kind": "struct", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_event", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^                const EventNames _event;$/", "language": "C++", "typeref": "typename:const EventNames", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "_instance", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^            static PreinstallManagerImplementation *_instance;$/", "language": "C++", "typeref": "typename:PreinstallManagerImplementation *", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "_params", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^                const JsonObject _params;$/", "language": "C++", "typeref": "typename:const JsonObject", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "configMetadata", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^                WPEFramework::Exchange::RuntimeConfig configMetadata;$/", "language": "C++", "typeref": "typename:WPEFramework::Exchange::RuntimeConfig", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::_PackageInfo", "scopeKind": "struct"}, {"_type": "tag", "name": "fileLocator", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^                string fileLocator;$/", "language": "C++", "typeref": "typename:string", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::_PackageInfo", "scopeKind": "struct"}, {"_type": "tag", "name": "installStatus", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^                string installStatus; \\/\\/ optional field to store install status for logging pu/", "language": "C++", "typeref": "typename:string", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::_PackageInfo", "scopeKind": "struct"}, {"_type": "tag", "name": "mAdminLock", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^            mutable Core::CriticalSection mAdminLock;$/", "language": "C++", "typeref": "typename:Core::CriticalSection", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "mCurrentservice", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^            PluginHost::IShell *mCurrentservice;$/", "language": "C++", "typeref": "typename:PluginHost::IShell *", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "mPackageManagerInstallerObject", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^            Exchange::IPackageInstaller* mPackageManagerInstallerObject;$/", "language": "C++", "typeref": "typename:Exchange::IPackageInstaller *", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "mPackageManagerNotification", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^            Core::Sink<PackageManagerNotification> mPackageManagerNotification;$/", "language": "C++", "typeref": "typename:Core::Sink<PackageManagerNotification>", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "mParent", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^            PreinstallManagerImplementation& mParent;$/", "language": "C++", "typeref": "typename:PreinstallManagerImplementation &", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::PackageManagerNotification", "scopeKind": "class"}, {"_type": "tag", "name": "mPreinstallManagerImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^                PreinstallManagerImplementation *mPreinstallManagerImplementation;$/", "language": "C++", "typeref": "typename:PreinstallManagerImplementation *", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "mPreinstallManagerNotifications", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^            std::list<Exchange::IPreinstallManager::INotification*> mPreinstallManagerNotificati/", "language": "C++", "typeref": "typename:std::list<Exchange::IPreinstallManager::INotification * >", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "packageId", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^                string packageId;$/", "language": "C++", "typeref": "typename:string", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::_PackageInfo", "scopeKind": "struct"}, {"_type": "tag", "name": "version", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^                string version;$/", "language": "C++", "typeref": "typename:string", "kind": "member", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::_PackageInfo", "scopeKind": "struct"}, {"_type": "tag", "name": "~Job", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^                ~Job()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::Job", "scopeKind": "class"}, {"_type": "tag", "name": "~PackageManagerNotification", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "pattern": "/^            ~PackageManagerNotification(){}$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::PackageManagerNotification", "scopeKind": "class"}], "hash": "8c8d94bcae464e7366cc3ae31bfa9497", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/PreinstallManager/PreinstallManagerImplementation.h", "fields": [{"name": "const EventNames _event", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::Job", "scopeKind": "class", "description": "unavailable"}, {"name": "PreinstallManagerImplementation * _instance", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "const JsonObject _params", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::Job", "scopeKind": "class", "description": "unavailable"}, {"name": "WPEFramework::Exchange::RuntimeConfig configMetadata", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::_PackageInfo", "scopeKind": "struct", "description": "unavailable"}, {"name": "string fileLocator", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::_PackageInfo", "scopeKind": "struct", "description": "unavailable"}, {"name": "string installStatus", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::_PackageInfo", "scopeKind": "struct", "description": "unavailable"}, {"name": "Core::CriticalSection mAdminLock", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "PluginHost::IShell * mCurrentservice", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "Exchange::IPackageInstaller * mPackageManagerInstallerObject", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "Core::Sink<PackageManagerNotification> mPackageManagerNotification", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "PreinstallManagerImplementation & mParent", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::PackageManagerNotification", "scopeKind": "class", "description": "unavailable"}, {"name": "PreinstallManagerImplementation * mPreinstallManagerImplementation", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::Job", "scopeKind": "class", "description": "unavailable"}, {"name": "std::list<Exchange::IPreinstallManager::INotification * > mPreinstallManagerNotifications", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "string packageId", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::_PackageInfo", "scopeKind": "struct", "description": "unavailable"}, {"name": "string version", "scope": "WPEFramework::Plugin::PreinstallManagerImplementation::_PackageInfo", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"3794": ""}]}