{"is_source_file": true, "format": "C++", "description": "This source file contains unit tests for the AppGateway plugin, focusing on initialization, deinitialization, and RPC registration. It includes mock setup, environment handling, and validation of plugin lifecycle behaviors aimed at ensuring robustness and idempotency.", "external_files": ["<iostream>", "<string>", "<cstdlib>", "<core/core.h>", "<plugins/IDispatcher.h>", "<AppGateway.h>", "ServiceMock.h"], "external_methods": ["WPEFramework::Core::Service<AppGateway>::Create<IPlugin>", "dispatcher->Invoke", "plugin->Initialize", "plugin->Deinitialize", "plugin->QueryInterface"], "published": ["Test_Initialize_WithValidConfig_Succeeds", "Test_Initialize_Twice_Idempotent", "Test_Deinitialize_Twice_NoCrash", "Test_JsonRpc_Registration_And_Unregistration"], "classes": [{"name": "TestResult", "description": "A helper struct to track the number of failures during tests."}, {"name": "PluginAndService", "description": "Encapsulates a mock service and plugin instance used in tests, managing resource creation and cleanup."}], "methods": [{"name": "void ExpectTrue(TestResult & tr,const bool condition,const std::string & what)", "description": "Checks a condition and records a failure if false.", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"name": "void ExpectEqU32(TestResult & tr,const uint32_t actual,const uint32_t expected,const std::string & what)", "description": "Checks if two uint32 values are equal and records a failure if not.", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"name": "void ExpectEqStr(TestResult & tr,const std::string & actual,const std::string & expected,const std::string & what)", "description": "Checks if two strings are equal and records a failure if not.", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"name": "std::string ResolveParamsJson(const std::string & method,const std::string & paramsJson=\"{}\")", "description": "Constructs a JSON string representing a standard JSON-RPC request payload.", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"name": "PluginAndService(const L0Test::ServiceMock::Config & cfg={})", "scope": "__anon11fb56490111::PluginAndService", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint32_t Test_Deinitialize_Twice_NoCrash()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "uint32_t Test_Initialize_Twice_Idempotent()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "uint32_t Test_Initialize_WithValidConfig_Succeeds()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "uint32_t Test_JsonRpc_Registration_And_Unregistration()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "~PluginAndService()", "scope": "__anon11fb56490111::PluginAndService", "scopeKind": "struct", "description": "unavailable"}], "calls": ["plugin->Initialize", "plugin->Deinitialize", "plugin->QueryInterface", "dispatcher->Invoke"], "search-terms": ["AppGateway_Init_DeinitTests", "Initialize/Twice", "Deinitialize/Twice", "RPC resolve test", "Plugin lifecycle", "Mock Service", "IDispatcher interface", "JSON-RPC request"], "state": 2, "file_id": 8719, "knowledge_revision": 17469, "git_revision": "3a0cf6e4a5c9d37d3a092cf90b24aaf78d7bd00c", "revision_history": [{"17443": "988378322a0123f0e521fa92423a0cc8f4c57e27"}, {"17451": "bbe05710d080a3f5e7f6fe8065345b7f3d05103e"}, {"17469": "3a0cf6e4a5c9d37d3a092cf90b24aaf78d7bd00c"}], "ctags": [{"_type": "tag", "name": "ExpectEqStr", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^static void ExpectEqStr(TestResult& tr, const std::string& actual, const std::string& expected, /", "file": true, "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(TestResult & tr,const std::string & actual,const std::string & expected,const std::string & what)", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"_type": "tag", "name": "ExpectEqU32", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^static void ExpectEqU32(TestResult& tr, const uint32_t actual, const uint32_t expected, const st/", "file": true, "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(TestResult & tr,const uint32_t actual,const uint32_t expected,const std::string & what)", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"_type": "tag", "name": "ExpectTrue", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^static void ExpectTrue(TestResult& tr, const bool condition, const std::string& what) {$/", "file": true, "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(TestResult & tr,const bool condition,const std::string & what)", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"_type": "tag", "name": "PluginAndService", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^    explicit PluginAndService(const L0Test::ServiceMock::Config& cfg = {})$/", "file": true, "language": "C++", "kind": "function", "signature": "(const L0Test::ServiceMock::Config & cfg={})", "scope": "__anon11fb56490111::PluginAndService", "scopeKind": "struct"}, {"_type": "tag", "name": "PluginAndService", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^struct PluginAndService {$/", "file": true, "language": "C++", "kind": "struct", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"_type": "tag", "name": "ResolveParamsJson", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^static std::string ResolveParamsJson(const std::string& method, const std::string& paramsJson = /", "file": true, "language": "C++", "typeref": "typename:std::string", "kind": "function", "signature": "(const std::string & method,const std::string & paramsJson=\"{}\")", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"_type": "tag", "name": "TestResult", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^struct TestResult {$/", "file": true, "language": "C++", "kind": "struct", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"_type": "tag", "name": "Test_Deinitialize_Twice_NoCrash", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^uint32_t Test_Deinitialize_Twice_NoCrash()$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "Test_Initialize_Twice_Idempotent", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^uint32_t Test_Initialize_Twice_Idempotent()$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "Test_Initialize_WithValidConfig_Succeeds", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^uint32_t Test_Initialize_WithValidConfig_Succeeds()$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "Test_JsonRpc_Registration_And_Unregistration", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^uint32_t Test_JsonRpc_Registration_And_Unregistration()$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "__anon11fb56490111", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^namespace {$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "failures", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^    uint32_t failures { 0 };$/", "file": true, "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "__anon11fb56490111::TestResult", "scopeKind": "struct"}, {"_type": "tag", "name": "plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^    IPlugin* plugin { nullptr };$/", "file": true, "language": "C++", "typeref": "typename:IPlugin *", "kind": "member", "scope": "__anon11fb56490111::PluginAndService", "scopeKind": "struct"}, {"_type": "tag", "name": "service", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^    L0Test::ServiceMock* service { nullptr };$/", "file": true, "language": "C++", "typeref": "typename:L0Test::ServiceMock *", "kind": "member", "scope": "__anon11fb56490111::PluginAndService", "scopeKind": "struct"}, {"_type": "tag", "name": "~PluginAndService", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^    ~PluginAndService()$/", "file": true, "language": "C++", "kind": "function", "signature": "()", "scope": "__anon11fb56490111::PluginAndService", "scopeKind": "struct"}], "hash": "6e9f9dcfe96dc48fe4c63360351a90ed", "format-version": 4, "code-base-name": "app-gateway2", "filename": "tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "fields": [{"name": "uint32_t failures", "scope": "__anon11fb56490111::TestResult", "scopeKind": "struct", "description": "unavailable"}, {"name": "IPlugin * plugin", "scope": "__anon11fb56490111::PluginAndService", "scopeKind": "struct", "description": "unavailable"}, {"name": "L0Test::ServiceMock * service", "scope": "__anon11fb56490111::PluginAndService", "scopeKind": "struct", "description": "unavailable"}]}