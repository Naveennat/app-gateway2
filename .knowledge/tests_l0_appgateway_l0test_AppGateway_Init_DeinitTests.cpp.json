{"is_source_file": true, "format": "C++", "description": "This file contains unit tests for the AppGateway plugin, specifically testing initialization, deinitialization, and RPC registration behaviors. It includes mock services, test helpers, and test cases designed for isolated build environments.", "external_files": ["<iostream>", "<string>", "<cstdlib>", "<core/core.h>", "<plugins/IDispatcher.h>", "<AppGateway.h>", "ServiceMock.h"], "external_methods": ["WPEFramework::Core::Service<AppGateway>::Create<IPlugin>", "IDispatcher::Invoke", "IPlugin::Initialize", "IPlugin::Deinitialize", "IPlugin::QueryInterface", "IPlugin::Release"], "published": ["Test_Initialize_WithValidConfig_Succeeds", "Test_Initialize_Twice_Idempotent", "Test_Deinitialize_Twice_NoCrash", "Test_JsonRpc_Registration_And_Unregistration"], "classes": [{"name": "TestResult", "description": "Helper class to track test failures within each test case."}, {"name": "PluginAndService", "description": "Encapsulates the mock service and plugin instance for testing, handling creation and cleanup."}], "methods": [{"name": "void ExpectTrue(TestResult & tr,const bool condition,const std::string & what)", "description": "Checks a condition and logs failure, increments failures count if false.", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"name": "void ExpectEqU32(TestResult & tr,const uint32_t actual,const uint32_t expected,const std::string & what)", "description": "Checks if two uint32_t values are equal, logs failure if not.", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"name": "void ExpectEqStr(TestResult & tr,const std::string & actual,const std::string & expected,const std::string & what)", "description": "Checks if two strings are equal, logs failure if not.", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"name": "std::string ResolveParamsJson(const std::string & method,const std::string & params=\"{}\")", "description": "Constructs a JSON string for RPC request parameters with given method and params.", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"name": "PluginAndService(const L0Test::ServiceMock::Config & cfg={})", "scope": "__anon11fb56490111::PluginAndService", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint32_t Test_Deinitialize_Twice_NoCrash()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "uint32_t Test_Initialize_Twice_Idempotent()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "uint32_t Test_Initialize_WithValidConfig_Succeeds()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "uint32_t Test_JsonRpc_Registration_And_Unregistration()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "~PluginAndService()", "scope": "__anon11fb56490111::PluginAndService", "scopeKind": "struct", "description": "unavailable"}], "calls": ["ps.plugin->Initialize", "ps.plugin->Deinitialize", "ps.plugin->QueryInterface", "dispatcher->Invoke", "plugin->Release"], "search-terms": ["AppGateway_Init_DeinitTests", "L0Test", "ServiceMock", "Initialize_Twice", "Deinitialize_Twice", "RPC resolve", "Unit tests", "Isolated build tests"], "state": 2, "file_id": 8719, "knowledge_revision": 17443, "git_revision": "988378322a0123f0e521fa92423a0cc8f4c57e27", "ctags": [{"_type": "tag", "name": "ExpectEqStr", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^static void ExpectEqStr(TestResult& tr, const std::string& actual, const std::string& expected, /", "file": true, "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(TestResult & tr,const std::string & actual,const std::string & expected,const std::string & what)", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"_type": "tag", "name": "ExpectEqU32", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^static void ExpectEqU32(TestResult& tr, const uint32_t actual, const uint32_t expected, const st/", "file": true, "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(TestResult & tr,const uint32_t actual,const uint32_t expected,const std::string & what)", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"_type": "tag", "name": "ExpectTrue", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^static void ExpectTrue(TestResult& tr, const bool condition, const std::string& what) {$/", "file": true, "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(TestResult & tr,const bool condition,const std::string & what)", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"_type": "tag", "name": "PluginAndService", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^    explicit PluginAndService(const L0Test::ServiceMock::Config& cfg = {})$/", "file": true, "language": "C++", "kind": "function", "signature": "(const L0Test::ServiceMock::Config & cfg={})", "scope": "__anon11fb56490111::PluginAndService", "scopeKind": "struct"}, {"_type": "tag", "name": "PluginAndService", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^struct PluginAndService {$/", "file": true, "language": "C++", "kind": "struct", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"_type": "tag", "name": "ResolveParamsJson", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^static std::string ResolveParamsJson(const std::string& method, const std::string& params = \"{}\"/", "file": true, "language": "C++", "typeref": "typename:std::string", "kind": "function", "signature": "(const std::string & method,const std::string & params=\"{}\")", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"_type": "tag", "name": "TestResult", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^struct TestResult {$/", "file": true, "language": "C++", "kind": "struct", "scope": "__anon11fb56490111", "scopeKind": "namespace"}, {"_type": "tag", "name": "Test_Deinitialize_Twice_NoCrash", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^uint32_t Test_Deinitialize_Twice_NoCrash()$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "Test_Initialize_Twice_Idempotent", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^uint32_t Test_Initialize_Twice_Idempotent()$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "Test_Initialize_WithValidConfig_Succeeds", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^uint32_t Test_Initialize_WithValidConfig_Succeeds()$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "Test_JsonRpc_Registration_And_Unregistration", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^uint32_t Test_JsonRpc_Registration_And_Unregistration()$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "__anon11fb56490111", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^namespace {$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "failures", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^    uint32_t failures { 0 };$/", "file": true, "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "__anon11fb56490111::TestResult", "scopeKind": "struct"}, {"_type": "tag", "name": "plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^    IPlugin* plugin { nullptr };$/", "file": true, "language": "C++", "typeref": "typename:IPlugin *", "kind": "member", "scope": "__anon11fb56490111::PluginAndService", "scopeKind": "struct"}, {"_type": "tag", "name": "service", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^    L0Test::ServiceMock* service { nullptr };$/", "file": true, "language": "C++", "typeref": "typename:L0Test::ServiceMock *", "kind": "member", "scope": "__anon11fb56490111::PluginAndService", "scopeKind": "struct"}, {"_type": "tag", "name": "~PluginAndService", "path": "/home/kavia/workspace/code-generation/app-gateway2/tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "pattern": "/^    ~PluginAndService()$/", "file": true, "language": "C++", "kind": "function", "signature": "()", "scope": "__anon11fb56490111::PluginAndService", "scopeKind": "struct"}], "hash": "396a0da5cc8c967002fc8ce317f01d82", "format-version": 4, "code-base-name": "app-gateway2", "filename": "tests/l0/appgateway/l0test/AppGateway_Init_DeinitTests.cpp", "fields": [{"name": "uint32_t failures", "scope": "__anon11fb56490111::TestResult", "scopeKind": "struct", "description": "unavailable"}, {"name": "IPlugin * plugin", "scope": "__anon11fb56490111::PluginAndService", "scopeKind": "struct", "description": "unavailable"}, {"name": "L0Test::ServiceMock * service", "scope": "__anon11fb56490111::PluginAndService", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"17443": "988378322a0123f0e521fa92423a0cc8f4c57e27"}]}