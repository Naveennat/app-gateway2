{"is_source_file": true, "format": "C++", "description": "This file contains the implementation of the DobbyInterface class, which manages container lifecycle operations such as start, stop, pause, resume, and state management using DobbyProxy and omi_proxy. It also handles events related to container state changes and errors, and interacts with other system components through IPC and JSON-RPC.", "external_files": ["<sys/stat.h>", "DobbyInterface.h", "<Dobby/DobbyProxy.h>", "<Dobby/IpcService/IpcFactory.h>", "<omi_proxy.hpp>", "UtilsJsonRpc.h"], "external_methods": ["AI_IPC::createIpcService", "DobbyProxy::registerListener", "DobbyProxy::unregisterListener", "DobbyProxy::listContainers", "DobbyProxy::getContainerState", "DobbyProxy::getContainerInfo", "DobbyProxy::startContainerFromBundle", "DobbyProxy::startContainerFromSpec", "DobbyProxy::stopContainer", "DobbyProxy::pauseContainer", "DobbyProxy::resumeContainer", "DobbyProxy::hibernateContainer", "DobbyProxy::wakeupContainer", "DobbyProxy::execInContainer", "DobbyProxy::addAnnotation", "DobbyProxy::removeAnnotation", "DobbyProxy::addContainerMount", "DobbyProxy::removeContainerMount", "omi::OmiProxy::registerListener", "omi::OmiProxy::unregisterListener", "omi::OmiProxy::mountCryptedBundle", "omi::OmiProxy::umountCryptedBundle", "WPEFramework::Core::JSON::IElement::ToString"], "published": ["DobbyInterface"], "classes": [{"name": "DobbyInterface", "description": "Implements container lifecycle management, event handling, and IPC communication with Dobby daemon and omi proxy."}], "methods": [{"name": "bool initialize(IEventHandler * eventHandler)", "description": "Sets up IPC, creates proxy objects, and registers listeners for container events and errors.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "void terminate()", "description": "Unregisters listeners and clears references to IPC proxies and event handlers.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "bool listContainers(string & containers,string & errorReason)", "description": "Retrieves a list of running containers and formats it as a JSON string.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "bool getContainerState(const string & containerId,Exchange::IOCIContainer::ContainerState & state,string & errorReason)", "description": "Gets the current state of a specified container by ID.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "bool getContainerInfo(const string & containerId,string & info,string & errorReason)", "description": "Fetches detailed information about a specified container.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "bool startContainer(const string & containerId,const string & bundlePath,const string & command,const string & westerosSocket,int32_t & descriptor,string & errorReason)", "description": "Starts a container from an OCI bundle at a given path with optional command and socket parameters.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "bool startContainerFromDobbySpec(const string & containerId,const string & dobbySpec,const string & command,const string & westerosSocket,int32_t & descriptor,string & errorReason)", "description": "Starts a container based on a provided Dobby spec, with optional command and socket.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "bool stopContainer(const string & containerId,bool force,string & errorReason)", "description": "Stops a specified container, with support for force stopping.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "bool pauseContainer(const string & containerId,string & errorReason)", "description": "Pauses a specified container.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "bool resumeContainer(const string & containerId,string & errorReason)", "description": "Resumes a paused container.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "bool hibernateContainer(const string & containerId,const string & options,string & errorReason)", "description": "Hibernates a container with provided options.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "bool wakeupContainer(const string & containerId,string & errorReason)", "description": "Wakes up a hibernated container.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "bool executeCommand(const string & containerId,const string & options,const string & command,string & errorReason)", "description": "Executes a command inside a container.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "bool annotate(const string & containerId,const string & key,const string & value,string & errorReason)", "description": "Adds an annotation key-value pair to a container.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "bool removeAnnotation(const string & containerId,const string & key,string & errorReason)", "description": "Removes an annotation from a container by key.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "bool mount(const string & containerId,const string & source,const string & target,const string & type,const string & options,string & errorReason)", "description": "Mounts a source to a target inside a container.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "bool unmount(const string & containerId,const string & target,string & errorReason)", "description": "Unmounts a target from inside a container.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "void onContainerStarted(int32_t descriptor,const std::string & name)", "description": "Triggers an event indicating a container has started.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "void onContainerStopped(int32_t descriptor,const std::string & name)", "description": "Triggers an event indicating a container has stopped.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "void onContainerStateChanged(int32_t descriptor,const std::string & name,IDobbyProxyEvents::ContainerState dobbyContainerState)", "description": "Handles container state change events and converts internal states to standardized container states.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "const int GetContainerDescriptorFromId(const std::string & containerId)", "description": "Converts a container ID to its internal descriptor if known.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "const std::string GetContainerIdFromDescriptor(const int descriptor)", "description": "Converts a descriptor to its corresponding container ID.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "const void stateListener(int32_t descriptor,const std::string & name,IDobbyProxyEvents::ContainerState state,const void * _this)", "description": "Callback for container state or lifecycle events from DobbyProxy.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "const void omiErrorListener(const std::string & id,omi::IOmiProxy::ErrorType err,const void * _this)", "description": "Callback for error events from omi proxy, such as verity failures.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "void onVerityFailed(const std::string & name)", "description": "Handles container verification failure by stopping the container and notifying events.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "DobbyInterface()", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "bool is_encrypted(const std::string & bundlePath)", "scope": "WPEFramework::Plugin", "scopeKind": "namespace", "description": "unavailable"}, {"name": "~DobbyInterface()", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}], "calls": ["mDobbyProxy->listContainers()", "mDobbyProxy->getContainerState()", "mDobbyProxy->getContainerInfo()", "mDobbyProxy->startContainerFromBundle()", "mDobbyProxy->startContainerFromSpec()", "mDobbyProxy->stopContainer()", "mDobbyProxy->pauseContainer()", "mDobbyProxy->resumeContainer()", "mDobbyProxy->hibernateContainer()", "mDobbyProxy->wakeupContainer()", "mDobbyProxy->execInContainer()", "mDobbyProxy->addAnnotation()", "mDobbyProxy->removeAnnotation()", "mDobbyProxy->addContainerMount()", "mDobbyProxy->removeContainerMount()", "mOmiProxy->mountCryptedBundle()", "mOmiProxy->umountCryptedBundle()", "mOmiProxy->registerListener()", "mOmiProxy->unregisterListener()", "WPEFramework::Core::JSON::IElement::ToString()"], "search-terms": ["DobbyInterface", "listContainers", "containerState", "OCIBundle", "ContainerLifecycle", "proxy", "eventHandler", "mount", "unmount", "startContainer", "stopContainer", "pause", "resume", "hibernate", "wake", "executeCommand"], "state": 2, "file_id": 3915, "knowledge_revision": 7812, "git_revision": "", "ctags": [{"_type": "tag", "name": "DobbyInterface", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^DobbyInterface::DobbyInterface(): mEventHandler(nullptr)$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "GetContainerDescriptorFromId", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^const int DobbyInterface::GetContainerDescriptorFromId(const std::string& containerId)$/", "language": "C++", "typeref": "typename:const int", "kind": "function", "signature": "(const std::string & containerId)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "GetContainerIdFromDescriptor", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^const std::string DobbyInterface::GetContainerIdFromDescriptor(const int descriptor)$/", "language": "C++", "typeref": "typename:const std::string", "kind": "function", "signature": "(const int descriptor)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^namespace Plugin$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^namespace WPEFramework$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "annotate", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::annotate(const string& containerId, const string& key, const string& value,/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,const string & key,const string & value,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "executeCommand", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::executeCommand(const string& containerId, const string& options, const stri/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,const string & options,const string & command,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "getContainerInfo", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::getContainerInfo(const string& containerId, string& info, string& errorReas/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,string & info,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "getContainerState", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::getContainerState(const string& containerId, Exchange::IOCIContainer::Conta/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,Exchange::IOCIContainer::ContainerState & state,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "hibernateContainer", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::hibernateContainer(const string& containerId, const string& options, string/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,const string & options,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "initialize", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::initialize(IEventHandler* eventHandler)$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(IEventHandler * eventHandler)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "is_encrypted", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^static bool is_encrypted(const std::string &bundlePath) {$/", "file": true, "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & bundlePath)", "scope": "WPEFramework::Plugin", "scopeKind": "namespace"}, {"_type": "tag", "name": "listContainers", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::listContainers(string& containers, string& errorReason)$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(string & containers,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "mount", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::mount(const string& containerId, const string& source, const string& target/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,const string & source,const string & target,const string & type,const string & options,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "omiErrorListener", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^const void DobbyInterface::omiErrorListener(const std::string& id, omi::IOmiProxy::ErrorType err/", "language": "C++", "typeref": "typename:const void", "kind": "function", "signature": "(const std::string & id,omi::IOmiProxy::ErrorType err,const void * _this)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "onContainerStarted", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^void DobbyInterface::onContainerStarted(int32_t descriptor, const std::string& name)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(int32_t descriptor,const std::string & name)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "onContainerStateChanged", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^void DobbyInterface::onContainerStateChanged(int32_t descriptor, const std::string& name, IDobby/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(int32_t descriptor,const std::string & name,IDobbyProxyEvents::ContainerState dobbyContainerState)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "onContainerStopped", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^void DobbyInterface::onContainerStopped(int32_t descriptor, const std::string& name)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(int32_t descriptor,const std::string & name)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "onVerityFailed", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^void DobbyInterface::onVerityFailed(const std::string& name)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const std::string & name)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "pauseContainer", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::pauseContainer(const string& containerId, string& errorReason)$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "removeAnnotation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::removeAnnotation(const string& containerId, const string& key, string& erro/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,const string & key,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "resumeContainer", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::resumeContainer(const string& containerId, string& errorReason)$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "startContainer", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::startContainer(const string& containerId, const string& bundlePath, const s/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,const string & bundlePath,const string & command,const string & westerosSocket,int32_t & descriptor,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "startContainerFromDobbySpec", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::startContainerFromDobbySpec(const string& containerId, const string& dobbyS/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,const string & dobbySpec,const string & command,const string & westerosSocket,int32_t & descriptor,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "stateListener", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^const void DobbyInterface::stateListener(int32_t descriptor, const std::string& name, IDobbyProx/", "language": "C++", "typeref": "typename:const void", "kind": "function", "signature": "(int32_t descriptor,const std::string & name,IDobbyProxyEvents::ContainerState state,const void * _this)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "stopContainer", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::stopContainer(const string& containerId, bool force, string& errorReason)$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,bool force,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "terminate", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^void DobbyInterface::terminate()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "unmount", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::unmount(const string& containerId, const string& target, string& errorReaso/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,const string & target,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "wakeupContainer", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::wakeupContainer(const string& containerId, string& errorReason)$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "~DobbyInterface", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^DobbyInterface::~DobbyInterface()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}], "hash": "96416d30384e22f8bc8214bc2cb6a7d1", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "revision_history": [{"7812": ""}]}