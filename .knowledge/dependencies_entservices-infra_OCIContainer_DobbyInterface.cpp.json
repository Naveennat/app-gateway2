{"is_source_file": true, "format": "C++", "description": "This file implements the DobbyInterface class, which manages container lifecycle operations and event handling for OCI containers using Dobby proxy and IPC mechanisms. It includes methods for starting, stopping, pausing, resuming, hibernating, waking up containers, and handling container events and errors.", "external_files": ["<sys/stat.h>", "DobbyInterface.h", "<Dobby/DobbyProxy.h>", "<Dobby/IpcService/IpcFactory.h>", "omi_proxy.hpp", "UtilsJsonRpc.h"], "external_methods": ["AI_IPC::createIpcService", "DobbyProxy::registerListener", "DobbyProxy::unregisterListener", "DobbyProxy::listContainers", "DobbyProxy::getContainerState", "DobbyProxy::getContainerInfo", "DobbyProxy::startContainerFromBundle", "DobbyProxy::startContainerFromSpec", "DobbyProxy::stopContainer", "DobbyProxy::pauseContainer", "DobbyProxy::resumeContainer", "DobbyProxy::hibernateContainer", "DobbyProxy::wakeupContainer", "DobbyProxy::execInContainer", "DobbyProxy::addAnnotation", "DobbyProxy::removeAnnotation", "DobbyProxy::addContainerMount", "DobbyProxy::removeContainerMount", "omi::OmiProxy::registerListener", "omi::OmiProxy::unregisterListener", "omi::OmiProxy::mountCryptedBundle", "omi::OmiProxy::umountCryptedBundle", "json_object::ToString"], "published": ["initialize", "terminate", "listContainers", "getContainerState", "getContainerInfo", "startContainer", "startContainerFromDobbySpec", "stopContainer", "pauseContainer", "resumeContainer", "hibernateContainer", "wakeupContainer", "executeCommand", "annotate", "removeAnnotation", "mount", "unmount", "onContainerStarted", "onContainerStopped", "onContainerStateChanged", "onVerityFailed"], "classes": [{"name": "DobbyInterface", "description": "Manages container lifecycle operations via Dobby proxy, handles container events, error recovery, and maintains container state information."}], "methods": [{"name": "const int GetContainerDescriptorFromId(const std::string & containerId)", "description": "Converts an OCI container ID to an internal Dobby descriptor if known.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "const std::string GetContainerIdFromDescriptor(const int descriptor)", "description": "Maps a Dobby container descriptor back to its OCI container ID.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "const void stateListener(int32_t descriptor,const std::string & name,IDobbyProxyEvents::ContainerState state,const void * _this)", "description": "Static callback for container state changes, invokes event handlers.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "const void omiErrorListener(const std::string & id,omi::IOmiProxy::ErrorType err,const void * _this)", "description": "Static callback for OMI proxy error events, triggers verity failure handling.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "void onVerityFailed(const std::string & name)", "description": "Handles container verity check failure by stopping the container and notifying event handlers.", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"name": "DobbyInterface()", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "bool annotate(const string & containerId,const string & key,const string & value,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "bool executeCommand(const string & containerId,const string & options,const string & command,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "bool getContainerInfo(const string & containerId,string & info,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "bool getContainerState(const string & containerId,Exchange::IOCIContainer::ContainerState & state,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "bool hibernateContainer(const string & containerId,const string & options,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "bool initialize(IEventHandler * eventHandler)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "bool is_encrypted(const std::string & bundlePath)", "scope": "WPEFramework::Plugin", "scopeKind": "namespace", "description": "unavailable"}, {"name": "bool listContainers(string & containers,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "bool mount(const string & containerId,const string & source,const string & target,const string & type,const string & options,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "void onContainerStarted(int32_t descriptor,const std::string & name)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "void onContainerStateChanged(int32_t descriptor,const std::string & name,IDobbyProxyEvents::ContainerState dobbyContainerState)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "void onContainerStopped(int32_t descriptor,const std::string & name)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "bool pauseContainer(const string & containerId,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "bool removeAnnotation(const string & containerId,const string & key,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "bool resumeContainer(const string & containerId,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "bool startContainer(const string & containerId,const string & bundlePath,const string & command,const string & westerosSocket,int32_t & descriptor,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "bool startContainerFromDobbySpec(const string & containerId,const string & dobbySpec,const string & command,const string & westerosSocket,int32_t & descriptor,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "bool stopContainer(const string & containerId,bool force,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "void terminate()", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "bool unmount(const string & containerId,const string & target,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "bool wakeupContainer(const string & containerId,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}, {"name": "~DobbyInterface()", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class", "description": "unavailable"}], "calls": ["mDobbyProxy->listContainers", "mDobbyProxy->getContainerState", "mDobbyProxy->getContainerInfo", "mDobbyProxy->startContainerFromBundle", "mDobbyProxy->startContainerFromSpec", "mDobbyProxy->stopContainer", "mDobbyProxy->pauseContainer", "mDobbyProxy->resumeContainer", "mDobbyProxy->hibernateContainer", "mDobbyProxy->wakeupContainer", "mDobbyProxy->execInContainer", "mDobbyProxy->addAnnotation", "mDobbyProxy->removeAnnotation", "mDobbyProxy->addContainerMount", "mDobbyProxy->removeContainerMount", "mOmiProxy->mountCryptedBundle", "mOmiProxy->umountCryptedBundle", "mOmiProxy->registerListener", "mOmiProxy->unregisterListener"], "search-terms": ["DobbyInterface", "listContainers", "ContainerState", "startContainer", "stopContainer", "wakeupContainer", "mountCryptedBundle", "OmiProxy", "ContainerDescriptor", "containerId", "verdict"], "state": 2, "file_id": 8402, "knowledge_revision": 17147, "git_revision": "", "ctags": [{"_type": "tag", "name": "DobbyInterface", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^DobbyInterface::DobbyInterface(): mEventHandler(nullptr)$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "GetContainerDescriptorFromId", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^const int DobbyInterface::GetContainerDescriptorFromId(const std::string& containerId)$/", "language": "C++", "typeref": "typename:const int", "kind": "function", "signature": "(const std::string & containerId)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "GetContainerIdFromDescriptor", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^const std::string DobbyInterface::GetContainerIdFromDescriptor(const int descriptor)$/", "language": "C++", "typeref": "typename:const std::string", "kind": "function", "signature": "(const int descriptor)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^namespace Plugin$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^namespace WPEFramework$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "annotate", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::annotate(const string& containerId, const string& key, const string& value,/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,const string & key,const string & value,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "executeCommand", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::executeCommand(const string& containerId, const string& options, const stri/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,const string & options,const string & command,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "getContainerInfo", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::getContainerInfo(const string& containerId, string& info, string& errorReas/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,string & info,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "getContainerState", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::getContainerState(const string& containerId, Exchange::IOCIContainer::Conta/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,Exchange::IOCIContainer::ContainerState & state,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "hibernateContainer", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::hibernateContainer(const string& containerId, const string& options, string/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,const string & options,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "initialize", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::initialize(IEventHandler* eventHandler)$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(IEventHandler * eventHandler)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "is_encrypted", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^static bool is_encrypted(const std::string &bundlePath) {$/", "file": true, "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string & bundlePath)", "scope": "WPEFramework::Plugin", "scopeKind": "namespace"}, {"_type": "tag", "name": "listContainers", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::listContainers(string& containers, string& errorReason)$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(string & containers,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "mount", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::mount(const string& containerId, const string& source, const string& target/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,const string & source,const string & target,const string & type,const string & options,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "omiErrorListener", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^const void DobbyInterface::omiErrorListener(const std::string& id, omi::IOmiProxy::ErrorType err/", "language": "C++", "typeref": "typename:const void", "kind": "function", "signature": "(const std::string & id,omi::IOmiProxy::ErrorType err,const void * _this)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "onContainerStarted", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^void DobbyInterface::onContainerStarted(int32_t descriptor, const std::string& name)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(int32_t descriptor,const std::string & name)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "onContainerStateChanged", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^void DobbyInterface::onContainerStateChanged(int32_t descriptor, const std::string& name, IDobby/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(int32_t descriptor,const std::string & name,IDobbyProxyEvents::ContainerState dobbyContainerState)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "onContainerStopped", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^void DobbyInterface::onContainerStopped(int32_t descriptor, const std::string& name)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(int32_t descriptor,const std::string & name)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "onVerityFailed", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^void DobbyInterface::onVerityFailed(const std::string& name)$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const std::string & name)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "pauseContainer", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::pauseContainer(const string& containerId, string& errorReason)$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "removeAnnotation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::removeAnnotation(const string& containerId, const string& key, string& erro/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,const string & key,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "resumeContainer", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::resumeContainer(const string& containerId, string& errorReason)$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "startContainer", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::startContainer(const string& containerId, const string& bundlePath, const s/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,const string & bundlePath,const string & command,const string & westerosSocket,int32_t & descriptor,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "startContainerFromDobbySpec", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::startContainerFromDobbySpec(const string& containerId, const string& dobbyS/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,const string & dobbySpec,const string & command,const string & westerosSocket,int32_t & descriptor,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "stateListener", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^const void DobbyInterface::stateListener(int32_t descriptor, const std::string& name, IDobbyProx/", "language": "C++", "typeref": "typename:const void", "kind": "function", "signature": "(int32_t descriptor,const std::string & name,IDobbyProxyEvents::ContainerState state,const void * _this)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "stopContainer", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::stopContainer(const string& containerId, bool force, string& errorReason)$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,bool force,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "terminate", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^void DobbyInterface::terminate()$/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "unmount", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::unmount(const string& containerId, const string& target, string& errorReaso/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,const string & target,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "wakeupContainer", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^bool DobbyInterface::wakeupContainer(const string& containerId, string& errorReason)$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & containerId,string & errorReason)", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}, {"_type": "tag", "name": "~DobbyInterface", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "pattern": "/^DobbyInterface::~DobbyInterface()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::DobbyInterface", "scopeKind": "class"}], "hash": "96416d30384e22f8bc8214bc2cb6a7d1", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/OCIContainer/DobbyInterface.cpp", "revision_history": [{"17147": ""}]}