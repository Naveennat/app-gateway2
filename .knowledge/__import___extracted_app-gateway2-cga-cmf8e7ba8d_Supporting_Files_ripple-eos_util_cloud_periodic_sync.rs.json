{"is_source_file": true, "format": "Rust", "description": "This file defines the `CloudPeriodicSync` struct and its implementation, which manages periodic cloud synchronization tasks using Tokio's async runtime, channels, and tasks. It sets up a background task that periodically fetches cloud data and dispatches it to listeners, based on configuration and state.", "external_files": ["super::cloud_sync_monitor_utils::StateRequest", "crate::state::distributor_state::DistributorState", "crate::util::sync_settings::SyncSettings", "tokio::sync::mpsc::{self, Sender}", "tokio::sync::oneshot", "tokio::time::{interval, Duration}", "thunder_ripple_sdk::ripple_sdk::log::{debug, error}"], "external_methods": ["tokio::spawn", "tokio::sync::mpsc::channel", "tokio::sync::mpsc::Sender::send", "tokio::sync::oneshot::channel", "SyncSettings::get_values_from_cloud", "StateRequest::GetListenersForModule", "Listener.callback.send"], "published": ["CloudPeriodicSync"], "classes": [{"name": "CloudPeriodicSync", "description": "Struct managing periodic cloud synchronization, primarily holding the sender channel for control."}], "methods": [{"name": "start(dist_state: &DistributorState, state_tx: Sender<StateRequest>) -> Self", "description": "Initializes and starts the background task that performs periodic cloud sync based on DistributorState configuration.", "scope": "CloudPeriodicSync", "scopeKind": "implementation"}, {"name": "sync(&self, sync_settings: SyncSettings)", "description": "Sends new sync settings to the background task to trigger immediate sync as needed.", "scope": "CloudPeriodicSync", "scopeKind": "implementation"}], "calls": ["tokio::spawn", "tokio::sync::mpsc::channel", "tokio::sync::mpsc::Sender::send", "tokio::sync::oneshot::channel", "stc.send", "listener.callback.send"], "search-terms": ["CloudPeriodicSync", "async cloud sync", "tokio spawn periodic task", "cloud sync monitor utils", "distributor state", "sync settings"], "state": 2, "file_id": 1839, "knowledge_revision": 4428, "git_revision": "0f87a35b32215bc8547fb583d6c84bd51f603f69", "ctags": [{"_type": "tag", "name": "CloudPeriodicSync", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/util/cloud_periodic_sync.rs", "pattern": "/^impl CloudPeriodicSync {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "CloudPeriodicSync", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/util/cloud_periodic_sync.rs", "pattern": "/^pub struct CloudPeriodicSync {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "monitor_tx", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/util/cloud_periodic_sync.rs", "pattern": "/^    monitor_tx: Sender<SyncSettings>,$/", "language": "Rust", "kind": "field", "scope": "CloudPeriodicSync", "scopeKind": "struct"}, {"_type": "tag", "name": "start", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/util/cloud_periodic_sync.rs", "pattern": "/^    pub fn start(dist_state: &DistributorState, state_tx: Sender<StateRequest>) -> Self {$/", "language": "Rust", "kind": "method", "signature": "(dist_state: &DistributorState, state_tx: Sender<StateRequest>) -> Self", "scope": "CloudPeriodicSync", "scopeKind": "implementation"}, {"_type": "tag", "name": "sync", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/util/cloud_periodic_sync.rs", "pattern": "/^    pub async fn sync(&self, sync_settings: SyncSettings) {$/", "language": "Rust", "kind": "method", "signature": "(&self, sync_settings: SyncSettings)", "scope": "CloudPeriodicSync", "scopeKind": "implementation"}], "hash": "94abd3dfcd1577d39fadebfdff8d0f4f", "format-version": 4, "code-base-name": "app-gateway2", "filename": "__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/util/cloud_periodic_sync.rs", "fields": [{"name": "monitor_tx: Sender<SyncSettings>,", "scope": "CloudPeriodicSync", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"4428": "0f87a35b32215bc8547fb583d6c84bd51f603f69"}]}