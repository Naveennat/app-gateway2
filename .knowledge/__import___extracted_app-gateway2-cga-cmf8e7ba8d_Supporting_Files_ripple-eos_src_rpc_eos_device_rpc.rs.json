{"is_source_file": true, "format": "Rust", "description": "This Rust source file defines an RPC server implementation for device-related operations such as provisioning, getting device ID, and retrieving distributor ID. It includes trait definitions, an implementation struct, and associated methods that interact with device sessions and Thunder SDK calls.", "external_files": ["jsonrpsee::core", "jsonrpsee::proc_macros::rpc", "thunder_ripple_sdk::client::device_operator::{DeviceCallRequest, DeviceChannelParams, DeviceOperator}", "thunder_ripple_sdk::client::thunder_plugin::ThunderPlugin", "thunder_ripple_sdk::ripple_sdk::api::{gateway::rpc_gateway_api::CallContext, session::ProvisionRequest}", "thunder_ripple_sdk::log::{debug, error, info}", "crate::extn::thunder::thunder_session::ThunderSessionService", "crate::rpc::rpc_utils::rpc_err", "crate::state::distributor_state::DistributorState"], "external_methods": ["ThunderSessionService::get_account_session", "ThunderSessionService::set_provision", "DistributorState::get_account_session", "DistributorState::update_account_session", "DistributorState::get_thunder", "DistributorState::get_thunder_client"], "published": ["Device"], "classes": [{"name": "DeviceImpl", "description": "Implementation of the Device RPC services handling device provisioning and identification."}], "methods": [{"name": "provision( &self, ctx: CallContext, provision_request: ProvisionRequest, ) -> RpcResult<()>", "description": "Handles device provisioning requests, updating session data and invoking Thunder SDK for provisioning.", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"name": "id(&self, _ctx: CallContext) -> RpcResult<String>", "description": "Retrieves the device ID, either from session data or fallback to MAC address.", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"name": "distributor(&self, _ctx: CallContext) -> RpcResult<String>", "description": "Returns the distributor ID associated with the current device session.", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"name": "get_device_id(state: &DistributorState) -> RpcResult<String>", "description": "Asynchronously obtains the device ID, either from session or by MAC address.", "scope": "", "scopeKind": ""}, {"name": "filter_mac(mac_address: String) -> String", "description": "Sanitizes the MAC address string by removing colons and validating its format.", "scope": "", "scopeKind": ""}, {"name": "get_mac(state: &DistributorState) -> String", "description": "Fetches the device's MAC address via Thunder SDK call.", "scope": "", "scopeKind": ""}, {"name": "distributor(&self, ctx: CallContext) -> RpcResult<String>", "scope": "Device", "scopeKind": "interface", "description": "unavailable"}, {"name": "id(&self, ctx: CallContext) -> RpcResult<String>", "scope": "Device", "scopeKind": "interface", "description": "unavailable"}, {"name": "new(state: &DistributorState) -> Self", "scope": "DeviceImpl", "scopeKind": "implementation", "description": "unavailable"}, {"name": "provision( &self, mut _ctx: CallContext, provision_request: ProvisionRequest, ) -> RpcResult<()>", "scope": "DeviceImpl", "scopeKind": "implementation", "description": "unavailable"}], "calls": ["ThunderSessionService::get_account_session", "ThunderSessionService::set_provision", "self.state.get_account_session", "self.state.update_account_session", "self.state.get_thunder", "self.state.get_thunder_client", "client.call"], "search-terms": ["device.provision", "rpc implementation", "ThunderSessionService", "distributor_id", "device ID retrieval", "mac address", "RPC server in Rust"], "state": 2, "file_id": 1793, "knowledge_revision": 4387, "git_revision": "0f87a35b32215bc8547fb583d6c84bd51f603f69", "ctags": [{"_type": "tag", "name": "Device", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^pub trait Device {$/", "language": "Rust", "kind": "interface"}, {"_type": "tag", "name": "DeviceImpl", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^impl DeviceImpl {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "DeviceImpl", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^impl DeviceServer for DeviceImpl {$/", "language": "Rust", "kind": "implementation"}, {"_type": "tag", "name": "DeviceImpl", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^pub struct DeviceImpl {$/", "language": "Rust", "kind": "struct"}, {"_type": "tag", "name": "distributor", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    async fn distributor(&self, _ctx: CallContext) -> RpcResult<String> {$/", "language": "Rust", "kind": "method", "signature": "(&self, _ctx: CallContext) -> RpcResult<String>", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "distributor", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    async fn distributor(&self, ctx: CallContext) -> RpcResult<String>;$/", "language": "Rust", "kind": "method", "signature": "(&self, ctx: CallContext) -> RpcResult<String>", "scope": "Device", "scopeKind": "interface"}, {"_type": "tag", "name": "filter_mac", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^fn filter_mac(mac_address: String) -> String {$/", "language": "Rust", "kind": "function", "signature": "(mac_address: String) -> String"}, {"_type": "tag", "name": "get_device_id", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^pub(crate) async fn get_device_id(state: &DistributorState) -> RpcResult<String> {$/", "language": "Rust", "kind": "function", "signature": "(state: &DistributorState) -> RpcResult<String>"}, {"_type": "tag", "name": "get_mac", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^pub(crate) async fn get_mac(state: &DistributorState) -> String {$/", "language": "Rust", "kind": "function", "signature": "(state: &DistributorState) -> String"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    async fn id(&self, _ctx: CallContext) -> RpcResult<String> {$/", "language": "Rust", "kind": "method", "signature": "(&self, _ctx: CallContext) -> RpcResult<String>", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    async fn id(&self, ctx: CallContext) -> RpcResult<String>;$/", "language": "Rust", "kind": "method", "signature": "(&self, ctx: CallContext) -> RpcResult<String>", "scope": "Device", "scopeKind": "interface"}, {"_type": "tag", "name": "new", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    pub fn new(state: &DistributorState) -> Self {$/", "language": "Rust", "kind": "method", "signature": "(state: &DistributorState) -> Self", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "provision", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    async fn provision($/", "language": "Rust", "kind": "method", "signature": "( &self, ctx: CallContext, provision_request: ProvisionRequest, ) -> RpcResult<()>", "scope": "Device", "scopeKind": "interface"}, {"_type": "tag", "name": "provision", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    async fn provision($/", "language": "Rust", "kind": "method", "signature": "( &self, ctx: CallContext, provision_request: ProvisionRequest, ) -> RpcResult<()>", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "provision", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    async fn provision($/", "language": "Rust", "kind": "method", "signature": "( &self, mut _ctx: CallContext, provision_request: ProvisionRequest, ) -> RpcResult<()>", "scope": "DeviceImpl", "scopeKind": "implementation"}, {"_type": "tag", "name": "state", "path": "/home/kavia/workspace/code-generation/app-gateway2/__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "pattern": "/^    pub state: DistributorState,$/", "language": "Rust", "kind": "field", "scope": "DeviceImpl", "scopeKind": "struct"}], "hash": "211e662e0b9560ebf810afbf8235450c", "format-version": 4, "code-base-name": "app-gateway2", "filename": "__import__/extracted/app-gateway2-cga-cmf8e7ba8d/Supporting_Files/ripple-eos/src/rpc/eos_device_rpc.rs", "fields": [{"name": "pub trait Device {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "pub state: DistributorState,", "scope": "DeviceImpl", "scopeKind": "struct", "description": "unavailable"}], "revision_history": [{"4387": "0f87a35b32215bc8547fb583d6c84bd51f603f69"}]}