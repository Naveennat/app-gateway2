{"is_source_file": true, "format": "C++ header file", "description": "This file defines internal implementation classes and related data structures for the App2AppProvider plugin, including provider and consumer contexts, registry, correlation map, gateway client, and permission manager.", "external_files": ["<core/JSON.h>", "<core/Sync.h>", "<core/Time.h>", "<core/JSONRPC.h>", "<plugins/Module.h>", "<interfaces/IAuthenticate.h>", "UtilsLogging.h"], "external_methods": [], "published": ["ProviderContext", "ConsumerContext", "ProviderRegistry", "CorrelationMap", "GatewayClient", "PermissionManager"], "classes": [{"name": "ProviderContext", "description": "Holds provider registration context and metadata, including connection ID, app ID, provider ID, and associated metadata."}, {"name": "ConsumerContext", "description": "Stores consumer request context and request correlation details, including connection ID, app ID, request ID, method, parameters in JSON, and timestamp."}, {"name": "ProviderRegistry", "description": "Manages the registration and resolution of provider capabilities to contexts, with thread safety."}, {"name": "CorrelationMap", "description": "Creates, retrieves, and removes consumer correlation records using correlation IDs with thread safety."}, {"name": "GatewayClient", "description": "Handles remote procedure calls to the AppGateway via COMRPC, managing a token and calls to respond to consumer contexts."}, {"name": "PermissionManager", "description": "Stub class for future permission enforcement; currently always returns true for permission checks."}], "methods": [{"name": "Register", "description": "Registers a provider capability with a given provider context."}, {"name": "Unregister", "description": "Unregisters a provider capability for a specific app ID."}, {"name": "Resolve", "description": "Resolves a capability to its provider context if registered."}, {"name": "Create", "description": "Creates a new correlation record and returns its ID."}, {"name": "Take", "description": "Removes and retrieves a correlation record by its ID."}, {"name": "Peek", "description": "Retrieves a correlation record by its ID without removing it."}, {"name": "Respond", "description": "Invokes the AppGateway respond method via COMRPC, sending a consumer context and payload."}, {"name": "UpdateToken", "description": "Updates the token used for GatewayClient communication."}, {"name": "bool IsAllowed(const std::string &,const std::string &) const", "description": "Placeholder permission check method, always returns true.", "scope": "App2App::PermissionManager", "scopeKind": "class"}], "calls": ["WPEFramework::PluginHost::IShell*", "GatewayClient::Respond", "WPEFramework::Core::JSON::JsonObject", "LOGDBG"], "search-terms": ["App2AppProviderImplementation", "ProviderRegistry", "CorrelationMap", "GatewayClient", "PermissionManager", "ConsumerContext", "ProviderContext"], "state": 2, "file_id": 376, "knowledge_revision": 755, "git_revision": "93de3ebb5592146b46b0acbe2225f4567d32bfdf", "revision_history": [{"744": "93de3ebb5592146b46b0acbe2225f4567d32bfdf"}, {"755": "93de3ebb5592146b46b0acbe2225f4567d32bfdf"}], "ctags": [{"_type": "tag", "name": "App2App", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^namespace App2App {$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "ConsumerContext", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^struct ConsumerContext {$/", "language": "C++", "kind": "struct", "scope": "App2App", "scopeKind": "namespace"}, {"_type": "tag", "name": "CorrelationMap", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^class CorrelationMap {$/", "language": "C++", "kind": "class", "scope": "App2App", "scopeKind": "namespace"}, {"_type": "tag", "name": "GatewayClient", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^class GatewayClient {$/", "language": "C++", "kind": "class", "scope": "App2App", "scopeKind": "namespace"}, {"_type": "tag", "name": "IsAllowed", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    bool IsAllowed(const std::string& \\/*appId*\\/, const std::string& \\/*requiredGroup*\\/) const/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const std::string &,const std::string &) const", "scope": "App2App::PermissionManager", "scopeKind": "class"}, {"_type": "tag", "name": "PermissionManager", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^class PermissionManager {$/", "language": "C++", "kind": "class", "scope": "App2App", "scopeKind": "namespace"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^namespace Plugin {$/", "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "ProviderContext", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^struct ProviderContext {$/", "language": "C++", "kind": "struct", "scope": "App2App", "scopeKind": "namespace"}, {"_type": "tag", "name": "ProviderRegistry", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^class ProviderRegistry {$/", "language": "C++", "kind": "class", "scope": "App2App", "scopeKind": "namespace"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^namespace WPEFramework {$/", "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "_byCapability", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    std::unordered_map<std::string, ProviderContext> _byCapability;$/", "language": "C++", "typeref": "typename:std::unordered_map<std::string,ProviderContext>", "kind": "member", "scope": "App2App::ProviderRegistry", "scopeKind": "class"}, {"_type": "tag", "name": "_gatewayCallsign", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    std::string _gatewayCallsign;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "App2App::GatewayClient", "scopeKind": "class"}, {"_type": "tag", "name": "_lock", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    mutable WPEFramework::Core::CriticalSection _lock;$/", "language": "C++", "typeref": "typename:WPEFramework::Core::CriticalSection", "kind": "member", "scope": "App2App::CorrelationMap", "scopeKind": "class"}, {"_type": "tag", "name": "_lock", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    mutable WPEFramework::Core::CriticalSection _lock;$/", "language": "C++", "typeref": "typename:WPEFramework::Core::CriticalSection", "kind": "member", "scope": "App2App::ProviderRegistry", "scopeKind": "class"}, {"_type": "tag", "name": "_pending", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    std::unordered_map<std::string, ConsumerContext> _pending;$/", "language": "C++", "typeref": "typename:std::unordered_map<std::string,ConsumerContext>", "kind": "member", "scope": "App2App::CorrelationMap", "scopeKind": "class"}, {"_type": "tag", "name": "_service", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    WPEFramework::PluginHost::IShell* _service;$/", "language": "C++", "typeref": "typename:WPEFramework::PluginHost::IShell *", "kind": "member", "scope": "App2App::GatewayClient", "scopeKind": "class"}, {"_type": "tag", "name": "_token", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    std::string _token;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "App2App::GatewayClient", "scopeKind": "class"}, {"_type": "tag", "name": "appId", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    std::string appId;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "App2App::ConsumerContext", "scopeKind": "struct"}, {"_type": "tag", "name": "appId", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    std::string appId;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "App2App::ProviderContext", "scopeKind": "struct"}, {"_type": "tag", "name": "connectionId", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    uint32_t connectionId {0};$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "App2App::ConsumerContext", "scopeKind": "struct"}, {"_type": "tag", "name": "connectionId", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    uint32_t connectionId {0};$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "App2App::ProviderContext", "scopeKind": "struct"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    std::chrono::steady_clock::time_point createdAt{};$/", "language": "C++", "typeref": "typename:std::chrono::steady_clock::time_point", "kind": "member", "scope": "App2App::ConsumerContext", "scopeKind": "struct"}, {"_type": "tag", "name": "metadata", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    std::map<std::string, std::string> metadata;$/", "language": "C++", "typeref": "typename:std::map<std::string,std::string>", "kind": "member", "scope": "App2App::ProviderContext", "scopeKind": "struct"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    std::string method;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "App2App::ConsumerContext", "scopeKind": "struct"}, {"_type": "tag", "name": "paramsJson", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    std::string paramsJson;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "App2App::ConsumerContext", "scopeKind": "struct"}, {"_type": "tag", "name": "providerId", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    std::string providerId;$/", "language": "C++", "typeref": "typename:std::string", "kind": "member", "scope": "App2App::ProviderContext", "scopeKind": "struct"}, {"_type": "tag", "name": "requestId", "path": "/home/kavia/workspace/code-generation/app-gateway2/app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "pattern": "/^    uint32_t requestId {0};$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "member", "scope": "App2App::ConsumerContext", "scopeKind": "struct"}], "hash": "2731c6b0082b9ccfab3c0bb80ddf7966", "format-version": 4, "code-base-name": "app-gateway2", "filename": "app-gateway2_testing/App2AppProvider/App2AppProviderImplementation.h", "fields": [{"name": "std::unordered_map<std::string,ProviderContext> _byCapability", "scope": "App2App::ProviderRegistry", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string _gatewayCallsign", "scope": "App2App::GatewayClient", "scopeKind": "class", "description": "unavailable"}, {"name": "WPEFramework::Core::CriticalSection _lock", "scope": "App2App::CorrelationMap", "scopeKind": "class", "description": "unavailable"}, {"name": "std::unordered_map<std::string,ConsumerContext> _pending", "scope": "App2App::CorrelationMap", "scopeKind": "class", "description": "unavailable"}, {"name": "WPEFramework::PluginHost::IShell * _service", "scope": "App2App::GatewayClient", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string _token", "scope": "App2App::GatewayClient", "scopeKind": "class", "description": "unavailable"}, {"name": "std::string appId", "scope": "App2App::ConsumerContext", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint32_t connectionId", "scope": "App2App::ConsumerContext", "scopeKind": "struct", "description": "unavailable"}, {"name": "std::chrono::steady_clock::time_point createdAt", "scope": "App2App::ConsumerContext", "scopeKind": "struct", "description": "unavailable"}, {"name": "std::map<std::string,std::string> metadata", "scope": "App2App::ProviderContext", "scopeKind": "struct", "description": "unavailable"}, {"name": "std::string method", "scope": "App2App::ConsumerContext", "scopeKind": "struct", "description": "unavailable"}, {"name": "std::string paramsJson", "scope": "App2App::ConsumerContext", "scopeKind": "struct", "description": "unavailable"}, {"name": "std::string providerId", "scope": "App2App::ProviderContext", "scopeKind": "struct", "description": "unavailable"}, {"name": "uint32_t requestId", "scope": "App2App::ConsumerContext", "scopeKind": "struct", "description": "unavailable"}]}