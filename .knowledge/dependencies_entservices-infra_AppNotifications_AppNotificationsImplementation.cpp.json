{"is_source_file": true, "format": "C++", "description": "This source file implements the AppNotifications service for the WPEFramework platform, handling notification subscriptions, event emission, cleanup, and dispatching to appropriate gateways or delegates. It includes class definitions for managing internal state, subscription maps, and interactions with external interfaces to facilitate app notification handling.", "external_files": ["AppNotificationsImplementation.h", "UtilsLogging.h", "StringUtils.h"], "external_methods": ["Core::IWorkerPool::Instance().Submit()", "Core::ERROR_NONE", "Core::hresult", "QueryInterfaceByCallsign", "ContextUtils::ConvertNotificationToAppGatewayContext", "ContextUtils::IsOriginGateway"], "published": ["operator=="], "classes": [{"name": "AppNotificationsImplementation", "description": "Main class implementing app notification services, managing subscriptions, event emission, cleanup, and dispatching."}, {"name": "AppNotificationsImplementation::SubscriberMap", "description": "Internal class managing subscription map, adding, removing, retrieving, and dispatching notifications to subscribers."}, {"name": "AppNotificationsImplementation::ThunderSubscriptionManager", "description": "Manages Thunder-specific notification registration and unregistration, ensuring proper subscription lifecycle."}], "methods": [{"name": "Core::hresult Subscribe(const Exchange::IAppNotifications::AppNotificationContext & context,bool listen,const string & module,const string & event)", "description": "Handles subscription requests for notifications, managing internal subscription map and Thunder subscriptions.", "scope": "WPEFramework::Plugin::AppNotificationsImplementation", "scopeKind": "class"}, {"name": "Core::hresult Emit(const string & event,const string & payload,const string & appId)", "description": "Emits a notification event with payload to all subscribed clients.", "scope": "WPEFramework::Plugin::AppNotificationsImplementation", "scopeKind": "class"}, {"name": "Core::hresult Cleanup(const uint32_t connectionId,const string & origin)", "description": "Cleans up notifications associated with a specific connection ID and origin.", "scope": "WPEFramework::Plugin::AppNotificationsImplementation", "scopeKind": "class"}, {"name": "uint32_t Configure(PluginHost::IShell * shell)", "description": "Initial configuration method to set the shell interface for the service.", "scope": "WPEFramework::Plugin::AppNotificationsImplementation", "scopeKind": "class"}, {"name": "SubscriberMap::Add", "description": "Adds a new notification context to the subscription map under a specified key."}, {"name": "SubscriberMap::Remove", "description": "Removes a specified notification context from the subscription map."}, {"name": "SubscriberMap::Get", "description": "Retrieves all notification contexts associated with a specific key."}, {"name": "SubscriberMap::Exists", "description": "Checks whether there are any subscriptions for a specific key."}, {"name": "SubscriberMap::EventUpdate", "description": "Dispatches an event payload to all subscribers matching a specific key and optional appId filter."}, {"name": "SubscriberMap::Dispatch", "description": "Dispatches notification to the appropriate gateway or delegate based on context origin."}, {"name": "SubscriberMap::DispatchToGateway", "description": "Sends notification to the Gateway interface."}, {"name": "SubscriberMap::DispatchToLaunchDelegate", "description": "Sends notification to the internal launch delegate."}, {"name": "ThunderSubscriptionManager::Subscribe", "description": "Subscribes to Thunder notifications for a specific module and event."}, {"name": "ThunderSubscriptionManager::Unsubscribe", "description": "Unsubscribes from Thunder notifications for a specific module and event."}, {"name": "ThunderSubscriptionManager::HandleNotifier", "description": "Handles the actual registration/unregistration call with notifier interfaces."}, {"name": "ThunderSubscriptionManager::RegisterNotification", "description": "Registers a Thunder notification."}, {"name": "ThunderSubscriptionManager::UnregisterNotification", "description": "Unregisters a Thunder notification."}, {"name": "ThunderSubscriptionManager::IsNotificationRegistered", "description": "Checks if a notification is already registered."}, {"name": "void Add(const string & key,const Exchange::IAppNotifications::AppNotificationContext & context)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class", "description": "unavailable"}, {"name": "AppNotificationsImplementation()", "scope": "WPEFramework::Plugin::AppNotificationsImplementation", "scopeKind": "class", "description": "unavailable"}, {"name": "void CleanupNotifications(const uint32_t & connectionId,const string & origin)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class", "description": "unavailable"}, {"name": "void Dispatch(const Exchange::IAppNotifications::AppNotificationContext & context,const string & payload)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class", "description": "unavailable"}, {"name": "void DispatchToGateway(const Exchange::IAppNotifications::AppNotificationContext & context,const string & payload)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class", "description": "unavailable"}, {"name": "void DispatchToLaunchDelegate(const Exchange::IAppNotifications::AppNotificationContext & context,const string & payload)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class", "description": "unavailable"}, {"name": "void EventUpdate(const string & key,const string & payloadStr,const string & appId)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class", "description": "unavailable"}, {"name": "bool Exists(const string & key) const", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class", "description": "unavailable"}, {"name": "std::vector<Exchange::IAppNotifications::AppNotificationContext> Get(const string & key) const", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class", "description": "unavailable"}, {"name": "bool HandleNotifier(const string & module,const string & event,const bool & listen)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::ThunderSubscriptionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "bool IsNotificationRegistered(const string & notification) const", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::ThunderSubscriptionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "void RegisterNotification(const string & module,const string & event)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::ThunderSubscriptionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "void Remove(const string & key,const Exchange::IAppNotifications::AppNotificationContext & context)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class", "description": "unavailable"}, {"name": "void Subscribe(const string & module,const string & event)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::ThunderSubscriptionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "void UnregisterNotification(const string & module,const string & event)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::ThunderSubscriptionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "void Unsubscribe(const string & module,const string & event)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::ThunderSubscriptionManager", "scopeKind": "class", "description": "unavailable"}, {"name": "__anon6cfc5bd20102(const Exchange::IAppNotifications::AppNotificationContext& context)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap::CleanupNotifications", "scopeKind": "function", "description": "unavailable"}, {"name": "bool operator ==(const IAppNotifications::AppNotificationContext & lhs,const IAppNotifications::AppNotificationContext & rhs)", "scope": "WPEFramework::Exchange", "scopeKind": "namespace", "description": "unavailable"}, {"name": "~AppNotificationsImplementation()", "scope": "WPEFramework::Plugin::AppNotificationsImplementation", "scopeKind": "class", "description": "unavailable"}], "calls": ["Core::WorkerPool::Instance().Submit()", "mShell->AddRef()", "mShell->QueryInterfaceByCallsign()", "ContextUtils::ConvertNotificationToAppGatewayContext()", "ContextUtils::IsOriginGateway()", "internalNotifier->HandleAppEventNotifier()", "internalNotifier->Release()", "LOGTRACE", "LOGERR", "LOGWARN", "LOGDBG"], "search-terms": ["AppNotifications", "Subscription", "EventEmission", "ThunderNotification", "GatewayDispatch", "InternalDelegate", "NotificationCleanup", "Subscribe", "Emit", "Cleanup", "Thunder"], "state": 2, "file_id": 5972, "knowledge_revision": 11962, "git_revision": "", "ctags": [{"_type": "tag", "name": "Add", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        void AppNotificationsImplementation::SubscriberMap::Add(const string& key, const Exchang/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const string & key,const Exchange::IAppNotifications::AppNotificationContext & context)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class"}, {"_type": "tag", "name": "AppNotificationsImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        AppNotificationsImplementation::AppNotificationsImplementation() : $/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::AppNotificationsImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Cleanup", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        Core::hresult AppNotificationsImplementation::Cleanup(const uint32_t connectionId \\/* @i/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const uint32_t connectionId,const string & origin)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "CleanupNotifications", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        void AppNotificationsImplementation::SubscriberMap::CleanupNotifications(const uint32_t /", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const uint32_t & connectionId,const string & origin)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class"}, {"_type": "tag", "name": "Configure", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        uint32_t AppNotificationsImplementation::Configure(PluginHost::IShell *shell)$/", "language": "C++", "typeref": "typename:uint32_t", "kind": "function", "signature": "(PluginHost::IShell * shell)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Dispatch", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        void AppNotificationsImplementation::SubscriberMap::Dispatch(const Exchange::IAppNotific/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const Exchange::IAppNotifications::AppNotificationContext & context,const string & payload)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class"}, {"_type": "tag", "name": "DispatchToGateway", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        void AppNotificationsImplementation::SubscriberMap::DispatchToGateway(const Exchange::IA/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const Exchange::IAppNotifications::AppNotificationContext & context,const string & payload)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class"}, {"_type": "tag", "name": "DispatchToLaunchDelegate", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        void AppNotificationsImplementation::SubscriberMap::DispatchToLaunchDelegate(const Excha/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const Exchange::IAppNotifications::AppNotificationContext & context,const string & payload)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class"}, {"_type": "tag", "name": "Emit", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        Core::hresult AppNotificationsImplementation::Emit(const string &event \\/* @in *\\/,$/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const string & event,const string & payload,const string & appId)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "EventUpdate", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        void AppNotificationsImplementation::SubscriberMap::EventUpdate(const string& key, const/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const string & key,const string & payloadStr,const string & appId)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class"}, {"_type": "tag", "name": "Exchange", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^    namespace Exchange {$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "Exists", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        bool AppNotificationsImplementation::SubscriberMap::Exists(const string& key) const {$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & key) const", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class"}, {"_type": "tag", "name": "Get", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        std::vector<Exchange::IAppNotifications::AppNotificationContext> AppNotificationsImpleme/", "language": "C++", "typeref": "typename:std::vector<Exchange::IAppNotifications::AppNotificationContext>", "kind": "function", "signature": "(const string & key) const", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class"}, {"_type": "tag", "name": "HandleNotifier", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        bool AppNotificationsImplementation::ThunderSubscriptionManager::HandleNotifier(const st/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & module,const string & event,const bool & listen)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::ThunderSubscriptionManager", "scopeKind": "class"}, {"_type": "tag", "name": "IsNotificationRegistered", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        bool AppNotificationsImplementation::ThunderSubscriptionManager::IsNotificationRegistere/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const string & notification) const", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::ThunderSubscriptionManager", "scopeKind": "class"}, {"_type": "tag", "name": "Plugin", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^    namespace Plugin$/", "file": true, "language": "C++", "kind": "namespace", "scope": "WPEFramework", "scopeKind": "namespace"}, {"_type": "tag", "name": "RegisterNotification", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        void AppNotificationsImplementation::ThunderSubscriptionManager::RegisterNotification(co/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const string & module,const string & event)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::ThunderSubscriptionManager", "scopeKind": "class"}, {"_type": "tag", "name": "Remove", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        void AppNotificationsImplementation::SubscriberMap::Remove(const string& key, const Exch/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const string & key,const Exchange::IAppNotifications::AppNotificationContext & context)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap", "scopeKind": "class"}, {"_type": "tag", "name": "Subscribe", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        Core::hresult AppNotificationsImplementation::Subscribe(const Exchange::IAppNotification/", "language": "C++", "typeref": "typename:Core::hresult", "kind": "function", "signature": "(const Exchange::IAppNotifications::AppNotificationContext & context,bool listen,const string & module,const string & event)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation", "scopeKind": "class"}, {"_type": "tag", "name": "Subscribe", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        void AppNotificationsImplementation::ThunderSubscriptionManager::Subscribe(const string&/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const string & module,const string & event)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::ThunderSubscriptionManager", "scopeKind": "class"}, {"_type": "tag", "name": "UnregisterNotification", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        void AppNotificationsImplementation::ThunderSubscriptionManager::UnregisterNotification(/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const string & module,const string & event)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::ThunderSubscriptionManager", "scopeKind": "class"}, {"_type": "tag", "name": "Unsubscribe", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        void AppNotificationsImplementation::ThunderSubscriptionManager::Unsubscribe(const strin/", "language": "C++", "typeref": "typename:void", "kind": "function", "signature": "(const string & module,const string & event)", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::ThunderSubscriptionManager", "scopeKind": "class"}, {"_type": "tag", "name": "WPEFramework", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^namespace WPEFramework$/", "file": true, "language": "C++", "kind": "namespace"}, {"_type": "tag", "name": "__anon6cfc5bd20102", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^                    [&](const Exchange::IAppNotifications::AppNotificationContext& context) {$/", "file": true, "language": "C++", "kind": "function", "signature": "(const Exchange::IAppNotifications::AppNotificationContext& context) ", "scope": "WPEFramework::Plugin::AppNotificationsImplementation::SubscriberMap::CleanupNotifications", "scopeKind": "function"}, {"_type": "tag", "name": "operator ==", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        bool operator==(const IAppNotifications::AppNotificationContext& lhs,$/", "language": "C++", "typeref": "typename:bool", "kind": "function", "signature": "(const IAppNotifications::AppNotificationContext & lhs,const IAppNotifications::AppNotificationContext & rhs)", "scope": "WPEFramework::Exchange", "scopeKind": "namespace"}, {"_type": "tag", "name": "~AppNotificationsImplementation", "path": "/home/kavia/workspace/code-generation/app-gateway2/dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "pattern": "/^        AppNotificationsImplementation::~AppNotificationsImplementation()$/", "language": "C++", "kind": "function", "signature": "()", "scope": "WPEFramework::Plugin::AppNotificationsImplementation", "scopeKind": "class"}], "hash": "887813d285c7870146ba4719fe36179c", "format-version": 4, "code-base-name": "app-gateway2", "filename": "dependencies/entservices-infra/AppNotifications/AppNotificationsImplementation.cpp", "revision_history": [{"11962": ""}]}